"use strict";(self.webpackChunkProjectX=self.webpackChunkProjectX||[]).push([[179],{2011:(yt,Me,F)=>{F.d(Me,{Dh:()=>ve,GT:()=>fe,cc:()=>Ae,hO:()=>je,on:()=>G,pX:()=>se,xv:()=>pe});var l=F(4650),X=F(9260),O=F(8623);yt=F.hmd(yt);const ae=["ngOnDestroy"],se=(ye,ht,vt,Pe={})=>new Proxy(ye,{get:(we,ge)=>vt.runOutsideAngular(()=>{var He;if(ye[ge])return!(null===(He=Pe?.spy)||void 0===He)&&He.get&&Pe.spy.get(ge,ye[ge]),ye[ge];if(ae.indexOf(ge)>-1)return()=>{};const Be=ht.toPromise().then(Xe=>{const ee=Xe&&Xe[ge];return"function"==typeof ee?ee.bind(Xe):ee&&ee.then?ee.then(xt=>vt.run(()=>xt)):vt.run(()=>ee)});return new Proxy(()=>{},{get:(Xe,ee)=>Be[ee],apply:(Xe,ee,xt)=>Be.then(ut=>{var $t;const at=ut&&ut(...xt);return!(null===($t=Pe?.spy)||void 0===$t)&&$t.apply&&Pe.spy.apply(ge,xt,at),at})})})}),fe=(ye,ht)=>{ht.forEach(vt=>{Object.getOwnPropertyNames(vt.prototype||vt).forEach(Pe=>{Object.defineProperty(ye.prototype,Pe,Object.getOwnPropertyDescriptor(vt.prototype||vt,Pe))})})};class de{constructor(ht){return ht}}const ve=new l.OlP("angularfire2.app.options"),pe=new l.OlP("angularfire2.app.name");function G(ye,ht,vt){const we="object"==typeof vt&&vt||{};we.name=we.name||"string"==typeof vt&&vt||"[DEFAULT]";const He=X.Z.apps.filter(Be=>Be&&Be.name===we.name)[0]||ht.runOutsideAngular(()=>X.Z.initializeApp(ye,we));try{JSON.stringify(ye)!==JSON.stringify(He.options)&&$("error",`${He.name} Firebase App already initialized with different options${yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new de(He)}const $=(ye,...ht)=>{(0,l.X6Q)()&&typeof console<"u"&&console[ye](...ht)},Z={provide:de,useFactory:G,deps:[ve,l.R0b,[new l.FiY,pe]]};let je=(()=>{class ye{constructor(vt){X.Z.registerVersion("angularfire",O.q4.full,"core"),X.Z.registerVersion("angularfire",O.q4.full,"app-compat"),X.Z.registerVersion("angular",l.q4F.full,vt.toString())}static initializeApp(vt,Pe){return{ngModule:ye,providers:[{provide:ve,useValue:vt},{provide:pe,useValue:Pe}]}}}return ye.\u0275fac=function(vt){return new(vt||ye)(l.LFG(l.Lbi))},ye.\u0275mod=l.oAB({type:ye}),ye.\u0275inj=l.cJS({providers:[Z]}),ye})();function Ae(ye,ht,vt,Pe,we){const[,ge,He]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===ye)||[];if(ge)return function Ce(ye,ht){try{return ye.toString()===ht.toString()}catch{return ye===ht}}(we,He)||(_e("error",`${ht} was already initialized on the ${vt} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:we,was:He})),ge;{const Be=Pe();return globalThis.\u0275AngularfireInstanceCache.push([ye,Be,we]),Be}}const rt=!!yt.hot,_e=(ye,...ht)=>{(0,l.X6Q)()&&typeof console<"u"&&console[ye](...ht)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8623:(yt,Me,F)=>{F.d(Me,{q4:()=>Au,iC:()=>mo,HU:()=>vd,vb:()=>rf,JM:()=>Mu});var l=F(4650),X=F(259),O=F(5861),ae=F(2951),se=F(2090),fe=F(4859),de=F(1877);let pe,G;const je=new WeakMap,Ae=new WeakMap,Ce=new WeakMap,rt=new WeakMap,_e=new WeakMap;let vt={get(I,b,x){if(I instanceof IDBTransaction){if("done"===b)return Ae.get(I);if("objectStoreNames"===b)return I.objectStoreNames||Ce.get(I);if("store"===b)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return He(I[b])},set:(I,b,x)=>(I[b]=x,!0),has:(I,b)=>I instanceof IDBTransaction&&("done"===b||"store"===b)||b in I};function ge(I){return"function"==typeof I?function we(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Z(){return G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...b){return I.apply(Be(this),b),He(je.get(this))}:function(...b){return He(I.apply(Be(this),b))}:function(b,...x){const k=I.call(Be(this),b,...x);return Ce.set(k,b.sort?b.sort():[b]),He(k)}}(I):(I instanceof IDBTransaction&&function ht(I){if(Ae.has(I))return;const b=new Promise((x,k)=>{const H=()=>{I.removeEventListener("complete",W),I.removeEventListener("error",Ee),I.removeEventListener("abort",Ee)},W=()=>{x(),H()},Ee=()=>{k(I.error||new DOMException("AbortError","AbortError")),H()};I.addEventListener("complete",W),I.addEventListener("error",Ee),I.addEventListener("abort",Ee)});Ae.set(I,b)}(I),((I,b)=>b.some(x=>I instanceof x))(I,function $(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,vt):I)}function He(I){if(I instanceof IDBRequest)return function ye(I){const b=new Promise((x,k)=>{const H=()=>{I.removeEventListener("success",W),I.removeEventListener("error",Ee)},W=()=>{x(He(I.result)),H()},Ee=()=>{k(I.error),H()};I.addEventListener("success",W),I.addEventListener("error",Ee)});return b.then(x=>{x instanceof IDBCursor&&je.set(x,I)}).catch(()=>{}),_e.set(b,I),b}(I);if(rt.has(I))return rt.get(I);const b=ge(I);return b!==I&&(rt.set(I,b),_e.set(b,I)),b}const Be=I=>_e.get(I);function Xe(I,b,{blocked:x,upgrade:k,blocking:H,terminated:W}={}){const Ee=indexedDB.open(I,b),ze=He(Ee);return k&&Ee.addEventListener("upgradeneeded",We=>{k(He(Ee.result),We.oldVersion,We.newVersion,He(Ee.transaction))}),x&&Ee.addEventListener("blocked",()=>x()),ze.then(We=>{W&&We.addEventListener("close",()=>W()),H&&We.addEventListener("versionchange",()=>H())}).catch(()=>{}),ze}function ee(I,{blocked:b}={}){const x=indexedDB.deleteDatabase(I);return b&&x.addEventListener("blocked",()=>b()),He(x).then(()=>{})}const xt=["get","getKey","getAll","getAllKeys","count"],ut=["put","add","delete","clear"],$t=new Map;function at(I,b){if(!(I instanceof IDBDatabase)||b in I||"string"!=typeof b)return;if($t.get(b))return $t.get(b);const x=b.replace(/FromIndex$/,""),k=b!==x,H=ut.includes(x);if(!(x in(k?IDBIndex:IDBObjectStore).prototype)||!H&&!xt.includes(x))return;const W=function(){var Ee=(0,O.Z)(function*(ze,...We){const dt=this.transaction(ze,H?"readwrite":"readonly");let Ft=dt.store;return k&&(Ft=Ft.index(We.shift())),(yield Promise.all([Ft[x](...We),H&&dt.done]))[0]});return function(We){return Ee.apply(this,arguments)}}();return $t.set(b,W),W}!function Pe(I){vt=I(vt)}(I=>({...I,get:(b,x,k)=>at(b,x)||I.get(b,x,k),has:(b,x)=>!!at(b,x)||I.has(b,x)}));const cs="@firebase/installations",Ti="w:0.6.4",xn="FIS_v2",xe=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(I){return I instanceof se.ZR&&I.code.includes("request-failed")}function tt({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function jt(I){return{token:I.token,requestStatus:2,expiresIn:Wn(I.expiresIn),creationTime:Date.now()}}function un(I,b){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,O.Z)(function*(I,b){const k=(yield b.json()).error;return xe.create("request-failed",{requestName:I,serverCode:k.code,serverMessage:k.message,serverStatus:k.status})})).apply(this,arguments)}function hn({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function fn(I,{refreshToken:b}){const x=hn(I);return x.append("Authorization",function ir(I){return`${xn} ${I}`}(b)),x}function Er(I){return zt.apply(this,arguments)}function zt(){return(zt=(0,O.Z)(function*(I){const b=yield I();return b.status>=500&&b.status<600?I():b})).apply(this,arguments)}function Wn(I){return Number(I.replace("s","000"))}function Ye(I,b){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:b},{fid:x}){const k=tt(I),H=hn(I),W=b.getImmediate({optional:!0});if(W){const dt=yield W.getHeartbeatsHeader();dt&&H.append("x-firebase-client",dt)}const ze={method:"POST",headers:H,body:JSON.stringify({fid:x,authVersion:xn,appId:I.appId,sdkVersion:Ti})},We=yield Er(()=>fetch(k,ze));if(We.ok){const dt=yield We.json();return{fid:dt.fid||x,registrationStatus:2,refreshToken:dt.refreshToken,authToken:jt(dt.authToken)}}throw yield un("Create Installation",We)})).apply(this,arguments)}function Si(I){return new Promise(b=>{setTimeout(b,I)})}const xo=/^[cdef][\w-]{21}$/;function sr(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function Cn(I){return function Br(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return xo.test(x)?x:""}catch{return""}}function Kt(I){return`${I.appName}!${I.appId}`}const it=new Map;function _t(I,b){const x=Kt(I);Kr(x,b),function Kn(I,b){const x=function Ir(){return!Dt&&"BroadcastChannel"in self&&(Dt=new BroadcastChannel("[Firebase] FID Change"),Dt.onmessage=I=>{Kr(I.data.key,I.data.fid)}),Dt}();x&&x.postMessage({key:I,fid:b}),function cn(){0===it.size&&Dt&&(Dt.close(),Dt=null)}()}(x,b)}function Kr(I,b){const x=it.get(I);if(x)for(const k of x)k(b)}let Dt=null;const or="firebase-installations-store";let Cr=null;function Ai(){return Cr||(Cr=Xe("firebase-installations-database",1,{upgrade:(I,b)=>{0===b&&I.createObjectStore(or)}})),Cr}function Nn(I,b){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,O.Z)(function*(I,b){const x=Kt(I),H=(yield Ai()).transaction(or,"readwrite"),W=H.objectStore(or),Ee=yield W.get(x);return yield W.put(b,x),yield H.done,(!Ee||Ee.fid!==b.fid)&&_t(I,b.fid),b})).apply(this,arguments)}function zi(I){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(I){const b=Kt(I),k=(yield Ai()).transaction(or,"readwrite");yield k.objectStore(or).delete(b),yield k.done})).apply(this,arguments)}function Yr(I,b){return jr.apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(I,b){const x=Kt(I),H=(yield Ai()).transaction(or,"readwrite"),W=H.objectStore(or),Ee=yield W.get(x),ze=b(Ee);return void 0===ze?yield W.delete(x):yield W.put(ze,x),yield H.done,ze&&(!Ee||Ee.fid!==ze.fid)&&_t(I,ze.fid),ze})).apply(this,arguments)}function U(I){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*(I){let b;const x=yield Yr(I.appConfig,k=>{const H=q(k),W=ue(I,H);return b=W.registrationPromise,W.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function q(I){return Ue(I||{fid:sr(),registrationStatus:0})}function ue(I,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(xe.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},k=function Q(I,b){return Ge.apply(this,arguments)}(I,x);return{installationEntry:x,registrationPromise:k}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:Tt(I)}:{installationEntry:b}}function Ge(){return(Ge=(0,O.Z)(function*(I,b){try{const x=yield Ye(I,b);return Nn(I.appConfig,x)}catch(x){throw De(x)&&409===x.customData.serverCode?yield zi(I.appConfig):yield Nn(I.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Tt(I){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(I){let b=yield on(I.appConfig);for(;1===b.registrationStatus;)yield Si(100),b=yield on(I.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:k}=yield U(I);return k||x}return b})).apply(this,arguments)}function on(I){return Yr(I,b=>{if(!b)throw xe.create("installation-not-found");return Ue(b)})}function Ue(I){return function ct(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function mt(I,b){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:b},x){const k=br(I,x),H=fn(I,x),W=b.getImmediate({optional:!0});if(W){const dt=yield W.getHeartbeatsHeader();dt&&H.append("x-firebase-client",dt)}const ze={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:Ti,appId:I.appId}})},We=yield Er(()=>fetch(k,ze));if(We.ok)return jt(yield We.json());throw yield un("Generate Auth Token",We)})).apply(this,arguments)}function br(I,{fid:b}){return`${tt(I)}/${b}/authTokens:generate`}function mn(I){return xi.apply(this,arguments)}function xi(){return(xi=(0,O.Z)(function*(I,b=!1){let x;const k=yield Yr(I.appConfig,W=>{if(!kt(W))throw xe.create("not-registered");const Ee=W.authToken;if(!b&&Qt(Ee))return W;if(1===Ee.requestStatus)return x=re(I,b),W;{if(!navigator.onLine)throw xe.create("app-offline");const ze=qt(W);return x=Fe(I,ze),ze}});return x?yield x:k.authToken})).apply(this,arguments)}function re(I,b){return te.apply(this,arguments)}function te(){return(te=(0,O.Z)(function*(I,b){let x=yield Re(I.appConfig);for(;1===x.authToken.requestStatus;)yield Si(100),x=yield Re(I.appConfig);const k=x.authToken;return 0===k.requestStatus?mn(I,b):k})).apply(this,arguments)}function Re(I){return Yr(I,b=>{if(!kt(b))throw xe.create("not-registered");return function Tr(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Fe(I,b){return It.apply(this,arguments)}function It(){return(It=(0,O.Z)(function*(I,b){try{const x=yield mt(I,b),k=Object.assign(Object.assign({},b),{authToken:x});return yield Nn(I.appConfig,k),x}catch(x){if(!De(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const k=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Nn(I.appConfig,k)}else yield zi(I.appConfig);throw x}})).apply(this,arguments)}function kt(I){return void 0!==I&&2===I.registrationStatus}function Qt(I){return 2===I.requestStatus&&!function bn(I){const b=Date.now();return b<I.creationTime||I.creationTime+I.expiresIn<b+36e5}(I)}function qt(I){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:b})}function Qr(){return(Qr=(0,O.Z)(function*(I){const b=I,{installationEntry:x,registrationPromise:k}=yield U(b);return k?k.catch(console.error):mn(b).catch(console.error),x.fid})).apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(I,b=!1){const x=I;return yield yn(x),(yield mn(x,b)).token})).apply(this,arguments)}function yn(I){return qi.apply(this,arguments)}function qi(){return(qi=(0,O.Z)(function*(I){const{registrationPromise:b}=yield U(I);b&&(yield b)})).apply(this,arguments)}function ar(I){return xe.create("missing-app-config-values",{valueName:I})}const $r="installations",tu=I=>{const b=I.getProvider("app").getImmediate(),x=function Fl(I){if(!I||!I.options)throw ar("App Configuration");if(!I.name)throw ar("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!I.options[x])throw ar(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,ae._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},ls=I=>{const b=I.getProvider("app").getImmediate(),x=(0,ae._getProvider)(b,$r).getImmediate();return{getId:()=>function li(I){return Qr.apply(this,arguments)}(x),getToken:H=>function sa(I){return oa.apply(this,arguments)}(x,H)}};(function Mi(){(0,ae._registerComponent)(new fe.wA($r,tu,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("installations-internal",ls,"PRIVATE"))})(),(0,ae.registerVersion)(cs,"0.6.4"),(0,ae.registerVersion)(cs,"0.6.4","esm2017");const Po="@firebase/remote-config",En=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class di{constructor(b,x,k,H){this.client=b,this.storage=x,this.storageCache=k,this.logger=H}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const k=Date.now()-x,H=k<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${k}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${H}.`),H}fetch(b){var x=this;return(0,O.Z)(function*(){const[k,H]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(H&&x.isCachedDataFresh(b.cacheMaxAgeMillis,k))return H;b.eTag=H&&H.eTag;const W=yield x.client.fetch(b),Ee=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===W.status&&Ee.push(x.storage.setLastSuccessfulFetchResponse(W)),yield Promise.all(Ee),W})()}}function zl(I=navigator){return I.languages&&I.languages[0]||I.language}class aa{constructor(b,x,k,H,W,Ee){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=k,this.projectId=H,this.apiKey=W,this.appId=Ee}fetch(b){var x=this;return(0,O.Z)(function*(){const[k,H]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ee=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},We={sdk_version:x.sdkVersion,app_instance_id:k,app_instance_id_token:H,app_id:x.appId,language_code:zl()},dt={method:"POST",headers:ze,body:JSON.stringify(We)},Ft=fetch(Ee,dt),Pt=new Promise((_i,ts)=>{b.signal.addEventListener(()=>{const vi=new Error("The operation was aborted.");vi.name="AbortError",ts(vi)})});let ti;try{yield Promise.race([Ft,Pt]),ti=yield Ft}catch(_i){let ts="fetch-client-network";throw"AbortError"===_i?.name&&(ts="fetch-timeout"),En.create(ts,{originalErrorMessage:_i?.message})}let Et=ti.status;const Ws=ti.headers.get("ETag")||void 0;let wd,ni;if(200===ti.status){let _i;try{_i=yield ti.json()}catch(ts){throw En.create("fetch-client-parse",{originalErrorMessage:ts?.message})}wd=_i.entries,ni=_i.state}if("INSTANCE_STATE_UNSPECIFIED"===ni?Et=500:"NO_CHANGE"===ni?Et=304:("NO_TEMPLATE"===ni||"EMPTY_CONFIG"===ni)&&(wd={}),304!==Et&&200!==Et)throw En.create("fetch-status",{httpStatus:Et});return{status:Et,eTag:Ws,config:wd}})()}}class Vh{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const k=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,k)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:k}){var H=this;return(0,O.Z)(function*(){yield function cc(I,b){return new Promise((x,k)=>{const H=Math.max(b-Date.now(),0),W=setTimeout(x,H);I.addEventListener(()=>{clearTimeout(W),k(En.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const W=yield H.client.fetch(b);return yield H.storage.deleteThrottleMetadata(),W}catch(W){if(!function su(I){if(!(I instanceof se.ZR&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}(W))throw W;const Ee={throttleEndTimeMillis:Date.now()+(0,se.$s)(k),backoffCount:k+1};return yield H.storage.setThrottleMetadata(Ee),H.attemptFetch(b,Ee)}})()}}class Uh{constructor(b,x,k,H,W){this.app=b,this._client=x,this._storageCache=k,this._storage=H,this._logger=W,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function mr(I,b){const x=I.target.error||void 0;return En.create(b,{originalErrorMessage:x&&x?.message})}const xr="app_namespace_store";class _w{constructor(b,x,k,H=function uu(){return new Promise((I,b)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=k=>{b(mr(k,"storage-open"))},x.onsuccess=k=>{I(k.target.result)},x.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(xr,{keyPath:"compositeKey"})}}catch(x){b(En.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=b,this.appName=x,this.namespace=k,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const k=yield x.openDbPromise;return new Promise((H,W)=>{const ze=k.transaction([xr],"readonly").objectStore(xr),We=x.createCompositeKey(b);try{const dt=ze.get(We);dt.onerror=Ft=>{W(mr(Ft,"storage-get"))},dt.onsuccess=Ft=>{const Pt=Ft.target.result;H(Pt?Pt.value:void 0)}}catch(dt){W(En.create("storage-get",{originalErrorMessage:dt?.message}))}})})()}set(b,x){var k=this;return(0,O.Z)(function*(){const H=yield k.openDbPromise;return new Promise((W,Ee)=>{const We=H.transaction([xr],"readwrite").objectStore(xr),dt=k.createCompositeKey(b);try{const Ft=We.put({compositeKey:dt,value:x});Ft.onerror=Pt=>{Ee(mr(Pt,"storage-set"))},Ft.onsuccess=()=>{W()}}catch(Ft){Ee(En.create("storage-set",{originalErrorMessage:Ft?.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const k=yield x.openDbPromise;return new Promise((H,W)=>{const ze=k.transaction([xr],"readwrite").objectStore(xr),We=x.createCompositeKey(b);try{const dt=ze.delete(We);dt.onerror=Ft=>{W(mr(Ft,"storage-delete"))},dt.onsuccess=()=>{H()}}catch(dt){W(En.create("storage-delete",{originalErrorMessage:dt?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class $n{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),k=b.storage.getLastSuccessfulFetchTimestampMillis(),H=b.storage.getActiveConfig(),W=yield x;W&&(b.lastFetchStatus=W);const Ee=yield k;Ee&&(b.lastSuccessfulFetchTimestampMillis=Ee);const ze=yield H;ze&&(b.activeConfig=ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Hr(){return dc.apply(this,arguments)}function dc(){return(dc=(0,O.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function hs(){(0,ae._registerComponent)(new fe.wA("remote-config",function I(b,{instanceIdentifier:x}){const k=b.getProvider("app").getImmediate(),H=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw En.create("registration-window");if(!(0,se.hl)())throw En.create("indexed-db-unavailable");const{projectId:W,apiKey:Ee,appId:ze}=k.options;if(!W)throw En.create("registration-project-id");if(!Ee)throw En.create("registration-api-key");if(!ze)throw En.create("registration-app-id");const We=new _w(ze,k.name,x=x||"firebase"),dt=new $n(We),Ft=new de.Yd(Po);Ft.logLevel=de.in.ERROR;const Pt=new aa(H,ae.SDK_VERSION,x,W,Ee,ze),ti=new Vh(Pt,We),Et=new di(ti,We,dt,Ft),Ws=new Uh(k,Et,dt,We,Ft);return function Cg(I){const b=(0,se.m9)(I);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Ws),Ws},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Po,"0.4.4"),(0,ae.registerVersion)(Po,"0.4.4","esm2017")}();const ua="/firebase-messaging-sw.js",ca="/firebase-cloud-messaging-push-scope",Hn="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ls="google.c.a.c_id",ql="google.c.a.c_l",Ri="google.c.a.ts",so="google.c.a.e";var wt=(()=>{return(I=wt||(wt={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",wt;var I})();function Zi(I){const b=new Uint8Array(I);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zl(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),k=atob(x),H=new Uint8Array(k.length);for(let W=0;W<k.length;++W)H[W]=k.charCodeAt(W);return H}const la="fcm_token_details_db",hc="fcm_token_object_Store";function Kl(I){return da.apply(this,arguments)}function da(){return da=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(la))return null;let b=null;return(yield Xe(la,5,{upgrade:(k=(0,O.Z)(function*(H,W,Ee,ze){var We;if(W<2||!H.objectStoreNames.contains(hc))return;const dt=ze.objectStore(hc),Ft=yield dt.index("fcmSenderId").get(I);if(yield dt.clear(),Ft)if(2===W){const Pt=Ft;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;b={token:Pt.fcmToken,createTime:null!==(We=Pt.createTime)&&void 0!==We?We:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:Zi(Pt.vapidKey)}}}else if(3===W){const Pt=Ft;b={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Zi(Pt.auth),p256dh:Zi(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Zi(Pt.vapidKey)}}}else if(4===W){const Pt=Ft;b={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Zi(Pt.auth),p256dh:Zi(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Zi(Pt.vapidKey)}}}}),function(W,Ee,ze,We){return k.apply(this,arguments)})})).close(),yield ee(la),yield ee("fcm_vapid_details_db"),yield ee("undefined"),Yl(b)?b:null;var k}),da.apply(this,arguments)}function Yl(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:b}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Wi="firebase-messaging-store";let ha=null;function Pn(){return ha||(ha=Xe("firebase-messaging-database",1,{upgrade:(I,b)=>{0===b&&I.createObjectStore(Wi)}})),ha}function lu(I){return fs.apply(this,arguments)}function fs(){return(fs=(0,O.Z)(function*(I){const b=Dn(I),k=yield(yield Pn()).transaction(Wi).objectStore(Wi).get(b);if(k)return k;{const H=yield Kl(I.appConfig.senderId);if(H)return yield Mr(I,H),H}})).apply(this,arguments)}function Mr(I,b){return oo.apply(this,arguments)}function oo(){return(oo=(0,O.Z)(function*(I,b){const x=Dn(I),H=(yield Pn()).transaction(Wi,"readwrite");return yield H.objectStore(Wi).put(b,x),yield H.done,b})).apply(this,arguments)}function fc(I){return du.apply(this,arguments)}function du(){return(du=(0,O.Z)(function*(I){const b=Dn(I),k=(yield Pn()).transaction(Wi,"readwrite");yield k.objectStore(Wi).delete(b),yield k.done})).apply(this,arguments)}function Dn({appConfig:I}){return I.appId}const yr=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Sr(I,b){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,O.Z)(function*(I,b){const x=yield Ql(I),k=fu(b),H={method:"POST",headers:x,body:JSON.stringify(k)};let W;try{W=yield(yield fetch(Vs(I.appConfig),H)).json()}catch(Ee){throw yr.create("token-subscribe-failed",{errorInfo:Ee?.toString()})}if(W.error)throw yr.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw yr.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function pc(I,b){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,O.Z)(function*(I,b){const x=yield Ql(I),k=fu(b.subscriptionOptions),H={method:"PATCH",headers:x,body:JSON.stringify(k)};let W;try{W=yield(yield fetch(`${Vs(I.appConfig)}/${b.token}`,H)).json()}catch(Ee){throw yr.create("token-update-failed",{errorInfo:Ee?.toString()})}if(W.error)throw yr.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw yr.create("token-update-no-token");return W.token})).apply(this,arguments)}function fi(I,b){return hu.apply(this,arguments)}function hu(){return(hu=(0,O.Z)(function*(I,b){const k={method:"DELETE",headers:yield Ql(I)};try{const W=yield(yield fetch(`${Vs(I.appConfig)}/${b}`,k)).json();if(W.error)throw yr.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch(H){throw yr.create("token-unsubscribe-failed",{errorInfo:H?.toString()})}})).apply(this,arguments)}function Vs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ql(I){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,O.Z)(function*({appConfig:I,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function fu({p256dh:I,auth:b,endpoint:x,vapidKey:k}){const H={web:{endpoint:x,auth:b,p256dh:I}};return k!==Hn&&(H.web.applicationPubKey=k),H}const fa=6048e5;function pu(I){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,O.Z)(function*(I){const b=yield ed(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:b.endpoint,auth:Zi(b.getKey("auth")),p256dh:Zi(b.getKey("p256dh"))},k=yield lu(I.firebaseDependencies);if(k){if(td(k.subscriptionOptions,x))return Date.now()>=k.createTime+fa?gu(I,{token:k.token,createTime:Date.now(),subscriptionOptions:x}):k.token;try{yield fi(I.firebaseDependencies,k.token)}catch(H){console.warn(H)}return Xl(I.firebaseDependencies,x)}return Xl(I.firebaseDependencies,x)})).apply(this,arguments)}function Jl(I){return pa.apply(this,arguments)}function pa(){return(pa=(0,O.Z)(function*(I){const b=yield lu(I.firebaseDependencies);b&&(yield fi(I.firebaseDependencies,b.token),yield fc(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function gu(I,b){return ao.apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(I,b){try{const x=yield pc(I.firebaseDependencies,b),k=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield Mr(I.firebaseDependencies,k),x}catch(x){throw yield Jl(I),x}})).apply(this,arguments)}function Xl(I,b){return ga.apply(this,arguments)}function ga(){return(ga=(0,O.Z)(function*(I,b){const k={token:yield Sr(I,b),createTime:Date.now(),subscriptionOptions:b};return yield Mr(I,k),k.token})).apply(this,arguments)}function ed(I,b){return ko.apply(this,arguments)}function ko(){return(ko=(0,O.Z)(function*(I,b){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zl(b)})})).apply(this,arguments)}function td(I,b){return b.vapidKey===I.vapidKey&&b.endpoint===I.endpoint&&b.auth===I.auth&&b.p256dh===I.p256dh}function jh(I){const b={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Gr(I,b){if(!b.notification)return;I.notification={};const x=b.notification.title;x&&(I.notification.title=x);const k=b.notification.body;k&&(I.notification.body=k);const H=b.notification.image;H&&(I.notification.image=H);const W=b.notification.icon;W&&(I.notification.icon=W)}(b,I),function ps(I,b){!b.data||(I.data=b.data)}(b,I),function On(I,b){var x,k,H,W,Ee;if(!(b.fcmOptions||null!==(x=b.notification)&&void 0!==x&&x.click_action))return;I.fcmOptions={};const ze=null!==(H=null===(k=b.fcmOptions)||void 0===k?void 0:k.link)&&void 0!==H?H:null===(W=b.notification)||void 0===W?void 0:W.click_action;ze&&(I.fcmOptions.link=ze);const We=null===(Ee=b.fcmOptions)||void 0===Ee?void 0:Ee.analytics_label;We&&(I.fcmOptions.analyticsLabel=We)}(b,I),b}function nd(I){return"object"==typeof I&&!!I&&Ls in I}function $h(I,b){const x=[];for(let k=0;k<I.length;k++)x.push(I.charAt(k)),k<b.length&&x.push(b.charAt(k));return x.join("")}function id(I){return yr.create("missing-app-config-values",{valueName:I})}$h("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$h("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class sd{constructor(b,x,k){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function rd(I){if(!I||!I.options)throw id("App Configuration Object");if(!I.name)throw id("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const k of b)if(!x[k])throw id(k);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:H,installations:x,analyticsProvider:k}}_delete(){return Promise.resolve()}}function od(I){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(ua,{scope:ca}),I.swRegistration.update().catch(()=>{})}catch(b){throw yr.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function mu(I,b){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(I,b){if(!b&&!I.swRegistration&&(yield od(I)),b||!I.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw yr.create("invalid-sw-registration");I.swRegistration=b}})).apply(this,arguments)}function ad(I,b){return ma.apply(this,arguments)}function ma(){return(ma=(0,O.Z)(function*(I,b){b?I.vapidKey=b:I.vapidKey||(I.vapidKey=Hn)})).apply(this,arguments)}function gs(){return(gs=(0,O.Z)(function*(I,b){if(!navigator)throw yr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yr.create("permission-blocked");return yield ad(I,b?.vapidKey),yield mu(I,b?.serviceWorkerRegistration),pu(I)})).apply(this,arguments)}function ya(I,b,x){return yu.apply(this,arguments)}function yu(){return(yu=(0,O.Z)(function*(I,b,x){const k=Tg(b);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(k,{message_id:x[Ls],message_name:x[ql],message_time:x[Ri],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Tg(I){switch(I){case wt.NOTIFICATION_CLICKED:return"notification_open";case wt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function _a(){return(_a=(0,O.Z)(function*(I,b){const x=b.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===wt.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(jh(x)):I.onMessageHandler.next(jh(x)));const k=x.data;nd(k)&&"1"===k[so]&&(yield ya(I,x.messageType,k))})).apply(this,arguments)}const Gh="@firebase/messaging",cd=I=>{const b=new sd(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function ms(I,b){return _a.apply(this,arguments)}(b,x)),b},_u=I=>{const b=I.getProvider("messaging").getImmediate();return{getToken:k=>function Hh(I,b){return gs.apply(this,arguments)}(b,k)}};function va(){return gc.apply(this,arguments)}function gc(){return(gc=(0,O.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function vu(){(0,ae._registerComponent)(new fe.wA("messaging",cd,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("messaging-internal",_u,"PRIVATE")),(0,ae.registerVersion)(Gh,"0.12.4"),(0,ae.registerVersion)(Gh,"0.12.4","esm2017")}();const Qi="analytics",Bs="firebase_id",pi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_c="https://www.googletagmanager.com/gtag/js",Tn=new de.Yd("@firebase/analytics"),Yn=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Lo(I){if(!I.startsWith(_c)){const b=Yn.create("invalid-gtag-resource",{gtagURL:I});return Tn.warn(b.message),""}return I}function Ea(I){return Promise.all(I.map(b=>b.catch(x=>x)))}function Cu(I,b){const x=function co(I,b){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(I,b)),x}("firebase-js-sdk-policy",{createScriptURL:Lo}),k=document.createElement("script"),H=`${_c}?l=${I}&id=${b}`;k.src=x?x?.createScriptURL(H):H,k.async=!0,document.head.appendChild(k)}function Du(I,b,x,k,H,W){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,O.Z)(function*(I,b,x,k,H,W){const Ee=k[H];try{if(Ee)yield b[Ee];else{const We=(yield Ea(x)).find(dt=>dt.measurementId===H);We&&(yield b[We.appId])}}catch(ze){Tn.error(ze)}I("config",H,W)})).apply(this,arguments)}function Sg(I,b,x,k,H){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,O.Z)(function*(I,b,x,k,H){try{let W=[];if(H&&H.send_to){let Ee=H.send_to;Array.isArray(Ee)||(Ee=[Ee]);const ze=yield Ea(x);for(const We of Ee){const dt=ze.find(Pt=>Pt.measurementId===We),Ft=dt&&b[dt.appId];if(!Ft){W=[];break}W.push(Ft)}}0===W.length&&(W=Object.values(b)),yield Promise.all(W),I("event",k,H||{})}catch(W){Tn.error(W)}})).apply(this,arguments)}function ld(I){const b=window.document.getElementsByTagName("script");for(const x of Object.values(b))if(x.src&&x.src.includes(_c)&&x.src.includes(I))return x;return null}const kn=new class Zh{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function wc(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ca(I){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,O.Z)(function*(I){var b;const{appId:x,apiKey:k}=I,H={method:"GET",headers:wc(k)},W=pi.replace("{app-id}",x),Ee=yield fetch(W,H);if(200!==Ee.status&&304!==Ee.status){let ze="";try{const We=yield Ee.json();null!==(b=We.error)&&void 0!==b&&b.message&&(ze=We.error.message)}catch{}throw Yn.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:ze})}return Ee.json()})).apply(this,arguments)}function bu(I){return ys.apply(this,arguments)}function ys(){return(ys=(0,O.Z)(function*(I,b=kn,x){const{appId:k,apiKey:H,measurementId:W}=I.options;if(!k)throw Yn.create("no-app-id");if(!H){if(W)return{measurementId:W,appId:k};throw Yn.create("no-api-key")}const Ee=b.getThrottleMetadata(k)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new $s;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==x?x:6e4),Uo({appId:k,apiKey:H,measurementId:W},Ee,ze,b)})).apply(this,arguments)}function Uo(I,b,x){return _s.apply(this,arguments)}function _s(){return(_s=(0,O.Z)(function*(I,{throttleEndTimeMillis:b,backoffCount:x},k,H=kn){var W;const{appId:Ee,measurementId:ze}=I;try{yield hd(k,b)}catch(We){if(ze)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${We?.message}]`),{appId:Ee,measurementId:ze};throw We}try{const We=yield Ca(I);return H.deleteThrottleMetadata(Ee),We}catch(We){const dt=We;if(!Bo(dt)){if(H.deleteThrottleMetadata(Ee),ze)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${dt?.message}]`),{appId:Ee,measurementId:ze};throw We}const Ft=503===Number(null===(W=dt?.customData)||void 0===W?void 0:W.httpStatus)?(0,se.$s)(x,H.intervalMillis,30):(0,se.$s)(x,H.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+Ft,backoffCount:x+1};return H.setThrottleMetadata(Ee,Pt),Tn.debug(`Calling attemptFetch again in ${Ft} millis`),Uo(I,Pt,k,H)}})).apply(this,arguments)}function hd(I,b){return new Promise((x,k)=>{const H=Math.max(b-Date.now(),0),W=setTimeout(x,H);I.addEventListener(()=>{clearTimeout(W),k(Yn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Bo(I){if(!(I instanceof se.ZR&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}class $s{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let jo,zn;function Xt(){return(Xt=(0,O.Z)(function*(I,b,x,k,H){if(H&&H.global)I("event",x,k);else{const W=yield b;I("event",x,Object.assign(Object.assign({},k),{send_to:W}))}})).apply(this,arguments)}function ba(I){zn=I}function Xr(I){jo=I}function Ag(){return bc.apply(this,arguments)}function bc(){return(bc=(0,O.Z)(function*(){if(!(0,se.hl)())return Tn.warn(Yn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(I){return Tn.warn(Yn.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function gi(){return(gi=(0,O.Z)(function*(I,b,x,k,H,W,Ee){var ze;const We=bu(I);We.then(Et=>{x[Et.measurementId]=Et.appId,I.options.measurementId&&Et.measurementId!==I.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Et.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Et=>Tn.error(Et)),b.push(We);const dt=Ag().then(Et=>{if(Et)return k.getId()}),[Ft,Pt]=yield Promise.all([We,dt]);ld(W)||Cu(W,Ft.measurementId),zn&&(H("consent","default",zn),ba(void 0)),H("js",new Date);const ti=null!==(ze=Ee?.config)&&void 0!==ze?ze:{};return ti.origin="firebase",ti.update=!0,null!=Pt&&(ti[Bs]=Pt),H("config",Ft.measurementId,ti),jo&&(H("set",jo),Xr(void 0)),Ft.measurementId})).apply(this,arguments)}class Qh{constructor(b){this.app=b}_delete(){return delete mi[this.app.options.appId],Promise.resolve()}}let mi={},ho=[];const Tc={};let xg,Hs,Sc="dataLayer",Tu=!1;function Ta(I,b,x){!function pd(){const I=[];if((0,se.ru)()&&I.push("This is a browser extension environment."),(0,se.zI)()||I.push("Cookies are not available."),I.length>0){const b=I.map((k,H)=>`(${H+1}) ${k}`).join(" "),x=Yn.create("invalid-analytics-context",{errorInfo:b});Tn.warn(x.message)}}();const k=I.options.appId;if(!k)throw Yn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Yn.create("no-api-key");Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mi[k])throw Yn.create("already-exists",{id:k});if(!Tu){!function qh(I){let b=[];Array.isArray(window[I])?b=window[I]:window[I]=b}(Sc);const{wrappedGtag:W,gtagCore:Ee}=function js(I,b,x,k,H){let W=function(...Ee){window[k].push(arguments)};return window[H]&&"function"==typeof window[H]&&(W=window[H]),window[H]=function Ia(I,b,x,k){function W(){return(W=(0,O.Z)(function*(Ee,...ze){try{if("event"===Ee){const[We,dt]=ze;yield Sg(I,b,x,We,dt)}else if("config"===Ee){const[We,dt]=ze;yield Du(I,b,x,k,We,dt)}else if("consent"===Ee){const[We]=ze;I("consent","update",We)}else if("get"===Ee){const[We,dt,Ft]=ze;I("get",We,dt,Ft)}else if("set"===Ee){const[We]=ze;I("set",We)}else I(Ee,...ze)}catch(We){Tn.error(We)}})).apply(this,arguments)}return function H(Ee){return W.apply(this,arguments)}}(W,I,b,x),{gtagCore:W,wrappedGtag:window[H]}}(mi,ho,Tc,Sc,"gtag");Hs=W,xg=Ee,Tu=!0}return mi[k]=function ur(I,b,x,k,H,W,Ee){return gi.apply(this,arguments)}(I,ho,Tc,b,xg,Sc,x),new Qh(I)}function gd(){return md.apply(this,arguments)}function md(){return(md=(0,O.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const fo="@firebase/analytics";!function Xi(){(0,ae._registerComponent)(new fe.wA(Qi,(b,{options:x})=>Ta(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ae._registerComponent)(new fe.wA("analytics-internal",function I(b){try{const x=b.getProvider(Qi).getImmediate();return{logEvent:(k,H,W)=>function _r(I,b,x,k){I=(0,se.m9)(I),function Da(I,b,x,k,H){return Xt.apply(this,arguments)}(Hs,mi[I.app.options.appId],b,x,k).catch(H=>Tn.error(H))}(x,k,H,W)}}catch(x){throw Yn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ae.registerVersion)(fo,"0.10.0"),(0,ae.registerVersion)(fo,"0.10.0","esm2017")}();var tf=F(4408),Ho=F(7565);const _d=new class Go extends Ho.v{}(class Su extends tf.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,k=0){return null!=k&&k>0||null==k&&this.delay>0?super.requestAsyncId(b,x,k):(b.flush(this),0)}});var zo=F(4986),ft=F(8505),Ac=F(9468),po=F(5363);const Au=new l.GfV("7.5.0"),xu="__angularfire_symbol__analyticsIsSupportedValue",Fn="__angularfire_symbol__analyticsIsSupported",xa="__angularfire_symbol__remoteConfigIsSupportedValue",vs="__angularfire_symbol__remoteConfigIsSupported",qo="__angularfire_symbol__messagingIsSupportedValue",es="__angularfire_symbol__messagingIsSupported";function Mu(I,b,x){if(b){if(1===b.length)return b[0];const W=b.filter(Ee=>Ee.app===x);if(1===W.length)return W[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[Fn]||(globalThis[Fn]=gd().then(I=>globalThis[xu]=I).catch(()=>globalThis[xu]=!1)),globalThis[es]||(globalThis[es]=va().then(I=>globalThis[qo]=I).catch(()=>globalThis[qo]=!1)),globalThis[vs]||(globalThis[vs]=Hr().then(I=>globalThis[xa]=I).catch(()=>globalThis[xa]=!1));const rf=(I,b)=>{const x=b?[b]:(0,X.C6)(),k=[];return x.forEach(H=>{H.container.getProvider(I).instances.forEach(Ee=>{k.includes(Ee)||k.push(Ee)})}),k};function qs(){}class ei{constructor(b,x=_d){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,k){const H=this.zone;return this.delegate.schedule(function(Ee){H.runGuarded(()=>{b.apply(this,[Ee])})},x,k)}}class Fi{constructor(b){this.zone=b,this.task=null}call(b,x){const k=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qs,{},qs,qs)),x.pipe((0,ft.b)({next:k,complete:k,error:k})).subscribe(b).add(k)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vd=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ei(Zone.current)),this.insideAngular=x.run(()=>new ei(Zone.current,zo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(l.LFG(l.R0b))},I.\u0275prov=l.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ln(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function mo(I){return Ln(),function Nr(I){return function(x){return(x=x.lift(new Fi(I.ngZone))).pipe((0,Ac.R)(I.outsideAngular),(0,po.Q)(I.insideAngular))}}(Ln())(I)}},2090:(yt,Me,F)=>{F.d(Me,{$s:()=>zi,BH:()=>ge,G6:()=>Ti,L:()=>pe,LL:()=>K,Pz:()=>we,Sg:()=>He,UG:()=>ee,US:()=>fe,ZB:()=>Z,ZR:()=>ne,aH:()=>Pe,b$:()=>$t,eu:()=>Gt,hl:()=>xn,jU:()=>xt,m9:()=>jr,ne:()=>Kt,pd:()=>sr,r3:()=>zt,ru:()=>ut,tV:()=>G,uI:()=>Xe,vZ:()=>Mn,w1:()=>cs,xO:()=>xo,xb:()=>ir,z$:()=>Be,zI:()=>oe,zd:()=>ci});const ae=function(U){const L=[];let q=0;for(let ue=0;ue<U.length;ue++){let Q=U.charCodeAt(ue);Q<128?L[q++]=Q:Q<2048?(L[q++]=Q>>6|192,L[q++]=63&Q|128):55296==(64512&Q)&&ue+1<U.length&&56320==(64512&U.charCodeAt(ue+1))?(Q=65536+((1023&Q)<<10)+(1023&U.charCodeAt(++ue)),L[q++]=Q>>18|240,L[q++]=Q>>12&63|128,L[q++]=Q>>6&63|128,L[q++]=63&Q|128):(L[q++]=Q>>12|224,L[q++]=Q>>6&63|128,L[q++]=63&Q|128)}return L},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ue=[];for(let Q=0;Q<U.length;Q+=3){const Ge=U[Q],Tt=Q+1<U.length,Ot=Tt?U[Q+1]:0,on=Q+2<U.length,Ue=on?U[Q+2]:0;let gn=(15&Ot)<<2|Ue>>6,br=63&Ue;on||(br=64,Tt||(gn=64)),ue.push(q[Ge>>2],q[(3&Ge)<<4|Ot>>4],q[gn],q[br])}return ue.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(ae(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let q=0,ue=0;for(;q<U.length;){const Q=U[q++];if(Q<128)L[ue++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ge=U[q++];L[ue++]=String.fromCharCode((31&Q)<<6|63&Ge)}else if(Q>239&&Q<365){const on=((7&Q)<<18|(63&U[q++])<<12|(63&U[q++])<<6|63&U[q++])-65536;L[ue++]=String.fromCharCode(55296+(on>>10)),L[ue++]=String.fromCharCode(56320+(1023&on))}else{const Ge=U[q++],Tt=U[q++];L[ue++]=String.fromCharCode((15&Q)<<12|(63&Ge)<<6|63&Tt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const q=L?this.charToByteMapWebSafe_:this.charToByteMap_,ue=[];for(let Q=0;Q<U.length;){const Ge=q[U.charAt(Q++)],Ot=Q<U.length?q[U.charAt(Q)]:0;++Q;const Ue=Q<U.length?q[U.charAt(Q)]:64;++Q;const mt=Q<U.length?q[U.charAt(Q)]:64;if(++Q,null==Ge||null==Ot||null==Ue||null==mt)throw new de;ue.push(Ge<<2|Ot>>4),64!==Ue&&(ue.push(Ot<<4&240|Ue>>2),64!==mt&&ue.push(Ue<<6&192|mt))}return ue},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class de extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pe=function(U){return function(U){const L=ae(U);return fe.encodeByteArray(L,!0)}(U).replace(/\./g,"")},G=function(U){try{return fe.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Z(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const q in L)!L.hasOwnProperty(q)||!je(q)||(U[q]=Z(U[q],L[q]));return U}function je(U){return"__proto__"!==U}const ye=()=>{try{return function Ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=U&&G(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},Pe=()=>{var U;return null===(U=ye())||void 0===U?void 0:U.config},we=U=>{var L;return null===(L=ye())||void 0===L?void 0:L[`_${U}`]};class ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,q)=>{this.resolve=L,this.reject=q})}wrapCallback(L){return(q,ue)=>{q?this.reject(q):this.resolve(ue),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(q):L(q,ue))}}}function He(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ue=L||"demo-project",Q=U.iat||0,Ge=U.sub||U.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Tt=Object.assign({iss:`https://securetoken.google.com/${ue}`,aud:ue,iat:Q,exp:Q+3600,auth_time:Q,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},U);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Tt)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function ee(){var U;const L=null===(U=ye())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function xt(){return"object"==typeof self&&self.self===self}function ut(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function $t(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function cs(){const U=Be();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ti(){return!ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xn(){try{return"object"==typeof indexedDB}catch{return!1}}function Gt(){return new Promise((U,L)=>{try{let q=!0;const ue="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(ue);Q.onsuccess=()=>{Q.result.close(),q||self.indexedDB.deleteDatabase(ue),U(!0)},Q.onupgradeneeded=()=>{q=!1},Q.onerror=()=>{var Ge;L((null===(Ge=Q.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(q){L(q)}})}function oe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ne extends Error{constructor(L,q,ue){super(q),this.code=L,this.customData=ue,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(L,q,ue){this.service=L,this.serviceName=q,this.errors=ue}create(L,...q){const ue=q[0]||{},Q=`${this.service}/${L}`,Ge=this.errors[L],Tt=Ge?function xe(U,L){return U.replace(De,(q,ue)=>{const Q=L[ue];return null!=Q?String(Q):`<${ue}?>`})}(Ge,ue):"Error";return new ne(Q,`${this.serviceName}: ${Tt} (${Q}).`,ue)}}const De=/\{\$([^}]+)}/g;function zt(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function ir(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function Mn(U,L){if(U===L)return!0;const q=Object.keys(U),ue=Object.keys(L);for(const Q of q){if(!ue.includes(Q))return!1;const Ge=U[Q],Tt=L[Q];if(Si(Ge)&&Si(Tt)){if(!Mn(Ge,Tt))return!1}else if(Ge!==Tt)return!1}for(const Q of ue)if(!q.includes(Q))return!1;return!0}function Si(U){return null!==U&&"object"==typeof U}function xo(U){const L=[];for(const[q,ue]of Object.entries(U))Array.isArray(ue)?ue.forEach(Q=>{L.push(encodeURIComponent(q)+"="+encodeURIComponent(Q))}):L.push(encodeURIComponent(q)+"="+encodeURIComponent(ue));return L.length?"&"+L.join("&"):""}function ci(U){const L={};return U.replace(/^\?/,"").split("&").forEach(ue=>{if(ue){const[Q,Ge]=ue.split("=");L[decodeURIComponent(Q)]=decodeURIComponent(Ge)}}),L}function sr(U){const L=U.indexOf("?");if(!L)return"";const q=U.indexOf("#",L);return U.substring(L,q>0?q:void 0)}function Kt(U,L){const q=new it(U,L);return q.subscribe.bind(q)}class it{constructor(L,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{L(this)}).catch(ue=>{this.error(ue)})}next(L){this.forEachObserver(q=>{q.next(L)})}error(L){this.forEachObserver(q=>{q.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,q,ue){let Q;if(void 0===L&&void 0===q&&void 0===ue)throw new Error("Missing Observer.");Q=function pn(U,L){if("object"!=typeof U||null===U)return!1;for(const q of L)if(q in U&&"function"==typeof U[q])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:q,complete:ue},void 0===Q.next&&(Q.next=Gi),void 0===Q.error&&(Q.error=Gi),void 0===Q.complete&&(Q.complete=Gi);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Ge}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,L)}sendOne(L,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{q(this.observers[L])}catch(ue){typeof console<"u"&&console.error&&console.error(ue)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gi(){}function zi(U,L=1e3,q=2){const ue=L*Math.pow(q,U),Q=Math.round(.5*ue*(Math.random()-.5)*2);return Math.min(144e5,ue+Q)}function jr(U){return U&&U._delegate?U._delegate:U}},6982:(yt,Me,F)=>{var l=F(4650);let X=null;function O(){return X}const de=new l.OlP("DocumentToken");let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function pe(){return(0,l.LFG)($)}()},providedIn:"platform"}),n})();const G=new l.OlP("Location Initialized");let $=(()=>{class n extends ve{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Z()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Z()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function je(){return new $((0,l.LFG)(de))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ce(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function rt(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(ht)},providedIn:"root"}),n})();const ye=new l.OlP("appBaseHref");let ht=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+rt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const d=this.prepareExternalUrl(i+rt(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,u){const d=this.prepareExternalUrl(i+rt(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ve),l.LFG(ye,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vt=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let d=this.prepareExternalUrl(i+rt(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,u){let d=this.prepareExternalUrl(i+rt(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ve),l.LFG(ye,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ce(He(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rt(r))}normalize(t){return n.stripTrailingSlash(function ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,He(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=rt,n.joinWithSlash=Ae,n.stripTrailingSlash=Ce,n.\u0275fac=function(t){return new(t||n)(l.LFG(_e))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function we(){return new Pe((0,l.LFG)(_e))}()},providedIn:"root"}),n})();function He(n){return n.replace(/\/index.html$/,"")}function oa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}class ic{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _n=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ic(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Fs(m,i)}});for(let i=0,u=r.length;i<u;i++){const m=r.get(i).context;m.index=i,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Fs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Fs(n,e){n.context.$implicit=e.item}let Rn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Fl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ar("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ar("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Fl{constructor(){this.$implicit=null,this.ngIf=null}}function ar(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}class Ul{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class oc{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Bl=new oc,Oh=new Ul;let nu=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,l.QGY)(t))return Bl;if((0,l.F4k)(t))return Oh;throw function En(n,e){return new l.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.sBO,16))},n.\u0275pipe=l.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),lc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function au(n){return"server"===n}let hs=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new cu((0,l.LFG)(de),window)}),n})();class cu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Hr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=hi(this.window.history)||hi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function hi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ua{}class cd extends class ud extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){X||(X=n)}(new cd)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function vu(){return _u=_u||document.querySelector("base"),_u?_u.getAttribute("href"):null}();return null==t?null:function gc(n){va=va||document.createElement("a"),va.setAttribute("href",n);const e=va.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_u=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return oa(document.cookie,e)}}let va,_u=null;const wa=new l.OlP("TRANSITION_ID"),zh=[{provide:l.ip1,useFactory:function wu(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[wa,de,l.zs3],multi:!0}];let Hy=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Yi=new l.OlP("EventManagerPlugins");let Iu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const d=i[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Yi),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Fo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Qi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Bs=(()=>{class n extends Qi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(mc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(mc))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function mc(n){O().remove(n)}const yc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pi=/%COMP%/g;function co(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?co(n,i,t):(i=i.replace(pi,n),t.push(i))}return t}function Cu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Du=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Vo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new js(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case l.ifc.ShadowDom:return new ld(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=co(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Iu),l.LFG(Bs),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Vo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(yc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ia(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ia(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=yc[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=yc[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,i&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Cu(r)):this.eventManager.addEventListener(e,t,Cu(r))}}function Ia(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class js extends Vo{constructor(e,t,r,i){super(e),this.component=r;const u=co(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Lo(n){return"_ngcontent-%COMP%".replace(pi,n)}(i+"-"+r.id),this.hostAttr=function Ea(n){return"_nghost-%COMP%".replace(pi,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ld extends Vo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=co(i.id,i.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let dd=(()=>{class n extends Fo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const ki=["alt","control","meta","shift"],Zh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wc=(()=>{class n extends Fo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),ki.forEach(D=>{const A=r.indexOf(D);A>-1&&(r.splice(A,1),d+=D+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=i,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let i=Zh[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ki.forEach(d=>{d!==i&&(0,kn[d])(t)&&(u+=d+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const jo=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function _s(){cd.makeCurrent()},multi:!0},{provide:de,useFactory:function Bo(){return(0,l.RDi)(document),document},deps:[]}]),Da=new l.OlP(""),Xt=[{provide:l.rWj,useClass:class Eu{addToWindow(e){l.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let u=i.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};i.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],Ic=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function hd(){return new l.qLn},deps:[]},{provide:Yi,useClass:dd,multi:!0,deps:[de,l.R0b,l.Lbi]},{provide:Yi,useClass:wc,multi:!0,deps:[de]},{provide:Du,useClass:Du,deps:[Iu,Bs,l.AFp]},{provide:l.FYo,useExisting:Du},{provide:Qi,useExisting:Bs},{provide:Bs,useClass:Bs,deps:[de]},{provide:Iu,useClass:Iu,deps:[Yi,l.R0b]},{provide:ua,useClass:Hy,deps:[]},[]];let Cc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:wa,useExisting:l.AFp},zh]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Da,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...Ic,...Xt],imports:[lc,l.hGG]}),n})(),Yh=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Dc(){return new Yh((0,l.LFG)(de))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var ln=F(8996),Gs=F(7669);function lt(...n){const e=(0,Gs.yG)(n);return(0,ln.D)(n,e)}var _r=F(7579);class cr extends _r.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Aa=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Xi=F(9751);const{isArray:tf}=Array,{getPrototypeOf:Su,prototype:Ho,keys:Go}=Object;function _d(n){if(1===n.length){const e=n[0];if(tf(e))return{args:e,keys:null};if(function Gn(n){return n&&"object"==typeof n&&Su(n)===Ho}(e)){const t=Go(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var zo=F(4671),ft=F(4004);const{isArray:Ac}=Array;function Au(n){return(0,ft.U)(e=>function po(n,e){return Ac(e)?n(...e):n(e)}(n,e))}function xu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Fn=F(5403),xa=F(9672);function vs(...n){const e=(0,Gs.yG)(n),t=(0,Gs.jO)(n),{args:r,keys:i}=_d(n);if(0===r.length)return(0,ln.D)([],e);const u=new Xi.y(function qo(n,e,t=zo.y){return r=>{es(e,()=>{const{length:i}=n,u=new Array(i);let d=i,m=i;for(let w=0;w<i;w++)es(e,()=>{const D=(0,ln.D)(n[w],e);let A=!1;D.subscribe((0,Fn.x)(r,N=>{u[w]=N,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,i?d=>xu(i,d):zo.y));return t?u.pipe(Au(t)):u}function es(n,e,t){n?(0,xa.f)(t,n,e):e()}var ws=F(8189);function zs(...n){return function nf(){return(0,ws.J)(1)}()((0,ln.D)(n,(0,Gs.yG)(n)))}var go=F(8421);function Mu(n){return new Xi.y(e=>{(0,go.Xf)(n()).subscribe(e)})}var rf=F(9635),qs=F(576);function ei(n,e){const t=(0,qs.m)(n)?n:()=>n,r=i=>i.error(t());return new Xi.y(e?i=>e.schedule(r,0,i):r)}var Fi=F(515),vd=F(727),Ln=F(4482);function Nu(){return(0,Ln.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Fn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Zs extends Xi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ln.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vd.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Fn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vd.w0.EMPTY)}return e}refCount(){return Nu()(this)}}function lr(n,e){return(0,Ln.e)((t,r)=>{let i=null,u=0,d=!1;const m=()=>d&&!i&&r.complete();t.subscribe((0,Fn.x)(r,w=>{i?.unsubscribe();let D=0;const A=u++;(0,go.Xf)(n(w,A)).subscribe(i=(0,Fn.x)(r,N=>r.next(e?e(w,N,A,D++):N),()=>{i=null,m()}))},()=>{d=!0,m()}))})}function Ma(n){return n<=0?()=>Fi.E:(0,Ln.e)((e,t)=>{let r=0;e.subscribe((0,Fn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function mo(...n){const e=(0,Gs.yG)(n);return(0,Ln.e)((t,r)=>{(e?zs(n,t,e):zs(n,t)).subscribe(r)})}function Nr(n,e){return(0,Ln.e)((t,r)=>{let i=0;t.subscribe((0,Fn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var qn=F(5577);function Na(n){return(0,Ln.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function I(n=b){return(0,Ln.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function b(){return new Aa}function x(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Nr((i,u)=>n(i,u,r)):zo.y,Ma(1),t?Na(e):I(()=>new Aa))}function k(n,e){return(0,qs.m)(e)?(0,qn.z)(n,e,1):(0,qn.z)(n,1)}var H=F(8505);function W(n){return(0,Ln.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Fn.x)(t,void 0,void 0,d=>{u=(0,go.Xf)(n(d,W(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Ee(n,e,t,r,i){return(u,d)=>{let m=t,w=e,D=0;u.subscribe((0,Fn.x)(d,A=>{const N=D++;w=m?n(w,A,N):(m=!0,A),r&&d.next(w)},i&&(()=>{m&&d.next(w),d.complete()})))}}function ze(n,e){return(0,Ln.e)(Ee(n,e,arguments.length>=2,!0))}function We(n){return n<=0?()=>Fi.E:(0,Ln.e)((e,t)=>{let r=[];e.subscribe((0,Fn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function dt(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Nr((i,u)=>n(i,u,r)):zo.y,We(1),t?Na(e):I(()=>new Aa))}function ti(n){return(0,Ln.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Et="primary",Ws=Symbol("RouteTitle");class wd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ni(n){return new wd(n)}function _i(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))i[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function vi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!sf(n[i],e[i]))return!1;return!0}function sf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function af(n){return Array.prototype.concat.apply([],n)}function Es(n){return n.length>0?n[n.length-1]:null}function Rr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ks(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,ln.D)(Promise.resolve(n)):lt(n)}const qy={exact:function Pg(n,e,t){if(!Ra(n.segments,e.segments)||!xc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Pg(n.children[r],e.children[r],t))return!1;return!0},subset:zr},Ng={exact:function cf(n,e){return vi(n,e)},subset:function Zy(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sf(n[t],e[t]))},ignored:()=>!0};function Rg(n,e,t){return qy[t.paths](n.root,e.root,t.matrixParams)&&Ng[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function zr(n,e,t){return Id(n,e,e.segments,t)}function Id(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ra(i,t)||e.hasChildren()||!xc(i,t,r))}if(n.segments.length===t.length){if(!Ra(n.segments,t)||!xc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!zr(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ra(n.segments,i)&&xc(n.segments,i,r)&&n.children[Et])&&Id(n.children[Et],e,u,r)}}function xc(n,e,t){return e.every((r,i)=>Ng[t](n[i].parameters,r.parameters))}class Is{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ni(this.queryParams)),this._queryParamMap}toString(){return kg.serialize(this)}}class Ct{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Rr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return df(this)}}class yo{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ni(this.parameters)),this._parameterMap}toString(){return Fg(this)}}function Ra(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let lf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new Mc},providedIn:"root"}),n})();class Mc{parse(e){const t=new Rc(e);return new Is(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Zo(e.root,!0)}`,r=function Wy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Pa(t)}=${Pa(i)}`).join("&"):`${Pa(t)}=${Pa(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Dd(n){return encodeURI(n)}(e.fragment)}`:""}`}}const kg=new Mc;function df(n){return n.segments.map(e=>Fg(e)).join("/")}function Zo(n,e){if(!n.hasChildren())return df(n);if(e){const t=n.children[Et]?Zo(n.children[Et],!1):"",r=[];return Rr(n.children,(i,u)=>{u!==Et&&r.push(`${u}:${Zo(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Og(n,e){let t=[];return Rr(n.children,(r,i)=>{i===Et&&(t=t.concat(e(r,i)))}),Rr(n.children,(r,i)=>{i!==Et&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Et?[Zo(n.children[Et],!1)]:[`${i}:${Zo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Et]?`${df(n)}/${t[0]}`:`${df(n)}/(${t.join("//")})`}}function hf(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pa(n){return hf(n).replace(/%3B/gi,";")}function Ru(n){return hf(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bd(n){return decodeURIComponent(n)}function ff(n){return bd(n.replace(/\+/g,"%20"))}function Fg(n){return`${Ru(n.path)}${function Nc(n){return Object.keys(n).map(e=>`;${Ru(e)}=${Ru(n[e])}`).join("")}(n.parameters)}`}const Lg=/^[^\/()?;=#]+/;function Pu(n){const e=n.match(Lg);return e?e[0]:""}const Vg=/^[^=?&#]+/,ww=/^[^&#]+/;class Rc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ct([],{}):new Ct([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Et]=new Ct(e,t)),r}parseSegment(){const e=Pu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(e),new yo(bd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Pu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Pu(this.remaining);i&&(r=i,this.capture(r))}e[bd(t)]=bd(r)}parseQueryParam(e){const t=function Wo(n){const e=n.match(Vg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Ou(n){const e=n.match(ww);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=ff(t),u=ff(r);if(e.hasOwnProperty(i)){let d=e[i];Array.isArray(d)||(d=[d],e[i]=d),d.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Pu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new l.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Et);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Et]:new Ct([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new l.vHH(4011,!1)}}function Td(n){return n.segments.length>0?new Ct([],{[Et]:n}):n}function ku(n){const e={};for(const r of Object.keys(n.children)){const u=ku(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function pf(n){if(1===n.numberOfChildren&&n.children[Et]){const e=n.children[Et];return new Ct(n.segments.concat(e.segments),e.children)}return n}(new Ct(n.segments,e))}function Oa(n){return n instanceof Is}function Yy(n,e,t,r,i){if(0===t.length)return Fa(e.root,e.root,e.root,r,i);const u=function Ad(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new mf(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Rr(u.outlets,(w,D)=>{m[D]="string"==typeof w?w.split("/"):w}),[...i,{outlets:m}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&i.push(m))}),i):[...i,u]},[]);return new mf(t,e,r)}(t);return u.toRoot()?Fa(e.root,e.root,new Ct([],{}),r,i):function d(w){const D=function _o(n,e,t,r){if(n.isAbsolute)return new La(e.root,!0,0);if(-1===r)return new La(t,t===e.root,0);return function Oc(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new l.vHH(4005,!1);i=r.segments.length}return new La(r,!1,i-u)}(t,r+(Fu(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=D.processChildren?Va(D.segmentGroup,D.index,u.commands):yf(D.segmentGroup,D.index,u.commands);return Fa(e.root,D.segmentGroup,A,r,i)}(n.snapshot?._lastPathIndex)}function Fu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ka(n){return"object"==typeof n&&null!=n&&n.outlets}function Fa(n,e,t,r,i){let d,u={};r&&Rr(r,(w,D)=>{u[D]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),d=n===e?t:Sd(n,e,t);const m=Td(ku(d));return new Is(m,u,i)}function Sd(n,e,t){const r={};return Rr(n.children,(i,u)=>{r[u]=i===e?t:Sd(i,e,t)}),new Ct(n.segments,r)}class mf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Fu(r[0]))throw new l.vHH(4003,!1);const i=r.find(ka);if(i&&i!==Es(r))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class La{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yf(n,e,t){if(n||(n=new Ct([],{})),0===n.segments.length&&n.hasChildren())return Va(n,e,t);const r=function xd(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const d=n.segments[i],m=t[r];if(ka(m))break;const w=`${m}`,D=r<t.length-1?t[r+1]:null;if(i>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!vf(w,D,d))return u;r+=2}else{if(!vf(w,{},d))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ct(n.segments.slice(0,r.pathIndex),{});return u.children[Et]=new Ct(n.segments.slice(r.pathIndex),n.children),Va(u,0,i)}return r.match&&0===i.length?new Ct(n.segments,{}):r.match&&!n.hasChildren()?_f(n,e,t):r.match?Va(n,0,i):_f(n,e,t)}function Va(n,e,t){if(0===t.length)return new Ct(n.segments,{});{const r=function Bg(n){return ka(n[0])?n[0].outlets:{[Et]:n}}(t),i={};return Rr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[d]=yf(n.children[d],e,u))}),Rr(n.children,(u,d)=>{void 0===r[d]&&(i[d]=u)}),new Ct(n.segments,i)}}function _f(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(ka(u)){const w=jg(u.outlets);return new Ct(r,w)}if(0===i&&Fu(t[0])){r.push(new yo(n.segments[e].path,Md(t[0]))),i++;continue}const d=ka(u)?u.outlets[Et]:`${u}`,m=i<t.length-1?t[i+1]:null;d&&m&&Fu(m)?(r.push(new yo(d,Md(m))),i+=2):(r.push(new yo(d,{})),i++)}return new Ct(r,{})}function jg(n){const e={};return Rr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=_f(new Ct([],{}),0,t))}),e}function Md(n){const e={};return Rr(n,(t,r)=>e[r]=`${t}`),e}function vf(n,e,t){return n==t.path&&vi(e,t.parameters)}class Cs{constructor(e,t){this.id=e,this.url=t}}class Nd extends Cs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ys extends Cs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ds extends Cs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wf extends Cs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rd extends Cs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ef extends Cs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class If extends Cs{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class kc extends Cs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qy extends Cs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cf{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Df{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bf{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tf{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sf{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lu{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pd{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Vu{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Od(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Od(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$g(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $g(e,this._root).map(t=>t.value)}}function Od(n,e){if(n===e.value)return e;for(const t of e.children){const r=Od(n,t);if(r)return r}return null}function $g(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$g(n,t);if(r.length)return r.unshift(e),r}return[]}class bs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Qs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Hg extends Vu{constructor(e,t){super(e),this.snapshot=t,Vd(this,e)}toString(){return this.snapshot.toString()}}function kd(n,e){const t=function Fd(n,e){const d=new Fc([],{},{},"",{},Et,e,null,n.root,-1,{});return new Af("",new bs(d,[]))}(n,e),r=new cr([new yo("",{})]),i=new cr({}),u=new cr({}),d=new cr({}),m=new cr(""),w=new Pr(r,i,d,m,u,Et,e,t.root);return w.snapshot=t.root,new Hg(new bs(w,[]),t)}class Pr{constructor(e,t,r,i,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,ft.U)(D=>D[Ws]))??lt(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(e=>ni(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(e=>ni(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ld(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Gg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Fc{constructor(e,t,r,i,u,d,m,w,D,A,N,V){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[Ws],this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=A,this._correctedLastPathIndex=V??A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ni(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ni(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Af extends Vu{constructor(e,t){super(t),this.url=e,Vd(this,t)}toString(){return ri(this._root)}}function Vd(n,e){e.value._routerState=n,e.children.forEach(t=>Vd(n,t))}function ri(n){const e=n.children.length>0?` { ${n.children.map(ri).join(", ")} } `:"";return`${n.value}${e}`}function Lc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,vi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),vi(e.params,t.params)||n.params.next(t.params),function ts(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!vi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),vi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Vc(n,e){const t=vi(n.params,e.params)&&function Cd(n,e){return Ra(n,e)&&n.every((t,r)=>vi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Vc(n.parent,e.parent))}function dr(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function vo(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dr(n,r,i);return dr(n,r)})}(n,e,t);return new bs(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>dr(n,m)),d}}const r=function zg(n){return new Pr(new cr(n.url),new cr(n.params),new cr(n.queryParams),new cr(n.fragment),new cr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>dr(n,u));return new bs(r,i)}}const xf="ngNavigationCancelingError";function Xy(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Oa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Mf(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Mf(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[xf]=!0,r.cancellationCode=e,t&&(r.url=t),r}function e_(n){return t_(n)&&Oa(n.url)}function t_(n){return n&&n[xf]}class qg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Uc,this.attachRef=null}}let Uc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new qg,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const y=!1;let f=(()=>{class n{constructor(t,r,i,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=i||Et,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,y);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,y);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,y);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new l.vHH(4013,y);this._activatedRoute=t;const i=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new p(t,m,i.injector);if(r&&function v(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(d);this.activated=i.createComponent(D,i.length,w)}else this.activated=i.createComponent(d,{index:i.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Uc),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class p{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Pr?this.route:e===Uc?this.childContexts:this.parent.get(e,t)}}let T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[f],encapsulation:2}),n})();function M(n,e){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Bc(n){const e=n.children&&n.children.map(Bc),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Et&&(t.component=T),t}function ns(n){return n.outlet||Et}function jc(n,e){const t=n.filter(r=>ns(r)===e);return t.push(...n.filter(r=>ns(r)!==e)),t}function Uu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Nf{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Lc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Qs(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,i[d],r),delete i[d]}),Rr(i,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Qs(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],i);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Qs(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Qs(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Lu(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Tf(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Lc(i),i===u)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const m=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Lc(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=Uu(i.snapshot),w=m?.get(l._Vd)??null;d.attachRef=null,d.route=i,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(i,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Rf{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Bu{constructor(e,t){this.component=e,this.route=t}}function ju(n,e,t){const r=n._root;return Ua(r,e?e._root:null,t,[r.value])}function Ko(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,l.Z0I)(n)?e.get(n):n:r}function Ua(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Qs(e);return n.children.forEach(d=>{(function hr(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function ED(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ra(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ra(n.url,e.url)||!vi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vc(n,e)||!vi(n.queryParams,e.queryParams);default:return!Vc(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?i.canActivateChecks.push(new Rf(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Ua(n,e,u.component?m?m.children:null:t,r,i),w&&m&&m.outlet&&m.outlet.isActivated&&i.canDeactivateChecks.push(new Bu(m.outlet.component,d))}else d&&Pf(e,m,i),i.canActivateChecks.push(new Rf(r)),Ua(n,null,u.component?m?m.children:null:t,r,i)})(d,u[d.value.outlet],t,r.concat([d.value]),i),delete u[d.value.outlet]}),Rr(u,(d,m)=>Pf(d,t.getContext(m),i)),i}function Pf(n,e,t){const r=Qs(n),i=n.value;Rr(r,(u,d)=>{Pf(u,i.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Bu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function $c(n){return"function"==typeof n}function Hc(n){return n instanceof Aa||"EmptyError"===n?.name}const Ud=Symbol("INITIAL_VALUE");function Gc(){return lr(n=>vs(n.map(e=>e.pipe(Ma(1),mo(Ud)))).pipe((0,ft.U)(e=>{for(const t of e)if(!0!==t){if(t===Ud)return Ud;if(!1===t||t instanceof Is)return t}return!0}),Nr(e=>e!==Ud),Ma(1)))}function i_(n){return(0,rf.z)((0,H.b)(e=>{if(Oa(e))throw Xy(0,e)}),(0,ft.U)(e=>!0===e))}const Ba={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Aw(n,e,t,r,i){const u=Of(n,e,t);return u.matched?function Sw(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?lt(i.map(d=>{const m=Ko(d,n);return Ks(function TD(n){return n&&$c(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(Gc(),i_()):lt(!0)}(r=M(e,r),e,t).pipe((0,ft.U)(d=>!0===d?u:{...Ba})):lt(u)}function Of(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ba}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||_i)(t,n,e);if(!i)return{...Ba};const u={};Rr(i.posParams,(m,w)=>{u[w]=m.path});const d=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:d,positionalParamSegments:i.posParams??{}}}function zc(n,e,t,r,i="corrected"){if(t.length>0&&function Kg(n,e,t){return t.some(r=>kf(n,e,r)&&ns(r)!==Et)}(n,t,r)){const d=new Ct(e,function s_(n,e,t,r){const i={};i[Et]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ns(u)!==Et){const d=new Ct([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,i[ns(u)]=d}return i}(n,e,r,new Ct(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function qc(n,e,t){return t.some(r=>kf(n,e,r))}(n,t,r)){const d=new Ct(n.segments,function xD(n,e,t,r,i,u){const d={};for(const m of r)if(kf(n,t,m)&&!i[ns(m)]){const w=new Ct([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[ns(m)]=w}return{...i,...d}}(n,e,t,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Ct(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function kf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Yg(n,e,t,r){return!!(ns(n)===r||r!==Et&&kf(e,t,n))&&("**"===n.path||Of(e,n,t).matched)}function xw(n,e,t){return 0===e.length&&!n.children[t]}const Qg=!1;class Ff{constructor(e){this.segmentGroup=e||null}}class Zc{constructor(e){this.urlTree=e}}function Lf(n){return ei(new Ff(n))}function Mw(n){return ei(new Zc(n))}class RD{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=zc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ct(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Et).pipe((0,ft.U)(u=>this.createUrlTree(ku(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(W(u=>{if(u instanceof Zc)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Ff?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Et).pipe((0,ft.U)(i=>this.createUrlTree(ku(i),e.queryParams,e.fragment))).pipe(W(i=>{throw i instanceof Ff?this.noMatchError(i):i}))}noMatchError(e){return new l.vHH(4002,Qg)}createUrlTree(e,t,r){const i=Td(e);return new Is(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ft.U)(u=>new Ct([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,ln.D)(i).pipe(k(u=>{const d=r.children[u],m=jc(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,ft.U)(w=>({segment:w,outlet:u})))}),ze((u,d)=>(u[d.outlet]=d.segment,u),{}),dt())}expandSegment(e,t,r,i,u,d){return(0,ln.D)(r).pipe(k(m=>this.expandSegmentAgainstRoute(e,t,r,m,i,u,d).pipe(W(D=>{if(D instanceof Ff)return lt(null);throw D}))),x(m=>!!m),W((m,w)=>{if(Hc(m))return xw(t,i,u)?lt(new Ct([],{})):Lf(t);throw m}))}expandSegmentAgainstRoute(e,t,r,i,u,d,m){return Yg(i,t,u,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d):Lf(t):Lf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Mw(u):this.lineralizeSegments(r,u).pipe((0,qn.z)(d=>{const m=new Ct(d,{});return this.expandSegment(e,m,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d){const{matched:m,consumedSegments:w,remainingSegments:D,positionalParamSegments:A}=Of(t,i,u);if(!m)return Lf(t);const N=this.applyRedirectCommands(w,i.redirectTo,A);return i.redirectTo.startsWith("/")?Mw(N):this.lineralizeSegments(i,N).pipe((0,qn.z)(V=>this.expandSegment(e,t,r,V.concat(D),d,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=M(r,e),r.loadChildren?(r._loadedRoutes?lt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ft.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Ct(i,{})))):lt(new Ct(i,{}))):Aw(t,r,i,e).pipe(lr(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,i).pipe((0,qn.z)(A=>{const N=A.injector??e,V=A.routes,{segmentGroup:z,slicedSegments:le}=zc(t,m,w,V),Oe=new Ct(z.segments,z.children);if(0===le.length&&Oe.hasChildren())return this.expandChildren(N,V,Oe).pipe((0,ft.U)(At=>new Ct(m,At)));if(0===V.length&&0===le.length)return lt(new Ct(m,{}));const ke=ns(r)===u;return this.expandSegment(N,Oe,V,le,ke?Et:u,!0).pipe((0,ft.U)(bt=>new Ct(m.concat(bt.segments),bt.children)))})):Lf(t)))}getChildConfig(e,t,r){return t.children?lt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?lt({routes:t._loadedRoutes,injector:t._loadedInjector}):function r_(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?lt(!0):lt(i.map(d=>{const m=Ko(d,n);return Ks(function ID(n){return n&&$c(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(Gc(),i_())}(e,t,r).pipe((0,qn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,H.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function ND(n){return ei(Mf(Qg,3))}())):lt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return lt(r);if(i.numberOfChildren>1||!i.children[Et])return ei(new l.vHH(4e3,Qg));i=i.children[Et]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Is(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Rr(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const m=i.substring(1);r[u]=t[m]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let d={};return Rr(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,i)}),new Ct(u,d)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new l.vHH(4001,Qg);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Rw{}class Vf{constructor(e,t,r,i,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=zc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Et).pipe((0,ft.U)(t=>{if(null===t)return null;const r=new Fc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Et,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new bs(r,t),u=new Af(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Ld(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,ln.D)(Object.keys(r.children)).pipe(k(i=>{const u=r.children[i],d=jc(t,i);return this.processSegmentGroup(e,d,u,i)}),ze((i,u)=>i&&u?(i.push(...u),i):null),function Ft(n,e=!1){return(0,Ln.e)((t,r)=>{let i=0;t.subscribe((0,Fn.x)(r,u=>{const d=n(u,i++);(d||e)&&r.next(u),!d&&r.complete()}))})}(i=>null!==i),Na(null),dt(),(0,ft.U)(i=>{if(null===i)return null;const u=Pw(i);return function OD(n){n.sort((e,t)=>e.value.outlet===Et?-1:t.value.outlet===Et?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,ln.D)(t).pipe(k(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,i,u)),x(d=>!!d),W(d=>{if(Hc(d))return xw(r,i,u)?lt([]):lt(null);throw d}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!Yg(t,r,i,u))return lt(null);let d;if("**"===t.path){const m=i.length>0?Es(i).parameters:{},w=Ow(r)+i.length;d=lt({snapshot:new Fc(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Fw(t),ns(t),t.component??t._loadedComponent??null,t,a_(r),w,u_(t),w),consumedSegments:[],remainingSegments:[]})}else d=Aw(r,t,i,e).pipe((0,ft.U)(({matched:m,consumedSegments:w,remainingSegments:D,parameters:A})=>{if(!m)return null;const N=Ow(r)+w.length;return{snapshot:new Fc(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Fw(t),ns(t),t.component??t._loadedComponent??null,t,a_(r),N,u_(t),N),consumedSegments:w,remainingSegments:D}}));return d.pipe(lr(m=>{if(null===m)return lt(null);const{snapshot:w,consumedSegments:D,remainingSegments:A}=m;e=t._injector??e;const N=t._loadedInjector??e,V=function Bd(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:z,slicedSegments:le}=zc(r,D,A,V.filter(ke=>void 0===ke.redirectTo),this.relativeLinkResolution);if(0===le.length&&z.hasChildren())return this.processChildren(N,V,z).pipe((0,ft.U)(ke=>null===ke?null:[new bs(w,ke)]));if(0===V.length&&0===le.length)return lt([new bs(w,[])]);const Oe=ns(t)===u;return this.processSegment(N,V,z,le,Oe?Et:u).pipe((0,ft.U)(ke=>null===ke?null:[new bs(w,ke)]))}))}}function Uf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Pw(n){const e=[],t=new Set;for(const r of n){if(!Uf(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Pw(r.children);e.push(new bs(r.value,i))}return e.filter(r=>!t.has(r))}function a_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ow(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Fw(n){return n.data||{}}function u_(n){return n.resolve||{}}function Vw(n){return"string"==typeof n.title||null===n.title}function h_(n){return lr(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,ft.U)(()=>e)):lt(e)})}let Uw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Et);return r}getResolvedTitleForRoute(t){return t.data[Ws]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(Bw)},providedIn:"root"}),n})(),Bw=(()=>{class n extends Uw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Yh))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class FD{}class jd extends class LD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Xg=new l.OlP("",{providedIn:"root",factory:()=>({})}),$w=new l.OlP("ROUTES");let Hw=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return lt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ks(t.loadComponent()).pipe((0,H.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),ti(()=>{this.componentLoaders.delete(t)})),i=new Zs(r,()=>new _r.x).pipe(Nu());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return lt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ft.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,D,A=!1;Array.isArray(m)?D=m:(w=m.create(t).injector,D=af(w.get($w,[],l.XFs.Self|l.XFs.Optional)));return{routes:D.map(Bc),injector:w}}),ti(()=>{this.childrenLoaders.delete(r)})),d=new Zs(u,()=>new _r.x).pipe(Nu());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Ks(t()).pipe((0,qn.z)(r=>r instanceof l.YKP||Array.isArray(r)?lt(r):(0,ln.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Gw{}class Hx{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Gx(n){throw n}function zw(n,e,t){return e.parse("/")}const VD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Zw(){const n=(0,l.f3M)(lf),e=(0,l.f3M)(Uc),t=(0,l.f3M)(Pe),r=(0,l.f3M)(l.zs3),i=(0,l.f3M)(l.Sil),u=(0,l.f3M)($w,{optional:!0})??[],d=(0,l.f3M)(Xg,{optional:!0})??{},m=(0,l.f3M)(Bw),w=(0,l.f3M)(Uw,{optional:!0}),D=(0,l.f3M)(Gw,{optional:!0}),A=(0,l.f3M)(FD,{optional:!0}),N=new en(null,n,e,t,r,i,af(u));return D&&(N.urlHandlingStrategy=D),A&&(N.routeReuseStrategy=A),N.titleStrategy=w??m,function UD(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,N),N}let en=(()=>{class n{constructor(t,r,i,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _r.x,this.errorHandler=Gx,this.malformedUriErrorHandler=zw,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>lt(void 0),this.urlHandlingStrategy=new Hx,this.routeReuseStrategy=new jd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(Hw),this.configLoader.onLoadEndListener=V=>this.triggerEvent(new Df(V)),this.configLoader.onLoadStartListener=V=>this.triggerEvent(new Cf(V)),this.ngModule=d.get(l.h0i),this.console=d.get(l.c2e);const N=d.get(l.R0b);this.isNgZoneEnabled=N instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function uf(){return new Is(new Ct([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=kd(this.currentUrlTree,this.rootComponentType),this.transitions=new cr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Nr(i=>0!==i.id),(0,ft.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),lr(i=>{let u=!1,d=!1;return lt(i).pipe((0,H.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),lr(m=>{const w=this.browserUrlTree.toString(),D=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return f_(m.source)&&(this.browserUrlTree=m.extractedUrl),lt(m).pipe(lr(N=>{const V=this.transitions.getValue();return r.next(new Nd(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),V!==this.transitions.getValue()?Fi.E:Promise.resolve(N)}),function Nw(n,e,t,r){return lr(i=>function o_(n,e,t,r,i){return new RD(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ft.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,H.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},i.urlAfterRedirects=N.urlAfterRedirects}),function Lw(n,e,t,r,i,u){return(0,qn.z)(d=>function PD(n,e,t,r,i,u,d="emptyOnly",m="legacy"){return new Vf(n,e,t,r,i,d,m,u).recognize().pipe(lr(w=>null===w?function Bx(n){return new Xi.y(e=>e.error(n))}(new Rw):lt(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,i,u).pipe((0,ft.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,H.b)(N=>{if(i.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(z,N)}this.browserUrlTree=N.urlAfterRedirects}const V=new Rd(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(V)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:z,source:le,restoredState:Oe,extras:ke}=m,Je=new Nd(V,this.serializeUrl(z),le,Oe);r.next(Je);const bt=kd(z,this.rootComponentType).snapshot;return lt(i={...m,targetSnapshot:bt,urlAfterRedirects:z,extras:{...ke,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Fi.E}),(0,H.b)(m=>{const w=new Ef(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,ft.U)(m=>i={...m,guards:ju(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function Cw(n,e){return(0,qn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?lt({...t,guardsResult:!0}):function Dw(n,e,t,r){return(0,ln.D)(n).pipe((0,qn.z)(i=>function AD(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?lt(u.map(m=>{const w=Uu(e)??i,D=Ko(m,w);return Ks(function bD(n){return n&&$c(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):w.runInContext(()=>D(n,e,t,r))).pipe(x())})).pipe(Gc()):lt(!0)}(i.component,i.route,t,e,r)),x(i=>!0!==i,!0))}(d,r,i,n).pipe((0,qn.z)(m=>m&&function Iw(n){return"boolean"==typeof n}(m)?function SD(n,e,t,r){return(0,ln.D)(e).pipe(k(i=>zs(function Tw(n,e){return null!==n&&e&&e(new bf(n)),lt(!0)}(i.route.parent,r),function bw(n,e){return null!==n&&e&&e(new Sf(n)),lt(!0)}(i.route,r),function Ux(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Wg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Mu(()=>lt(d.guards.map(w=>{const D=Uu(d.node)??t,A=Ko(w,D);return Ks(function DD(n){return n&&$c(n.canActivateChild)}(A)?A.canActivateChild(r,n):D.runInContext(()=>A(r,n))).pipe(x())})).pipe(Gc())));return lt(u).pipe(Gc())}(n,i.path,t),function n_(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return lt(!0);const i=r.map(u=>Mu(()=>{const d=Uu(e)??t,m=Ko(u,d);return Ks(function CD(n){return n&&$c(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(x())}));return lt(i).pipe(Gc())}(n,i.route,t))),x(i=>!0!==i,!0))}(r,u,n,e):lt(m)),(0,ft.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,H.b)(m=>{if(i.guardsResult=m.guardsResult,Oa(m.guardsResult))throw Xy(0,m.guardsResult);const w=new If(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Nr(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),h_(m=>{if(m.guards.canActivateChecks.length)return lt(m).pipe((0,H.b)(w=>{const D=new kc(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}),lr(w=>{let D=!1;return lt(w).pipe(function c_(n,e){return(0,qn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return lt(t);let u=0;return(0,ln.D)(i).pipe(k(d=>function l_(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!Vw(i)&&(u[Ws]=i.title),function kD(n,e,t,r){const i=function d_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return lt({});const u={};return(0,ln.D)(i).pipe((0,qn.z)(d=>function Bf(n,e,t,r){const i=Uu(e)??r,u=Ko(n,i);return Ks(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(x(),(0,H.b)(m=>{u[d]=m}))),We(1),function Pt(n){return(0,ft.U)(()=>n)}(u),W(d=>Hc(d)?Fi.E:ei(d)))}(u,n,e,r).pipe((0,ft.U)(d=>(n._resolvedData=d,n.data=Ld(n,t).resolve,i&&Vw(i)&&(n.data[Ws]=i.title),null)))}(d.route,r,n,e)),(0,H.b)(()=>u++),We(1),(0,qn.z)(d=>u===i.length?lt(t):Fi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,H.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,H.b)(w=>{const D=new Qy(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}))}),h_(m=>{const w=D=>{const A=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(D.routeConfig).pipe((0,H.b)(N=>{D.component=N}),(0,ft.U)(()=>{})));for(const N of D.children)A.push(...w(N));return A};return vs(w(m.targetSnapshot.root)).pipe(Na(),Ma(1))}),h_(()=>this.afterPreactivation()),(0,ft.U)(m=>{const w=function Jy(n,e,t){const r=dr(n,e._root,t?t._root:void 0);return new Hg(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return i={...m,targetRouterState:w}}),(0,H.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,ft.U)(r=>(new Nf(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,H.b)({next(){u=!0},complete(){u=!0}}),ti(()=>{u||d||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),W(m=>{if(d=!0,t_(m)){e_(m)||(this.navigated=!0,this.restoreHistory(i,!0));const w=new Ds(i.id,this.serializeUrl(i.extractedUrl),m.message,m.cancellationCode);if(r.next(w),e_(m)){const D=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||f_(i.source)};this.scheduleNavigation(D,"imperative",null,A,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const w=new wf(i.id,this.serializeUrl(i.extractedUrl),m,i.targetSnapshot??void 0);r.next(w);try{i.resolve(this.errorHandler(m))}catch(D){i.reject(D)}}return Fi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(i.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Bc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,D=i||this.routerState.root,A=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),Yy(D,this.currentUrlTree,t,N,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Oa(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function BD(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new l.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...VD}:!1===r?{...qw}:r,Oa(t))return Rg(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Rg(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ys(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,D;d?(m=d.resolve,w=d.reject,D=d.promise):D=new Promise((V,z)=>{m=V,w=z});const A=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),N=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:A,targetPageId:N,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(V=>Promise.reject(V))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new Ds(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return Zw()},providedIn:"root"}),n})();function f_(n){return"imperative"!==n}let $d=(()=>{class n{constructor(t,r,i,u,d){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new _r.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,l.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,l.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,l.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(en),l.Y36(Pr),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&l.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})(),em=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new _r.x,this.subscription=t.events.subscribe(u=>{u instanceof Ys&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,l.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,l.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,l.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,d){return!!(0!==t||r||i||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(en),l.Y36(Pr),l.Y36(_e))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&l.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&l.uIk("target",r.target)("href",r.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})();class p_{}let HD=(()=>{class n{constructor(t,r,i,u,d){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Nr(t=>t instanceof Ys),k(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,l.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,ln.D)(i).pipe((0,ws.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):lt(null);const u=i.pipe((0,qn.z)(d=>null===d?lt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,ln.D)([u,d]).pipe((0,ws.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(en),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(p_),l.LFG(Hw))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vt=new l.OlP("");let g_=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Nd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ys&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Pd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Pd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Hd(n,e){return{\u0275kind:n,\u0275providers:e}}function tm(n){return[{provide:$w,multi:!0,useValue:n}]}function m_(){const n=(0,l.f3M)(l.zs3);return e=>{const t=n.get(l.z2F);if(e!==t.components[0])return;const r=n.get(en),i=n.get(Kw);1===n.get(y_)&&r.initialNavigation(),n.get($u,null,l.XFs.Optional)?.setUpPreloading(),n.get(Vt,null,l.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const Kw=new l.OlP("",{factory:()=>new _r.x}),y_=new l.OlP("",{providedIn:"root",factory:()=>1});const $u=new l.OlP("");function zD(n){return Hd(0,[{provide:$u,useExisting:HD},{provide:p_,useExisting:n}])}const qD=new l.OlP("ROUTER_FORROOT_GUARD"),Yx=[Pe,{provide:lf,useClass:Mc},{provide:en,useFactory:Zw},Uc,{provide:Pr,useFactory:function Ww(n){return n.routerState.root},deps:[en]},Hw];function Qx(){return new l.PXZ("Router",en)}let Xw=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Yx,[],tm(t),{provide:qD,useFactory:zd,deps:[[en,new l.FiY,new l.tp0]]},{provide:Xg,useValue:r||{}},r?.useHash?{provide:_e,useClass:vt}:{provide:_e,useClass:ht},{provide:Vt,useFactory:()=>{const n=(0,l.f3M)(en),e=(0,l.f3M)(hs),t=(0,l.f3M)(Xg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new g_(n,e,t)}},r?.preloadingStrategy?zD(r.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:Qx},r?.initialNavigation?WD(r):[],[{provide:__,useFactory:m_},{provide:l.tb,multi:!0,useExisting:__}]]}}static forChild(t){return{ngModule:n,providers:[tm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(qD,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[T]}),n})();function zd(n){return"guarded"}function WD(n){return["disabled"===n.initialNavigation?Hd(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const e=(0,l.f3M)(en);return()=>{e.setUpLocationChangeListener()}}},{provide:y_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Hd(2,[{provide:y_,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:e=>{const t=e.get(G,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(en),m=e.get(Kw);(function i(u){e.get(en).events.pipe(Nr(m=>m instanceof Ys||m instanceof Ds||m instanceof wf),(0,ft.U)(m=>m instanceof Ys||m instanceof Ds&&(0===m.code||1===m.code)&&null),Nr(m=>null!==m),Ma(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?lt(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const __=new l.OlP("");function v_(...n){const e=(0,Gs.jO)(n),{args:t,keys:r}=_d(n),i=new Xi.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,D=d;for(let A=0;A<d;A++){let N=!1;(0,go.Xf)(t[A]).subscribe((0,Fn.x)(u,V=>{N||(N=!0,D--),m[A]=V},()=>w--,void 0,()=>{(!w||!N)&&(D||u.next(r?xu(r,m):m),u.complete())}))}});return e?i.pipe(Au(e)):i}let tE=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),Wc=(()=>{class n extends tE{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Yo=new l.OlP("NgValueAccessor"),rE={provide:Yo,useExisting:(0,l.Gpc)(()=>$a),multi:!0},iE=new l.OlP("CompositionEventMode");let $a=(()=>{class n extends tE{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function YD(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(iE,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[l._Bn([rE]),l.qOj]}),n})();function Kc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function rm(n){return null!=n&&"number"==typeof n.length}const wi=new l.OlP("NgValidators"),Yc=new l.OlP("NgAsyncValidators"),qd=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Or{static min(e){return function E_(n){return e=>{if(Kc(e.value)||Kc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Hf(n){return e=>{if(Kc(e.value)||Kc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Js(n){return Kc(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function I_(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function sE(n){return Kc(n.value)||qd.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function im(n){return e=>Kc(e.value)||!rm(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Qo(n){return e=>rm(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function sm(n){if(!n)return Gf;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Kc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return um(e)}static composeAsync(e){return cm(e)}}function Gf(n){return null}function om(n){return null!=n}function QD(n){return(0,l.QGY)(n)?(0,ln.D)(n):n}function C_(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function JD(n,e){return e.map(t=>t(n))}function zf(n){return n.map(e=>function am(n){return!n.validate}(e)?e:t=>e.validate(t))}function um(n){if(!n)return null;const e=n.filter(om);return 0==e.length?null:function(t){return C_(JD(t,e))}}function qf(n){return null!=n?um(zf(n)):null}function cm(n){if(!n)return null;const e=n.filter(om);return 0==e.length?null:function(t){return v_(JD(t,e).map(QD)).pipe((0,ft.U)(C_))}}function oE(n){return null!=n?cm(zf(n)):null}function aE(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function uE(n){return n._rawValidators}function cE(n){return n._rawAsyncValidators}function D_(n){return n?Array.isArray(n)?n:[n]:[]}function Zf(n,e){return Array.isArray(n)?n.includes(e):n===e}function XD(n,e){const t=D_(e);return D_(n).forEach(i=>{Zf(t,i)||t.push(i)}),t}function lE(n,e){return D_(e).filter(t=>!Zf(n,t))}class eb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=oE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ei extends eb{get formDirective(){return null}get path(){return null}}class Ha extends eb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class dE{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Wf=(()=>{class n extends dE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ha,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[l.qOj]}),n})(),Kf=(()=>{class n extends dE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ei,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[l.qOj]}),n})();const Yf="VALID",Qf="INVALID",Zd="PENDING",Jf="DISABLED";function Wd(n){return(Kd(n)?n.validators:n)||null}function Jc(n){return Array.isArray(n)?qf(n):n||null}function Xf(n,e){return(Kd(e)?e.asyncValidators:n)||null}function Xc(n){return Array.isArray(n)?oE(n):n||null}function Kd(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class A_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Jc(this._rawValidators),this._composedAsyncValidatorFn=Xc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Yf}get invalid(){return this.status===Qf}get pending(){return this.status==Zd}get disabled(){return this.status===Jf}get enabled(){return this.status!==Jf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Jc(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Xc(e)}addValidators(e){this.setValidators(XD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(XD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(lE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(lE(e,this._rawAsyncValidators))}hasValidator(e){return Zf(this._rawValidators,e)}hasAsyncValidator(e){return Zf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Zd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yf||this.status===Zd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jf:Yf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Zd,this._hasOwnPendingAsyncValidator=!0;const t=QD(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?Jf:this.errors?Qf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zd)?Zd:this._anyControlsHaveStatus(Qf)?Qf:Yf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kd(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Ga extends A_{constructor(e,t,r){super(Wd(t),Xf(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function S_(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new l.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function ep(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new l.vHH(1e3,"");if(!r[t])throw new l.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function M_(n,e){return[...e.path,n]}function tp(n,e){hm(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Ts(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&IE(n,e)})}(n,e),function iM(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function EE(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&IE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function wE(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function np(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),fm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function dm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hm(n,e){const t=uE(n);null!==e.validator?n.setValidators(aE(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=cE(n);null!==e.asyncValidator?n.setAsyncValidators(aE(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();dm(e._rawValidators,i),dm(e._rawAsyncValidators,i)}function fm(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=uE(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(d=>d!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=cE(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(d=>d!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return dm(e._rawValidators,r),dm(e._rawAsyncValidators,r),t}function IE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function CE(n,e){hm(n,e)}function pm(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function R_(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function P_(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===$a?t=u:function ob(n){return Object.getPrototypeOf(n.constructor)===Wc}(u)?r=u:i=u}),i||r||t||null}const bE={provide:Ei,useExisting:(0,l.Gpc)(()=>Ss)},rp=(()=>Promise.resolve())();let Ss=(()=>{class n extends Ei{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new l.vpe,this.form=new Ga({},qf(t),oE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){rp.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),tp(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){rp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){rp.then(()=>{const r=this._findContainer(t.path),i=new Ga({});CE(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){rp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){rp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,R_(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(wi,10),l.Y36(Yc,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([bE]),l.qOj]}),n})();function gm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function TE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const rs=class extends A_{constructor(e=null,t,r){super(Wd(t),Xf(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kd(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=TE(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){TE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},O_={provide:Ha,useExisting:(0,l.Gpc)(()=>ME)},sp=(()=>Promise.resolve())();let ME=(()=>{class n extends Ha{constructor(t,r,i,u,d){super(),this._changeDetectorRef=d,this.control=new rs,this._registered=!1,this.update=new l.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=P_(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),pm(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){tp(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){sp.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,l.D6c)(r);sp.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?M_(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ei,9),l.Y36(wi,10),l.Y36(Yc,10),l.Y36(Yo,10),l.Y36(l.sBO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([O_]),l.qOj,l.TTD]}),n})(),Gu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const cM={provide:Yo,useExisting:(0,l.Gpc)(()=>op),multi:!0};let op=(()=>{class n extends Wc{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[l._Bn([cM]),l.qOj]}),n})(),k_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const el=new l.OlP("NgModelWithFormControlWarning"),RE={provide:Ei,useExisting:(0,l.Gpc)(()=>tl)};let tl=(()=>{class n extends Ei{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(fm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return tp(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){np(t.control||null,t,!1),function ab(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,R_(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(np(r||null,t),(n=>n instanceof rs)(i)&&(tp(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);CE(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function N_(n,e){return fm(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){hm(this.form,this),this._oldForm&&fm(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(wi,10),l.Y36(Yc,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([RE]),l.qOj,l.TTD]}),n})();const lM={provide:Ha,useExisting:(0,l.Gpc)(()=>Yd)};let Yd=(()=>{class n extends Ha{constructor(t,r,i,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=P_(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),pm(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return M_(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(l.Y36(Ei,13),l.Y36(wi,10),l.Y36(Yc,10),l.Y36(Yo,10),l.Y36(el,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([lM]),l.qOj,l.TTD]}),n})();const pb={provide:Yo,useExisting:(0,l.Gpc)(()=>rl),multi:!0};function kE(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let rl=(()=>{class n extends Wc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=kE(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function FE(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&l.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([pb]),l.qOj]}),n})(),L_=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(kE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(rl,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const V_={provide:Yo,useExisting:(0,l.Gpc)(()=>U_),multi:!0};function LE(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let U_=(()=>{class n extends Wc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,d)=>{u._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const d=u;for(let m=0;m<d.length;m++){const D=this._getOptionValue(d[m].value);i.push(D)}}else{const d=r.options;for(let m=0;m<d.length;m++){const w=d[m];if(w.selected){const D=this._getOptionValue(w.value);i.push(D)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function gb(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&l.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([V_]),l.qOj]}),n})(),B_=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(LE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(LE(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(U_,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),ol=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[k_]}),n})(),eh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[ol]}),n})(),th=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:el,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[ol]}),n})();var jE=F(6451),vm=F(5363),bb=F(6063);class $E extends _r.x{constructor(e=1/0,t=1/0,r=bb.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!i&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var Tb=F(3099);function H_(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Tb.B)({connector:()=>new $E(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function wm(n,e){return(0,qs.m)(e)?lr(()=>n,e):lr(()=>n)}var hp=F(9468),ii=F(8623),is=F(2011);F(259);var Ie=F(5861),al=F(2951),pp=F(4859),tn=F(2090),za=F(1877);const Im=new Map,z_={activated:!1,tokenObservers:[]},WE={initialized:!1,enabled:!1};function Qn(n){return Im.get(n)||Object.assign({},z_)}function gp(){return WE}class kr{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new tn.BH,yield function YE(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new tn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const si=new tn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Z_(n){if(!Qn(n).activated)throw si.create("use-before-activation",{appName:n.name})}function qa(n,e){return W_.apply(this,arguments)}function W_(){return(W_=(0,Ie.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const N=yield i.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(N){throw si.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==d.status)throw si.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw si.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw si.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(w[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+D,issuedAtTimeMillis:A}})).apply(this,arguments)}function JE(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const rh="firebase-app-check-store";let Ms=null;function eI(){return Ms||(Ms=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(si.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(rh,{keyPath:"compositeKey"})}}catch(t){e(si.create("storage-open",{originalErrorMessage:t?.message}))}}),Ms)}function Tm(){return(Tm=(0,Ie.Z)(function*(n,e){const r=(yield eI()).transaction(rh,"readwrite"),u=r.objectStore(rh).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var D;m(si.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const _p=new za.Yd("@firebase/app-check");function J_(n,e){return(0,tn.hl)()?function Xo(n,e){return function K_(n,e){return Tm.apply(this,arguments)}(function nI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_p.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Sm(){return gp().enabled}function Am(){return ih.apply(this,arguments)}function ih(){return(ih=(0,Ie.Z)(function*(){const n=gp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const iI={error:"UNKNOWN_ERROR"};function sI(n){return tn.US.encodeString(JSON.stringify(n),!1)}function sh(n){return oh.apply(this,arguments)}function oh(){return(oh=(0,Ie.Z)(function*(n,e=!1){const t=n.app;Z_(t);const r=Qn(t);let u,i=r.token;if(i&&!cl(i)&&(r.token=void 0,i=void 0),!i){const w=yield r.cachedTokenPromise;w&&(cl(w)?i=w:yield J_(t,void 0))}if(!e&&i&&cl(i))return{token:i.token};let m,d=!1;if(Sm()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qa(JE(t,yield Am()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const w=yield r.exchangeTokenPromise;return yield J_(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),i=yield Qn(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?_p.warn(w.message):_p.error(w),u=w}return i?u?m=cl(i)?{token:i.token,internalError:u}:uI(u):(m={token:i.token},r.token=i,yield J_(t,i)):m=uI(u),d&&tv(t,m),m})).apply(this,arguments)}function Nm(n,e){const t=Qn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ev(n){const{app:e}=n,t=Qn(e);let r=t.tokenRefresher;r||(r=function aI(n){const{app:e}=n;return new kr((0,Ie.Z)(function*(){let r;if(r=Qn(e).token?yield sh(n,!0):yield sh(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Qn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function tv(n,e){const t=Qn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function cl(n){return n.expireTimeMillis-Date.now()>0}function uI(n){return{token:sI(iI),error:n}}class jb{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qn(this.app);for(const t of e)Nm(this.app,t.next);return Promise.resolve()}}const fI="app-check-internal";!function iT(){(0,al._registerComponent)(new pp.wA("app-check",n=>function $b(n,e){return new jb(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fI).initialize()})),(0,al._registerComponent)(new pp.wA(fI,n=>function Hb(n){return{getToken:e=>sh(n,e),addTokenListener:e=>function Mm(n,e,t,r){const{app:i}=n,u=Qn(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&cl(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),ev(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ev(n))}(n,"INTERNAL",e),removeTokenListener:e=>Nm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,al.registerVersion)("@firebase/app-check","0.7.0")}();class vp{constructor(){return(0,ii.vb)("app-check")}}typeof window<"u"&&window;var gI=F(9260);const cv=new l.OlP("angularfire2.auth.use-emulator"),lv=new l.OlP("angularfire2.auth.settings"),dv=new l.OlP("angularfire2.auth.tenant-id"),hv=new l.OlP("angularfire2.auth.langugage-code"),mI=new l.OlP("angularfire2.auth.use-device-language"),yI=new l.OlP("angularfire.auth.persistence"),_I=(n,e,t,r,i,u,d,m)=>(0,is.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=i,u&&w.useDeviceLanguage(),d)for(const[D,A]of Object.entries(d))w.settings[D]=A;return m&&w.setPersistence(m),w},[t,r,i,u,d,m]);let ea=(()=>{class n{constructor(t,r,i,u,d,m,w,D,A,N,V,z){const le=new _r.x,Oe=lt(void 0).pipe((0,vm.Q)(d.outsideAngular),lr(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,2644)))),(0,ft.U)(()=>(0,is.on)(t,u,r)),(0,ft.U)(ke=>_I(ke,u,m,D,A,N,w,V)),H_({bufferSize:1,refCount:!1}));if(au(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=lt(null);else{Oe.pipe(x()).subscribe();const Je=Oe.pipe(lr(Ut=>Ut.getRedirectResult().then(Wt=>Wt,()=>null)),ii.iC,H_({bufferSize:1,refCount:!1})),bt=Oe.pipe(lr(Ut=>new Xi.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Ut.onAuthStateChanged(an=>Wt.next(an),an=>Wt.error(an),()=>Wt.complete()))})))),At=Oe.pipe(lr(Ut=>new Xi.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Ut.onIdTokenChanged(an=>Wt.next(an),an=>Wt.error(an),()=>Wt.complete()))}))));this.authState=Je.pipe(wm(bt),(0,hp.R)(d.outsideAngular),(0,vm.Q)(d.insideAngular)),this.user=Je.pipe(wm(At),(0,hp.R)(d.outsideAngular),(0,vm.Q)(d.insideAngular)),this.idToken=this.user.pipe(lr(Ut=>Ut?(0,ln.D)(Ut.getIdToken()):lt(null))),this.idTokenResult=this.user.pipe(lr(Ut=>Ut?(0,ln.D)(Ut.getIdTokenResult()):lt(null))),this.credential=(0,jE.T)(Je,le,this.authState.pipe(Nr(Ut=>!Ut))).pipe((0,ft.U)(Ut=>Ut?.user?Ut:null),(0,hp.R)(d.outsideAngular),(0,vm.Q)(d.insideAngular))}return(0,is.pX)(this,Oe,u,{spy:{apply:(ke,Je,bt)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&bt.then(At=>le.next(At))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(is.Dh),l.LFG(is.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(ii.HU),l.LFG(cv,8),l.LFG(lv,8),l.LFG(dv,8),l.LFG(hv,8),l.LFG(mI,8),l.LFG(yI,8),l.LFG(vp,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dT=(()=>{class n{constructor(){gI.Z.registerVersion("angularfire",ii.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[ea]}),n})(),Ep=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r}register(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r)}getCurrentUserUID(){return this.afAuth.authState.pipe(Ma(1),(0,ft.U)(t=>t?t.uid:null))}login(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}logout(){return this.afAuth.signOut()}isLoggedIn(){return this.afAuth.authState.pipe((0,ft.U)(t=>!!t))}getAuthState(){return this.afAuth.authState}getCurrentUser(){return this.afAuth.currentUser}forgotPassword(t){return this.afAuth.sendPasswordResetEmail(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ea),l.LFG(en))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var hT=F(4986);function ah(){return(0,Ln.e)((n,e)=>{let t,r=!1;n.subscribe((0,Fn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function wI(n,e){return n===e}F(2644);var et,pT=F(3942),Ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vi={},fv=fv||{},Bt=Ip||self;function Cp(){}function Dp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function uh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var km="closure_uid_"+(1e9*Math.random()>>>0),mT=0;function yT(n,e,t){return n.call.apply(n.bind,arguments)}function vM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ui(n,e,t){return(Ui=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yT:vM).apply(null,arguments)}function pv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function oi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[i].apply(r,d)}}function Za(){this.s=this.s,this.o=this.o}Za.prototype.s=!1,Za.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function gT(n){Object.prototype.hasOwnProperty.call(n,km)&&n[km]||(n[km]=++mT)}(this)},Za.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const EI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function gv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function mv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Dp(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let d=0;d<u;d++)n[i+d]=r[d]}else n.push(r)}}function Ar(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ar.prototype.h=function(){this.defaultPrevented=!0};var _T=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",Cp,e),Bt.removeEventListener("test",Cp,e)}catch{}return n}();function Lm(n){return/^[\s\xa0]*$/.test(n)}var II=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function yv(n,e){return n<e?-1:n>e?1:0}function Vm(){var n=Bt.navigator;return n&&(n=n.userAgent)?n:""}function Io(n){return-1!=Vm().indexOf(n)}function _v(n){return _v[" "](n),n}function CI(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}_v[" "]=Cp;var Um,n,bp=Io("Opera"),ch=Io("Trident")||Io("MSIE"),vv=Io("Edge"),wv=vv||ch,Ev=Io("Gecko")&&!(-1!=Vm().toLowerCase().indexOf("webkit")&&!Io("Edge"))&&!(Io("Trident")||Io("MSIE"))&&!Io("Edge"),vT=-1!=Vm().toLowerCase().indexOf("webkit")&&!Io("Edge");function Iv(){var n=Bt.document;return n?n.documentMode:void 0}e:{var Tp="",Cv=(n=Vm(),Ev?/rv:([^\);]+)(\)|;)/.exec(n):vv?/Edge\/([\d\.]+)/.exec(n):ch?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vT?/WebKit\/(\S+)/.exec(n):bp?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Cv&&(Tp=Cv?Cv[1]:""),ch){var Bm=Iv();if(null!=Bm&&Bm>parseFloat(Tp)){Um=String(Bm);break e}}Um=Tp}var DI={},bv=Bt.document&&ch&&(Iv()||parseInt(Um,10))||void 0;function Sp(n,e){if(Ar.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ev){e:{try{_v(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:TI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sp.$.h.call(this)}}oi(Sp,Ar);var TI={2:"touch",3:"pen",4:"mouse"};Sp.prototype.h=function(){Sp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ap="closure_listenable_"+(1e6*Math.random()|0),ET=0;function IT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++ET,this.fa=this.ia=!1}function jm(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Tv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function SI(n){const e={};for(const t in n)e[t]=n[t];return e}const AI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xI(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<AI.length;u++)t=AI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xp(n){this.src=n,this.g={},this.h=0}function $m(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=EI(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(jm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Sv(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}xp.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Sv(n,e,r,i);return-1<d?(e=n[d],t||(e.ia=!1)):((e=new IT(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var Av="closure_lm_"+(1e6*Math.random()|0),Hm={};function MI(n,e,t,r,i){if(r&&r.once)return Gm(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)MI(n,e[u],t,r,i);return null}return t=Mv(t),n&&n[Ap]?n.O(e,t,uh(r)?!!r.capture:!!r,i):NI(n,e,t,!1,r,i)}function NI(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var d=uh(i)?!!i.capture:!!i,m=xv(n);if(m||(n[Av]=m=new xp(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function CT(){const e=DT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)_T||(i=d),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Zm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Gm(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Gm(n,e[u],t,r,i);return null}return t=Mv(t),n&&n[Ap]?n.P(e,t,uh(r)?!!r.capture:!!r,i):NI(n,e,t,!0,r,i)}function zm(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)zm(n,e[u],t,r,i);else r=uh(r)?!!r.capture:!!r,t=Mv(t),n&&n[Ap]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Sv(u=n.g[e],t,r,i))&&(jm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=xv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Sv(e,t,r,i)),(t=-1<n?e[n]:null)&&qm(t))}function qm(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Ap])$m(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Zm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=xv(e))?($m(t,n),0==t.h&&(t.src=null,e[Av]=null)):jm(n)}}}function Zm(n){return n in Hm?Hm[n]:Hm[n]="on"+n}function DT(n,e){if(n.fa)n=!0;else{e=new Sp(e,this);var t=n.listener,r=n.la||n.src;n.ia&&qm(n),n=t.call(r,e)}return n}function xv(n){return(n=n[Av])instanceof xp?n:null}var Mp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mv(n){return"function"==typeof n?n:(n[Mp]||(n[Mp]=function(e){return n.handleEvent(e)}),n[Mp])}function Fr(){Za.call(this),this.i=new xp(this),this.S=this,this.J=null}function fr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ar(e,n);else if(e instanceof Ar)e.target=e.target||n;else{var i=e;xI(e=new Ar(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];i=Np(d,r,!0,e)&&i}if(i=Np(d=e.g=n,r,!0,e)&&i,i=Np(d,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Np(d=e.g=t[u],r,!1,e)&&i}function Np(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.fa&&d.capture==t){var m=d.listener,w=d.la||d.src;d.ia&&$m(n.i,d),i=!1!==m.call(w,r)&&i}}return i&&!r.defaultPrevented}oi(Fr,Za),Fr.prototype[Ap]=!0,Fr.prototype.removeEventListener=function(n,e,t,r){zm(this,n,e,t,r)},Fr.prototype.N=function(){if(Fr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)jm(t[r]);delete n.g[e],n.h--}}this.J=null},Fr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Nv=Bt.JSON.stringify;function wM(){var n=Ov;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Km,Wm=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new bT,n=>n.reset());class bT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Rv(n){Bt.setTimeout(()=>{throw n},0)}function PI(n,e){Km||function Pv(){var n=Bt.Promise.resolve(void 0);Km=function(){n.then(OI)}}(),Ym||(Km(),Ym=!0),Ov.add(n,e)}var Ym=!1,Ov=new class RI{constructor(){this.h=this.g=null}add(e,t){const r=Wm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function OI(){for(var n;n=wM();){try{n.h.call(n.g)}catch(t){Rv(t)}var e=Wm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ym=!1}function Rp(n,e){Fr.call(this),this.h=n||1,this.g=e||Bt,this.j=Ui(this.qb,this),this.l=Date.now()}function kv(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Fv(n,e,t){if("function"==typeof n)t&&(n=Ui(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ui(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function kI(n){n.g=Fv(()=>{n.g=null,n.i&&(n.i=!1,kI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}oi(Rp,Fr),(et=Rp.prototype).ga=!1,et.T=null,et.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),fr(this,"tick"),this.ga&&(kv(this),this.start()))}},et.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.N=function(){Rp.$.N.call(this),kv(this),delete this.g};class TT extends Za{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kI(this)}N(){super.N(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lh(n){Za.call(this),this.h=n,this.g={}}oi(lh,Za);var ST=[];function Lv(n,e,t,r){Array.isArray(t)||(t&&(ST[0]=t.toString()),t=ST);for(var i=0;i<t.length;i++){var u=MI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function FI(n){Tv(n.g,function(e,t){this.g.hasOwnProperty(t)&&qm(e)},n),n.g={}}function Qm(){this.g=!0}function dh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function xT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<i.length;d++)i[d]=""}}}return Nv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}lh.prototype.N=function(){lh.$.N.call(this),FI(this)},lh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qm.prototype.Ea=function(){this.g=!1},Qm.prototype.info=function(){};var hl={},LI=null;function Jm(){return LI=LI||new Fr}function VI(n){Ar.call(this,hl.Ta,n)}function Pp(n){const e=Jm();fr(e,new VI(e))}function UI(n,e){Ar.call(this,hl.STAT_EVENT,n),this.stat=e}function Bi(n){const e=Jm();fr(e,new UI(e,n))}function BI(n,e){Ar.call(this,hl.Ua,n),this.size=e}function Op(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}hl.Ta="serverreachability",oi(VI,Ar),hl.STAT_EVENT="statevent",oi(UI,Ar),hl.Ua="timingevent",oi(BI,Ar);var qu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Vv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xm(){}function Bv(){}Xm.prototype.h=null;var jI,hh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ey(){Ar.call(this,"d")}function jv(){Ar.call(this,"c")}function kp(){}function Fp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new lh(this),this.P=MT,this.V=new Rp(n=wv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new $v}function $v(){this.i=null,this.g="",this.h=!1}oi(ey,Ar),oi(jv,Ar),oi(kp,Xm),kp.prototype.g=function(){return new XMLHttpRequest},kp.prototype.i=function(){return{}},jI=new kp;var MT=45e3,Hv={},Zu={};function Gv(n,e,t){n.L=1,n.v=Vp(Ka(e)),n.s=t,n.S=!0,ty(n,null)}function ty(n,e){n.G=Date.now(),Wa(n),n.A=Ka(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),qI(t.i,"t",r),n.C=0,t=n.l.I,n.h=new $v,n.g=$T(n.l,t?e:null,!n.s),0<n.O&&(n.M=new TT(Ui(n.Pa,n,n.g),n.O)),Lv(n.U,n.g,"readystatechange",n.nb),e=n.I?SI(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Pp(),function EM(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var D=m[w].split("=");if(1<D.length){var A=D[0];D=D[1];var N=A.split("_");d=2<=N.length&&"type"==N[1]?d+(A+"=")+D+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Co(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function $I(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=zv(n,t),i==Zu){4==e&&(n.o=4,Bi(14),r=!1),dh(n.j,n.m,null,"[Incomplete Response]");break}if(i==Hv){n.o=4,Bi(15),dh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}dh(n.j,n.m,i,null),fh(n,i)}Co(n)&&i!=Zu&&i!=Hv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),uy(e),e.L=!0,Bi(11))):(dh(n.j,n.m,t,"[Invalid Chunked Response]"),ta(n),Lp(n))}function zv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Zu:(t=Number(e.substring(t,r)),isNaN(t)?Hv:(r+=1)+t>e.length?Zu:(e=e.substr(r,t),n.C=r+t,e))}function Wa(n){n.Y=Date.now()+n.P,HI(n,n.P)}function HI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Op(Ui(n.lb,n),e)}function ny(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function Lp(n){0==n.l.H||n.J||f0(n.l,n)}function ta(n){ny(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,kv(n.V),FI(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function fh(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||e0(t.h,n)))if(!n.K&&e0(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Zp(t),zp(t)}d0(t),Bi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.M&&0==t.A&&!t.v&&(t.v=Op(Ui(t.ib,t),6e3));if(1>=ml(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else vl(t,11)}else if((n.K||t.g==n)&&Zp(t),!Lm(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let D=i[e];if(t.V=D[0],D=D[1],2==t.H)if("c"==D[0]){t.J=D[1],t.oa=D[2];const A=D[3];null!=A&&(t.qa=A,t.j.info("VER="+t.qa));const N=D[4];null!=N&&(t.Ga=N,t.j.info("SVER="+t.Ga));const V=D[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const z=n.g;if(z){const le=z.g?z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(le){var u=r.h;u.g||-1==le.indexOf("spdy")&&-1==le.indexOf("quic")&&-1==le.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(t0(u,u.h),u.h=null))}if(r.F){const Oe=z.g?z.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.Da=Oe,Vn(r.G,r.F,Oe))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var d=n;if((r=t).wa=p0(r,r.I?r.oa:null,r.Y),d.K){LT(r.h,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(ny(m),Wa(m)),r.g=d}else l0(r);0<t.i.length&&ay(t)}else"stop"!=D[0]&&"close"!=D[0]||vl(t,7);else 3==t.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?vl(t,7):a0(t):"noop"!=D[0]&&t.l&&t.l.Aa(D),t.A=0)}Pp()}catch{}}function qv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Dp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function RT(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Dp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function NT(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Dp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(et=Fp.prototype).setTimeout=function(n){this.P=n},et.nb=function(n){n=n.target;const e=this.M;e&&3==Do(n)?e.l():this.Pa(n)},et.Pa=function(n){try{if(n==this.g)e:{const A=Do(this.g);var e=this.g.Ia();if(this.g.da(),!(3>A)&&(3!=A||wv||this.g&&(this.h.h||this.g.ja()||BT(this.g)))){this.J||4!=A||7==e||Pp(),ny(this);var t=this.g.da();this.aa=t;t:if(Co(this)){var r=BT(this.g);n="";var i=r.length,u=4==Do(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ta(this),Lp(this);var d="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ja();if(this.i=200==t,function IM(n,e,t,r,i,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.W,A,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Lm(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Bi(12),ta(this),Lp(this);break e}dh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fh(this,t)}this.S?($I(this,A,d),wv&&this.i&&3==A&&(Lv(this.U,this.V,"tick",this.mb),this.V.start())):(dh(this.j,this.m,d,null),fh(this,d)),4==A&&ta(this),this.i&&!this.J&&(4==A?f0(this.l,this):(this.i=!1,Wa(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Bi(12)):(this.o=0,Bi(13)),ta(this),Lp(this)}}}catch{}},et.mb=function(){if(this.g){var n=Do(this.g),e=this.g.ja();this.C<e.length&&(ny(this),$I(this,n,e),this.i&&4!=n&&Wa(this))}},et.cancel=function(){this.J=!0,ta(this)},et.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function AT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Pp(),Bi(17)),ta(this),this.o=2,Lp(this)):HI(this,this.Y-n)};var Zv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wu(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Wu){this.h=void 0!==e?e:n.h,ry(this,n.j),this.s=n.s,this.g=n.g,Kv(this,n.m),this.l=n.l,e=n.i;var t=new ph;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),iy(this,t),this.o=n.o}else n&&(t=String(n).match(Zv))?(this.h=!!e,ry(this,t[1]||"",!0),this.s=fl(t[2]||""),this.g=fl(t[3]||"",!0),Kv(this,t[4]),this.l=fl(t[5]||"",!0),iy(this,t[6]||"",!0),this.o=fl(t[7]||"")):(this.h=!!e,this.i=new ph(null,this.h))}function Ka(n){return new Wu(n)}function ry(n,e,t){n.j=t?fl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Kv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function iy(n,e,t){e instanceof ph?(n.i=e,function ZI(n,e){e&&!n.j&&(Ku(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Qv(this,r),qI(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=pl(e,zI)),n.i=new ph(e,n.h))}function Vn(n,e,t){n.i.set(e,t)}function Vp(n){return Vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function fl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function pl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,PT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function PT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Wu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(pl(e,GI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(pl(e,GI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(pl(t,"/"==t.charAt(0)?kT:OT,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",pl(t,Yv)),n.join("")};var GI=/[#\/\?@]/g,OT=/[#\?:]/g,kT=/[#\?]/g,zI=/[#\?@]/g,Yv=/#/g;function ph(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ku(n){n.g||(n.g=new Map,n.h=0,n.i&&function Wv(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Qv(n,e){Ku(n),e=gl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Jv(n,e){return Ku(n),e=gl(n,e),n.g.has(e)}function qI(n,e,t){Qv(n,e),0<t.length&&(n.i=null,n.g.set(gl(n,e),gv(t)),n.h+=t.length)}function gl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Xv(n){this.l=n||WI,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ka&&Bt.g.Ka()&&Bt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=ph.prototype).add=function(n,e){Ku(this),this.i=null,n=gl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Ku(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},et.sa=function(){Ku(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},et.Z=function(n){Ku(this);let e=[];if("string"==typeof n)Jv(this,n)&&(e=e.concat(this.g.get(gl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},et.set=function(n,e){return Ku(this),this.i=null,Jv(this,n=gl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.Z(r);for(r=0;r<d.length;r++){var i=u;""!==d[r]&&(i+="="+encodeURIComponent(String(d[r]))),n.push(i)}}return this.i=n.join("&")};var WI=10;function Ci(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ml(n){return n.h?1:n.g?n.g.size:0}function e0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function t0(n,e){n.g?n.g.add(e):n.h=e}function LT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function VT(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return gv(n.i)}function sy(){}function KI(){this.g=new sy}function Up(n,e,t){const r=t||"";try{qv(n,function(i,u){let d=i;uh(i)&&(d=Nv(i)),e.push(r+u+"="+encodeURIComponent(d))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function gh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Bp(n){this.l=n.fc||null,this.j=n.ob||!1}function jp(n,e){Fr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=n0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xv.prototype.cancel=function(){if(this.i=VT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sy.prototype.stringify=function(n){return Bt.JSON.stringify(n,void 0)},sy.prototype.parse=function(n){return Bt.JSON.parse(n,void 0)},oi(Bp,Xm),Bp.prototype.g=function(){return new jp(this.l,this.j)},Bp.prototype.i=function(n){return function(){return n}}({}),oi(jp,Fr);var n0=0;function YI(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function $p(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yl(n)}function yl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=jp.prototype).open=function(n,e){if(this.readyState!=n0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,yl(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Bt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$p(this)),this.readyState=n0},et.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yl(this)),this.g&&(this.readyState=3,yl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;YI(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},et.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?$p(this):yl(this),3==this.readyState&&YI(this)}},et.Za=function(n){this.g&&(this.response=this.responseText=n,$p(this))},et.Ya=function(n){this.g&&(this.response=n,$p(this))},et.ka=function(){this.g&&$p(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(jp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var QI=Bt.JSON.parse;function Jn(n){Fr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Hp,this.L=this.M=!1}oi(Jn,Fr);var Hp="",r0=/^https?$/i,CM=["POST","PUT"];function XI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,s0(n),oy(n)}function s0(n){n.F||(n.F=!0,fr(n,"complete"),fr(n,"error"))}function _l(n){if(n.h&&typeof fv<"u"&&(!n.C[1]||4!=Do(n)||2!=n.da()))if(n.v&&4==Do(n))Fv(n.La,0,n);else if(fr(n,"readystatechange"),4==Do(n)){n.h=!1;try{const m=n.da();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var i=String(n.I).match(Zv)[1]||null;if(!i&&Bt.self&&Bt.self.location){var u=Bt.self.location.protocol;i=u.substr(0,u.length-1)}r=!r0.test(i?i.toLowerCase():"")}t=r}if(t)fr(n,"complete"),fr(n,"success");else{n.m=6;try{var d=2<Do(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.da()+"]",s0(n)}}finally{oy(n)}}}function oy(n,e){if(n.g){o0(n);const t=n.g,r=n.C[0]?Cp:null;n.g=null,n.C=null,e||fr(n,"ready");try{t.onreadystatechange=r}catch{}}}function o0(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function Do(n){return n.g?n.g.readyState:0}function BT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Hp:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function eC(n){let e="";return Tv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function tC(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=eC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vn(n,e,t))}function Gp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function nC(n){this.Ga=0,this.i=[],this.j=new Qm,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Gp("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Gp("baseRetryDelayMs",5e3,n),this.hb=Gp("retryDelaySeedMs",1e4,n),this.eb=Gp("forwardChannelMaxRetries",2,n),this.xa=Gp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new Xv(n&&n.concurrentRequestLimit),this.Ja=new KI,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function a0(n){if(u0(n),3==n.H){var e=n.W++,t=Ka(n.G);Vn(t,"SID",n.J),Vn(t,"RID",e),Vn(t,"TYPE","terminate"),qp(n,t),(e=new Fp(n,n.j,e,void 0)).L=2,e.v=Vp(Ka(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(t=Bt.navigator.sendBeacon(e.v.toString(),"")),!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=$T(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Wa(e)}jT(n)}function zp(n){n.g&&(uy(n),n.g.cancel(),n.g=null)}function u0(n){zp(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),Zp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function ay(n){Ci(n.h)||n.m||(n.m=!0,PI(n.Na,n),n.C=0)}function c0(n,e){var t;t=e?e.m:n.W++;const r=Ka(n.G);Vn(r,"SID",n.J),Vn(r,"RID",t),Vn(r,"AID",n.V),qp(n,r),n.o&&n.s&&tC(r,n.o,n.s),t=new Fp(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=iC(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),t0(n.h,t),Gv(t,r,e)}function qp(n,e){n.ma&&Tv(n.ma,function(t,r){Vn(e,r,t)}),n.l&&qv({},function(t,r){Vn(e,r,t)})}function iC(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ui(n.l.Va,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=i[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let D=i[w].h;const A=i[w].g;if(D-=u,0>D)u=Math.max(0,i[w].h-100),m=!1;else try{Up(A,d,"req"+D+"_")}catch{r&&r(A)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function l0(n){n.g||n.u||(n.ba=1,PI(n.Ma,n),n.A=0)}function d0(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Op(Ui(n.Ma,n),sC(n,n.A)),n.A++,0))}function uy(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function h0(n){n.g=new Fp(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ka(n.wa);Vn(e,"RID","rpc"),Vn(e,"SID",n.J),Vn(e,"CI",n.M?"0":"1"),Vn(e,"AID",n.V),Vn(e,"TYPE","xmlhttp"),qp(n,e),n.o&&n.s&&tC(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=Vp(Ka(e)),t.s=null,t.S=!0,ty(t,n)}function Zp(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function f0(n,e){var t=null;if(n.g==e){Zp(n),uy(n),n.g=null;var r=2}else{if(!e0(n.h,e))return;t=e.F,LT(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;fr(r=Jm(),new BI(r,t)),ay(n)}else l0(n);else if(3==(i=e.o)||0==i&&0<n.ta||!(1==r&&function rC(n,e){return!(ml(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Op(Ui(n.Na,n,e),sC(n,n.C)),n.C++,0)))}(n,e)||2==r&&d0(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:vl(n,5);break;case 4:vl(n,10);break;case 3:vl(n,6);break;default:vl(n,2)}}function sC(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function vl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ui(n.pb,n);t||(t=new Wu("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||ry(t,"https"),Vp(t)),function UT(n,e){const t=new Qm;if(Bt.Image){const r=new Image;r.onload=pv(gh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=pv(gh,t,r,"TestLoadImage: error",!1,e),r.onabort=pv(gh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=pv(gh,t,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Bi(2);n.H=0,n.l&&n.l.za(e),jT(n),u0(n)}function jT(n){if(n.H=0,n.pa=[],n.l){const e=VT(n.h);(0!=e.length||0!=n.i.length)&&(mv(n.pa,e),mv(n.pa,n.i),n.h.i.length=0,gv(n.i),n.i.length=0),n.l.ya()}}function p0(n,e,t){var r=t instanceof Wu?Ka(t):new Wu(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Kv(r,r.m);else{var i=Bt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Wu(null,void 0);r&&ry(u,r),e&&(u.g=e),i&&Kv(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Vn(r,t,e),Vn(r,"VER",n.qa),qp(n,r),r}function $T(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jn(t&&n.Ha&&!n.va?new Bp({ob:!0}):n.va)).Oa(n.I),e}function HT(){}function g0(){if(ch&&!(10<=Number(bv)))throw Error("Environmental error: no available transport.")}function eo(n,e){Fr.call(this),this.g=new nC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Lm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Lm(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Wp(this)}function GT(n){ey.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function zT(){jv.call(this),this.status=1}function Wp(n){this.g=n}function ss(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function oC(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],d=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;d=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(d<<7&4294967295|d>>>25))+((d=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|d>>>20))+((d=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|d>>>10))+((d=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|d>>>25))+((d=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|d>>>20))+((d=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|d>>>10))+((d=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|d>>>25))+((d=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|d>>>20))+((d=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|d>>>10))+((d=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|d>>>25))+((d=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|d>>>20))+((d=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|d>>>10))+((d=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|d>>>23))+((d=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|d>>>12))+((d=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|d>>>23))+((d=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|d>>>12))+((d=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|d>>>23))+((d=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|d>>>12))+((d=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|d>>>27))+((d=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|d>>>23))+((d=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|d>>>18))+((d=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|d>>>12))+((d=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|d>>>21))+((d=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|d>>>16))+((d=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|d>>>21))+((d=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|d>>>16))+((d=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|d>>>21))+((d=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|d>>>16))+((d=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|d>>>28))+((d=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|d>>>21))+((d=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|d>>>16))+((d=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|d>>>9))+((d=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|d>>>22))+((d=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|d>>>17))+((d=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|d>>>11))+((d=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|d>>>22))+((d=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|d>>>17))+((d=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|d>>>11))+((d=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|d>>>22))+((d=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|d>>>17))+((d=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|d>>>11))+((u=(e=t+((d=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|d>>>26))+((d=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|d>>>22))^((i=u+((d=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|d>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(d<<21&4294967295|d>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function vn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(et=Jn.prototype).Oa=function(n){this.M=n},et.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jI.g(),this.C=function Uv(n){return n.h||(n.h=n.i())}(this.u?this.u:jI),this.g.onreadystatechange=Ui(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void XI(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Bt.FormData&&n instanceof Bt.FormData,!(0<=EI(CM,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{o0(this),0<this.B&&((this.L=function JI(n){return ch&&function wT(){return CI(DI,9,function(){let n=0;const e=II(String(Um)).split("."),t=II("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var i=e[d]||"",u=t[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=yv(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||yv(0==i[2].length,0==u[2].length)||yv(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ui(this.ua,this)):this.A=Fv(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){XI(this,u)}},et.ua=function(){typeof fv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fr(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,fr(this,"complete"),fr(this,"abort"),oy(this))},et.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oy(this,!0)),Jn.$.N.call(this)},et.La=function(){this.s||(this.G||this.v||this.l?_l(this):this.kb())},et.kb=function(){_l(this)},et.da=function(){try{return 2<Do(this)?this.g.status:-1}catch{return-1}},et.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},et.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),QI(e)}},et.Ia=function(){return this.m},et.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=nC.prototype).qa=8,et.H=1,et.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Fp(this,this.j,n,void 0);let u=this.s;if(this.U&&(u?(u=SI(u),xI(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=iC(this,i,e),Vn(t=Ka(this.G),"RID",n),Vn(t,"CVER",22),this.F&&Vn(t,"X-HTTP-Session-Id",this.F),qp(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(eC(u)))+"&"+e:this.o&&tC(t,this.o,u)),t0(this.h,i),this.bb&&Vn(t,"TYPE","init"),this.P?(Vn(t,"$req",e),Vn(t,"SID","null"),i.ba=!0,Gv(i,t,null)):Gv(i,t,e),this.H=2}}else 3==this.H&&(n?c0(this,n):0==this.i.length||Ci(this.h)||c0(this))},et.Ma=function(){if(this.u=null,h0(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=Op(Ui(this.jb,this),n)}},et.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Bi(10),zp(this),h0(this))},et.ib=function(){null!=this.v&&(this.v=null,zp(this),d0(this),Bi(19))},et.pb=function(n){n?(this.j.info("Successfully pinged google.com"),Bi(2)):(this.j.info("Failed to ping google.com"),Bi(1))},(et=HT.prototype).Ba=function(){},et.Aa=function(){},et.za=function(){},et.ya=function(){},et.Va=function(){},g0.prototype.g=function(n,e){return new eo(n,e)},oi(eo,Fr),eo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;Bi(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=p0(n,null,n.Y),ay(n)},eo.prototype.close=function(){a0(this.g)},eo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Nv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&ay(e)},eo.prototype.N=function(){this.g.l=null,delete this.j,a0(this.g),delete this.g,eo.$.N.call(this)},oi(GT,ey),oi(zT,jv),oi(Wp,HT),Wp.prototype.Ba=function(){fr(this.g,"a")},Wp.prototype.Aa=function(n){fr(this.g,new GT(n))},Wp.prototype.za=function(n){fr(this.g,new zT)},Wp.prototype.ya=function(){fr(this.g,"b")},oi(ss,function DM(){this.blockSize=-1}),ss.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ss.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)oC(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){oC(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){oC(this,r),i=0;break}}this.h=i,this.i+=e},ss.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var cy={};function ly(n){return-128<=n&&128>n?CI(cy,n,function(e){return new vn([0|e],0>e?-1:0)}):new vn([0|n],0>n?-1:0)}function bo(n){if(isNaN(n)||!isFinite(n))return wl;if(0>n)return ai(bo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Kp;return new vn(e,0)}var Kp=4294967296,wl=ly(0),m0=ly(1),y0=ly(16777216);function Yu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function To(n){return-1==n.h}function ai(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new vn(t,~n.h).add(m0)}function dy(n,e){return n.add(ai(e))}function El(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Yp(n,e){this.g=n,this.h=e}function _0(n,e){if(Yu(e))throw Error("division by zero");if(Yu(n))return new Yp(wl,wl);if(To(n))return e=_0(ai(n),e),new Yp(ai(e.g),ai(e.h));if(To(e))return e=_0(n,ai(e)),new Yp(ai(e.g),e.h);if(30<n.g.length){if(To(n)||To(e))throw Error("slowDivide_ only works with positive integers.");for(var t=m0,r=e;0>=r.X(n);)t=ZT(t),r=ZT(r);var i=Qp(t,1),u=Qp(r,1);for(r=Qp(r,2),t=Qp(t,2);!Yu(r);){var d=u.add(r);0>=d.X(n)&&(i=i.add(t),u=d),r=Qp(r,1),t=Qp(t,1)}return e=dy(n,i.R(e)),new Yp(i,e)}for(i=wl;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),d=(u=bo(t)).R(e);To(d)||0<d.X(n);)d=(u=bo(t-=r)).R(e);Yu(u)&&(u=m0),i=i.add(u),n=dy(n,d)}return new Yp(i,n)}function ZT(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new vn(t,n.h)}function Qp(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new vn(i,n.h)}(et=vn.prototype).ea=function(){if(To(this))return-ai(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Kp+r)*e,e*=Kp}return n},et.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Yu(this))return"0";if(To(this))return"-"+ai(this).toString(n);for(var e=bo(Math.pow(n,6)),t=this,r="";;){var i=_0(t,e).g,u=((0<(t=dy(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Yu(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},et.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},et.X=function(n){return To(n=dy(this,n))?-1:Yu(n)?0:1},et.abs=function(){return To(this)?ai(this):this},et.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),d=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=d>>>16,t[i]=(d&=65535)<<16|(u&=65535)}return new vn(t,-2147483648&t[t.length-1]?-1:0)},et.R=function(n){if(Yu(this)||Yu(n))return wl;if(To(this))return To(n)?ai(this).R(ai(n)):ai(ai(this).R(n));if(To(n))return ai(this.R(ai(n)));if(0>this.X(y0)&&0>n.X(y0))return bo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,d=65535&this.D(r),m=n.D(i)>>>16,w=65535&n.D(i);t[2*r+2*i]+=d*w,El(t,2*r+2*i),t[2*r+2*i+1]+=u*w,El(t,2*r+2*i+1),t[2*r+2*i+1]+=d*m,El(t,2*r+2*i+1),t[2*r+2*i+2]+=u*m,El(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new vn(t,0)},et.gb=function(n){return _0(this,n).h},et.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new vn(t,this.h&n.h)},et.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new vn(t,this.h|n.h)},et.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new vn(t,this.h^n.h)},g0.prototype.createWebChannel=g0.prototype.g,eo.prototype.send=eo.prototype.u,eo.prototype.open=eo.prototype.m,eo.prototype.close=eo.prototype.close,qu.NO_ERROR=0,qu.TIMEOUT=8,qu.HTTP_ERROR=6,Vv.COMPLETE="complete",Bv.EventType=hh,hh.OPEN="a",hh.CLOSE="b",hh.ERROR="c",hh.MESSAGE="d",Fr.prototype.listen=Fr.prototype.O,Jn.prototype.listenOnce=Jn.prototype.P,Jn.prototype.getLastError=Jn.prototype.Sa,Jn.prototype.getLastErrorCode=Jn.prototype.Ia,Jn.prototype.getStatus=Jn.prototype.da,Jn.prototype.getResponseJson=Jn.prototype.Wa,Jn.prototype.getResponseText=Jn.prototype.ja,Jn.prototype.send=Jn.prototype.ha,Jn.prototype.setWithCredentials=Jn.prototype.Oa,ss.prototype.digest=ss.prototype.l,ss.prototype.reset=ss.prototype.reset,ss.prototype.update=ss.prototype.j,vn.prototype.add=vn.prototype.add,vn.prototype.multiply=vn.prototype.R,vn.prototype.modulo=vn.prototype.gb,vn.prototype.compare=vn.prototype.X,vn.prototype.toNumber=vn.prototype.ea,vn.prototype.toString=vn.prototype.toString,vn.prototype.getBits=vn.prototype.D,vn.fromNumber=bo,vn.fromString=function qT(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ai(qT(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=bo(Math.pow(e,8)),r=wl,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),d=parseInt(n.substring(i,i+u),e);8>u?(u=bo(Math.pow(e,u)),r=r.R(u).add(bo(d))):r=(r=r.R(t)).add(bo(d))}return r};var WT=Vi.createWebChannelTransport=function(){return new g0},KT=Vi.getStatEventTarget=function(){return Jm()},v0=Vi.ErrorCode=qu,bM=Vi.EventType=Vv,YT=Vi.Event=hl,w0=Vi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},aC=Vi.FetchXmlHttpFactory=Bp,E0=Vi.WebChannel=Bv,So=Vi.XhrIo=Jn,QT=Vi.Md5=ss,Qu=Vi.Integer=vn;const uC="@firebase/firestore";class In{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");let mh="9.22.0";const na=new za.Yd("@firebase/firestore");function I0(){return na.logLevel}function Le(n,...e){if(na.logLevel<=za.in.DEBUG){const t=e.map(C0);na.debug(`Firestore (${mh}): ${n}`,...t)}}function pr(n,...e){if(na.logLevel<=za.in.ERROR){const t=e.map(C0);na.error(`Firestore (${mh}): ${n}`,...t)}}function Ns(n,...e){if(na.logLevel<=za.in.WARN){const t=e.map(C0);na.warn(`Firestore (${mh}): ${n}`,...t)}}function C0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${mh}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function pt(n,e){n||st()}function Ke(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends tn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Un{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class D0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(In.UNAUTHENTICATED))}shutdown(){}}class Ya{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class eS{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=D=>this.i!==i?(i=this.i,t(D)):Promise.resolve();let d=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Un,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=d;e.enqueueRetryable((0,Ie.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},w=D=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Un)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt("string"==typeof r.accessToken),new D0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new In(e)}}class TM{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class tS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new TM(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nS{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.T;return this.T=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt("string"==typeof t.token),this.T=t.token,new cC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function lC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class rS{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=lC(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function yh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function T0(n){return n+"\0"}class Xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class gt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new gt(e)}static min(){return new gt(new Xn(0,0))}static max(){return new gt(new Xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _h{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_h.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _h?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),d=t.get(i);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends _h{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const dC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends _h{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return dC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new be(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;i<e.length;){const m=e[i];if("\\"===m){if(i+1===e.length)throw new be(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[i+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new be(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,i+=2}else"`"===m?(d=!d,i++):"."!==m||d?(r+=m,i++):(u(),i++)}if(u(),d)throw new be(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(Jt.fromString(e))}static fromName(e){return new Ze(Jt.fromString(e).popFirst(5))}static empty(){return new Ze(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new Jt(e.slice()))}}class Il{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function vh(n){return n.fields.find(e=>2===e.kind)}function Ju(n){return n.fields.filter(e=>2!==e.kind)}Il.UNKNOWN_ID=-1;class Jp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xp(0,to.min())}}function fC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=gt.fromTimestamp(1e9===r?new Xn(t+1,0):new Xn(t,r));return new to(i,Ze.empty(),e)}function sS(n){return new to(n.readTime,n.key,-1)}class to{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new to(gt.min(),Ze.empty(),-1)}static max(){return new to(gt.max(),Ze.empty(),-1)}}function hy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const pC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Xu(n){return mC.apply(this,arguments)}function mC(){return mC=(0,Ie.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==pC)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),mC.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,u=0,d=!1;e.forEach(m=>{++i,m.next(()=>{++u,d&&u===i&&t()},w=>r(w))}),d=!0,u===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const D=w;t(e[D]).next(A=>{d[D]=A,++m,m===u&&r(d)},A=>i(A))}})}static doWhile(e,t){return new ie((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class S0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Un,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new eg(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Qa(r.target.error);this.v.reject(new eg(e,i))}}static open(e,t,r,i){try{return new S0(t,e.transaction(i,r))}catch(u){throw new eg(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new oS(t)}}class ra{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===ra.S((0,tn.z$)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),Cl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,tn.hl)())return!1;if(ra.C())return!0;const e=(0,tn.z$)(),t=ra.S(e),r=0<t&&t<10,i=ra.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{i(new eg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;i("VersionError"===m.name?new be(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new be(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new eg(e,m))},u.onupgradeneeded=d=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.V.O(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,Ie.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=S0.open(u.db,e,d?"readonly":"readwrite",r),D=i(w).next(A=>(w.P(),A)).catch(A=>(w.abort(A),ie.reject(A))).toPromise();return D.catch(()=>{}),yield w.R,D}catch(w){const D=w,A="FirebaseError"!==D.name&&m<3;if(Le("SimpleDb","Transaction failed with error:",D.message,"Retrying:",A),u.close(),!A)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class AM{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Cl(this.L.delete())}}class eg extends be{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ao(n){return"IndexedDbTransactionError"===n.name}class oS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cl(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),Cl(this.store.add(e))}get(e){return Cl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),Cl(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),Cl(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(d,m)=>{u.push(m)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ie((u,d)=>{i.onerror=m=>{d(m.target.error)},i.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((i,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}J(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,d,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ie((r,i)=>{t.onerror=u=>{const d=Qa(u.target.error);i(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}W(e,t){const r=[];return new ie((i,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void i();const w=new AM(m),D=t(m.primaryKey,m.value,w);if(D instanceof ie){const A=D.catch(N=>(w.done(),ie.reject(N)));r.push(A)}w.isDone?i():null===w.K?m.continue():m.continue(w.K)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cl(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Qa(r.target.error);t(i)}})}let A0=!1;function Qa(n){const e=ra.S((0,tn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A0||(A0=!0,setTimeout(()=>{throw r},0)),r}}return n}class yC{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Le("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{Le("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Ao(r)?Le("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Xu(r)}yield t.et(6e4)}))}}class x0{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return ie.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Le("IndexBackiller",`Processing collection: ${d}`),this.it(e,d,i).next(m=>{i-=m,r.add(d)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.rt(i,u)).next(m=>(Le("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const d=sS(u);hy(d,r)>0&&(r=d)}),new to(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ji=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function tg(n){return null==n}function Dl(n){return 0===n&&1/n==-1/0}function fy(n){return"number"==typeof n&&Number.isInteger(n)&&!Dl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Lr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aS(e)),e=xM(n.get(t),e);return aS(e)}function xM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function aS(n){return n+"\x01\x01"}function Ja(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&st(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===i.length?w=m:(i+=m,w=i,i=""),r.push(w);break;case"\x10":i+=n.substring(u,d),i+="\0";break;case"\x11":i+=n.substring(u,d+1);break;default:st()}u=d+2}return new Jt(r)}const uS=["userId","batchId"];function ng(n,e){return[n,Lr(e)]}function _C(n,e,t){return[n,Lr(e),t]}const cS={},lS=["prefixPath","collectionGroup","readTime","documentId"],dS=["prefixPath","collectionGroup","documentId"],vC=["collectionGroup","readTime","prefixPath","documentId"],wC=["canonicalId","targetId"],EC=["targetId","path"],hS=["path","targetId"],fS=["collectionId","parent"],IC=["indexId","uid"],M0=["uid","sequenceNumber"],MM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CC=["indexId","uid","orderedDocumentKey"],N0=["userId","collectionPath","documentId"],pS=["userId","collectionPath","largestBatchId"],gS=["userId","collectionGroup","largestBatchId"],mS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NM=[...mS,"documentOverlays"],DC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bC=DC,yS=[...bC,"indexConfiguration","indexState","indexEntries"];class TC extends gC{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ui(n,e){const t=Ke(n);return ra.M(t.ht,e)}function _S(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Bn{constructor(e,t){this.comparator=e,this.root=t||Di.EMPTY}insert(e,t){return new Bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Di.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new R0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new R0(this.root,e,this.comparator,!1)}getReverseIterator(){return new R0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new R0(this.root,e,this.comparator,!0)}}class R0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Di{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Di.RED,this.left=i??Di.EMPTY,this.right=u??Di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Di(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Di.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Di.EMPTY=null,Di.RED=!0,Di.BLACK=!1,Di.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Di(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zn{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wS(this.data.getIterator())}getIteratorFrom(e){return new wS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zn(this.comparator);return t.data=e,t}}class wS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rg(n){return n.hasNext()?n.getNext():void 0}class Rs{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new Rs([])}unionWith(e){let t=new Zn(er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Rs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class s extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class a{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new s("Invalid base64 string: "+i):i}}(e);return new a(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new a(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}a.EMPTY_BYTE_STRING=new a("");const c=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function h(n){if(pt(!!n),"string"==typeof n){let e=0;const t=c.exec(n);if(pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:g(n.seconds),nanos:g(n.nanos)}}function g(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function _(n){return"string"==typeof n?a.fromBase64String(n):a.fromUint8Array(n)}function E(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function C(n){const e=n.mapValue.fields.__previous_value__;return E(e)?C(e):e}function S(n){const e=h(n.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}class R{constructor(e,t,r,i,u,d,m,w,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=w,this.useFetchStreams=D}}class P{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new P("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof P&&e.projectId===this.projectId&&e.database===this.database}}const j={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},J={nullValue:"NULL_VALUE"};function me(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?E(n)?4:my(n)?9007199254740991:10:st()}function Ve(n,e){if(n===e)return!0;const t=me(n);if(t!==me(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return S(n).isEqual(S(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=h(r.timestampValue),d=h(i.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,_(n.bytesValue).isEqual(_(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return g(r.geoPointValue.latitude)===g(i.geoPointValue.latitude)&&g(r.geoPointValue.longitude)===g(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return g(r.integerValue)===g(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=g(r.doubleValue),d=g(i.doubleValue);return u===d?Dl(u)===Dl(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return yh(n.arrayValue.values||[],e.arrayValue.values||[],Ve);case 10:return function(r,i){const u=r.mapValue.fields||{},d=i.mapValue.fields||{};if(_S(u)!==_S(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Ve(u[m],d[m])))return!1;return!0}(n,e);default:return st()}var i}function qe(n,e){return void 0!==(n.values||[]).find(t=>Ve(t,e))}function nt(n,e){if(n===e)return 0;const t=me(n),r=me(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const d=g(i.integerValue||i.doubleValue),m=g(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return St(n.timestampValue,e.timestampValue);case 4:return St(S(n),S(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(i,u){const d=_(i),m=_(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const d=i.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const D=Lt(d[w],m[w]);if(0!==D)return D}return Lt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const d=Lt(g(i.latitude),g(u.latitude));return 0!==d?d:Lt(g(i.longitude),g(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const d=i.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const D=nt(d[w],m[w]);if(D)return D}return Lt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===j.mapValue&&u===j.mapValue)return 0;if(i===j.mapValue)return 1;if(u===j.mapValue)return-1;const d=i.fields||{},m=Object.keys(d),w=u.fields||{},D=Object.keys(w);m.sort(),D.sort();for(let A=0;A<m.length&&A<D.length;++A){const N=Lt(m[A],D[A]);if(0!==N)return N;const V=nt(d[m[A]],w[D[A]]);if(0!==V)return V}return Lt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw st()}}function St(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=h(n),r=h(e),i=Lt(t.seconds,r.seconds);return 0!==i?i:Lt(t.nanos,r.nanos)}function Te(n){return Nt(n)}function Nt(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=h(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?_(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const d of r.values||[])u?u=!1:i+=",",i+=Nt(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of i)d?d=!1:u+=",",u+=`${m}:${Nt(r.fields[m])}`;return u+"}"}(n.mapValue):st();var e}function wn(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xa(n){return!!n&&"integerValue"in n}function Tl(n){return!!n&&"arrayValue"in n}function py(n){return!!n&&"nullValue"in n}function gy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wh(n){return!!n&&"mapValue"in n}function Sl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Sl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function my(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function P0(n){return"nullValue"in n?J:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wn(P.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function O0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wn(P.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?j:st()}function yy(n,e){const t=nt(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function RM(n,e){const t=nt(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $i{constructor(e){this.value=e}static empty(){return new $i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(t)}setAll(e){let t=er.emptyPath(),r={},i=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,i),r={},i=[],t=m.popLast()}d?r[m.lastSegment()]=Sl(d):i.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());wh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ve(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];wh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bl(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new $i(Sl(this.value))}}function PM(n){const e=[];return bl(n.fields,(t,r)=>{const i=new er([t]);if(wh(r)){const u=PM(r.mapValue).fields;if(0===u.length)e.push(i);else for(const d of u)e.push(i.child(d))}else e.push(i)}),new Rs(e)}class tr{constructor(e,t,r,i,u,d,m){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new tr(e,0,gt.min(),gt.min(),gt.min(),$i.empty(),0)}static newFoundDocument(e,t,r,i){return new tr(e,1,t,gt.min(),r,i,0)}static newNoDocument(e,t){return new tr(e,2,t,gt.min(),gt.min(),$i.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,gt.min(),gt.min(),$i.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(gt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Eh{constructor(e,t){this.position=e,this.inclusive=t}}function OM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],d=n.position[i];if(r=u.field.isKeyField()?Ze.comparator(Ze.fromName(d.referenceValue),t.key):nt(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function kM(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ve(n.position[t],e.position[t]))return!1;return!0}class _y{constructor(e,t="asc"){this.field=e,this.dir=t}}function oP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class FM{}class rn extends FM{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new aP(e,t,r):"array-contains"===t?new lP(e,r):"in"===t?new $M(e,r):"not-in"===t?new dP(e,r):"array-contains-any"===t?new hP(e,r):new rn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new uP(e,r):new cP(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(nt(t,this.value)):null!==t&&me(this.value)===me(t)&&this.matchesComparison(nt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class An extends FM{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new An(e,t)}matches(e){return vy(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function vy(n){return"and"===n.op}function ES(n){return"or"===n.op}function IS(n){return LM(n)&&vy(n)}function LM(n){for(const e of n.filters)if(e instanceof An)return!1;return!0}function CS(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+Te(n.value);if(IS(n))return n.filters.map(e=>CS(e)).join(",");{const e=n.filters.map(t=>CS(t)).join(",");return`${n.op}(${e})`}}function VM(n,e){return n instanceof rn?(t=n,(r=e)instanceof rn&&t.op===r.op&&t.field.isEqual(r.field)&&Ve(t.value,r.value)):n instanceof An?function(t,r){return r instanceof An&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,d)=>i&&VM(u,r.filters[d]),!0)}(n,e):void st();var t,r}function UM(n,e){const t=n.filters.concat(e);return An.create(t,n.op)}function BM(n){return n instanceof rn?`${(e=n).field.canonicalString()} ${e.op} ${Te(e.value)}`:n instanceof An?function(e){return e.op.toString()+" {"+e.getFilters().map(BM).join(" ,")+"}"}(n):"Filter";var e}class aP extends rn{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class uP extends rn{constructor(e,t){super(e,"in",t),this.keys=jM(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class cP extends rn{constructor(e,t){super(e,"not-in",t),this.keys=jM(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jM(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class lP extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tl(t)&&qe(t.arrayValue,this.value)}}class $M extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qe(this.value.arrayValue,t)}}class dP extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(qe(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qe(this.value.arrayValue,t)}}class hP extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qe(this.value.arrayValue,r))}}class fP{constructor(e,t=null,r=[],i=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=d,this.endAt=m,this.dt=null}}function DS(n,e=null,t=[],r=[],i=null,u=null,d=null){return new fP(n,e,t,r,i,u,d)}function ig(n){const e=Ke(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>CS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),tg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Te(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Te(r)).join(",")),e.dt=t}return e.dt}function k0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kM(n.startAt,e.startAt)&&kM(n.endAt,e.endAt)}function SC(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function AC(n,e){return n.filters.filter(t=>t instanceof rn&&t.field.isEqual(e))}function HM(n,e,t){let r=J,i=!0;for(const u of AC(n,e)){let d=J,m=!0;switch(u.op){case"<":case"<=":d=P0(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=J}yy({value:r,inclusive:i},{value:d,inclusive:m})<0&&(r=d,i=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];yy({value:r,inclusive:i},{value:d,inclusive:t.inclusive})<0&&(r=d,i=t.inclusive);break}return{value:r,inclusive:i}}function GM(n,e,t){let r=j,i=!0;for(const u of AC(n,e)){let d=j,m=!0;switch(u.op){case">=":case">":d=O0(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=j}RM({value:r,inclusive:i},{value:d,inclusive:m})>0&&(r=d,i=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];RM({value:r,inclusive:i},{value:d,inclusive:t.inclusive})>0&&(r=d,i=t.inclusive);break}return{value:r,inclusive:i}}class Al{constructor(e,t=null,r=[],i=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.wt=null,this._t=null}}function zM(n,e,t,r,i,u,d,m){return new Al(n,e,t,r,i,u,d,m)}function wy(n){return new Al(n)}function qM(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function bS(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function xC(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function TS(n){return null!==n.collectionGroup}function sg(n){const e=Ke(n);if(null===e.wt){e.wt=[];const t=xC(e),r=bS(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new _y(t)),e.wt.push(new _y(er.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new _y(er.keyField(),u))}}}return e.wt}function Ps(n){const e=Ke(n);if(!e._t)if("F"===e.limitType)e._t=DS(e.path,e.collectionGroup,sg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of sg(e))t.push(new _y(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Eh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Eh(e.startAt.position,e.startAt.inclusive):null;e._t=DS(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function SS(n,e){e.getFirstInequalityField(),xC(n);const t=n.filters.concat([e]);return new Al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function MC(n,e,t){return new Al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function F0(n,e){return k0(Ps(n),Ps(e))&&n.limitType===e.limitType}function ZM(n){return`${ig(Ps(n))}|lt:${n.limitType}`}function AS(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>BM(r)).join(", ")}]`),tg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Te(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Te(r)).join(",")),`Target(${t})`}(Ps(n))}; limitType=${n.limitType})`}function L0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of sg(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,d){const m=OM(i,u,d);return i.inclusive?m<=0:m<0}(t.startAt,sg(t),r)||t.endAt&&!function(i,u,d){const m=OM(i,u,d);return i.inclusive?m>=0:m>0}(t.endAt,sg(t),r)));var t,r}function WM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KM(n){return(e,t)=>{let r=!1;for(const i of sg(n)){const u=pP(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function pP(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,u,d){const m=u.data.field(i),w=d.data.field(i);return null!==m&&null!==w?nt(m,w):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}class xl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bl(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return vS(this.inner)}size(){return this.innerSize}}const gP=new Bn(Ze.comparator);function no(){return gP}const YM=new Bn(Ze.comparator);function V0(...n){let e=YM;for(const t of n)e=e.insert(t.key,t);return e}function QM(n){let e=YM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ec(){return U0()}function JM(){return U0()}function U0(){return new xl(n=>n.toString(),(n,e)=>n.isEqual(e))}const mP=new Bn(Ze.comparator),yP=new Zn(Ze.comparator);function Zt(...n){let e=yP;for(const t of n)e=e.add(t);return e}const _P=new Zn(Lt);function xS(){return _P}function XM(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dl(e)?"-0":e}}function e1(n){return{integerValue:""+n}}function t1(n,e){return fy(e)?e1(e):XM(n,e)}class NC{constructor(){this._=void 0}}function vP(n,e,t){return n instanceof Ey?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&E(i)&&(i=C(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof og?r1(n,e):n instanceof ag?i1(n,e):function(r,i){const u=n1(r,i),d=s1(u)+s1(r.gt);return Xa(u)&&Xa(r.gt)?e1(d):XM(r.serializer,d)}(n,e)}function wP(n,e,t){return n instanceof og?r1(n,e):n instanceof ag?i1(n,e):t}function n1(n,e){return n instanceof Iy?Xa(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ey extends NC{}class og extends NC{constructor(e){super(),this.elements=e}}function r1(n,e){const t=o1(e);for(const r of n.elements)t.some(i=>Ve(i,r))||t.push(r);return{arrayValue:{values:t}}}class ag extends NC{constructor(e){super(),this.elements=e}}function i1(n,e){let t=o1(e);for(const r of n.elements)t=t.filter(i=>!Ve(i,r));return{arrayValue:{values:t}}}class Iy extends NC{constructor(e,t){super(),this.serializer=e,this.gt=t}}function s1(n){return g(n.integerValue||n.doubleValue)}function o1(n){return Tl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class B0{constructor(e,t){this.field=e,this.transform=t}}class IP{constructor(e,t){this.version=e,this.transformResults=t}}class gr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function RC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class PC{}function a1(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Dy(n.key,gr.none()):new Cy(n.key,n.data,gr.none());{const t=n.data,r=$i.empty();let i=new Zn(er.comparator);for(let u of e.fields)if(!i.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),i=i.add(u)}return new Ml(n.key,r,new Rs(i.toArray()),gr.none())}}function CP(n,e,t){n instanceof Cy?function(r,i,u){const d=r.value.clone(),m=l1(r.fieldTransforms,i,u.transformResults);d.setAll(m),i.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ml?function(r,i,u){if(!RC(r.precondition,i))return void i.convertToUnknownDocument(u.version);const d=l1(r.fieldTransforms,i,u.transformResults),m=i.data;m.setAll(c1(r)),m.setAll(d),i.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function j0(n,e,t,r){return n instanceof Cy?function(i,u,d,m){if(!RC(i.precondition,u))return d;const w=i.value.clone(),D=d1(i.fieldTransforms,m,u);return w.setAll(D),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ml?function(i,u,d,m){if(!RC(i.precondition,u))return d;const w=d1(i.fieldTransforms,m,u),D=u.data;return D.setAll(c1(i)),D.setAll(w),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===d?null:d.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,RC(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function DP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=n1(r.transform,i||null);null!=u&&(null===t&&(t=$i.empty()),t.set(r.field,u))}return t||null}function u1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&yh(t,r,(i,u)=>function EP(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof og&&r instanceof og||t instanceof ag&&r instanceof ag?yh(t.elements,r.elements,Ve):t instanceof Iy&&r instanceof Iy?Ve(t.gt,r.gt):t instanceof Ey&&r instanceof Ey);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Cy extends PC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ml extends PC{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function c1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function l1(n,e,t){const r=new Map;pt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],d=u.transform,m=e.data.field(u.field);r.set(u.field,wP(d,m,t[i]))}return r}function d1(n,e,t){const r=new Map;for(const i of n){const u=i.transform,d=t.data.field(i.field);r.set(i.field,vP(u,d,e))}return r}class Dy extends PC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MS extends PC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class NS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&CP(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=j0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=j0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=JM();return this.mutations.forEach(i=>{const u=e.get(i.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(i.key)?null:m;const w=a1(d,m);null!==w&&r.set(i.key,w),d.isValidDocument()||d.convertToNoDocument(gt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zt())}isEqual(e){return this.batchId===e.batchId&&yh(this.mutations,e.mutations,(t,r)=>u1(t,r))&&yh(this.baseMutations,e.baseMutations,(t,r)=>u1(t,r))}}class RS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){pt(e.mutations.length===r.length);let i=mP;const u=e.mutations;for(let d=0;d<u.length;d++)i=i.insert(u[d].key,r[d].version);return new RS(e,t,r,i)}}class PS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class TP{constructor(e,t){this.count=e,this.unchangedNames=t}}var qr,dn;function h1(n){switch(n){default:return st();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function f1(n){if(void 0===n)return pr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case qr.OK:return ce.OK;case qr.CANCELLED:return ce.CANCELLED;case qr.UNKNOWN:return ce.UNKNOWN;case qr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case qr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case qr.INTERNAL:return ce.INTERNAL;case qr.UNAVAILABLE:return ce.UNAVAILABLE;case qr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case qr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case qr.NOT_FOUND:return ce.NOT_FOUND;case qr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case qr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case qr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case qr.ABORTED:return ce.ABORTED;case qr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case qr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case qr.DATA_LOSS:return ce.DATA_LOSS;default:return st()}}(dn=qr||(qr={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";class OS{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return OC}static getOrCreateInstance(){return null===OC&&(OC=new OS),OC}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let OC=null;function p1(){return new TextEncoder}const SP=new Qu([4294967295,4294967295],0);function g1(n){const e=p1().encode(n),t=new QT;return t.update(e),new Uint8Array(t.digest())}function m1(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Qu([t,r],0),new Qu([i,u],0)]}class kS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $0(`Invalid padding: ${t}`);if(r<0)throw new $0(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new $0(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new $0(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Qu.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Qu.fromNumber(r)));return 1===i.compare(SP)&&(i=new Qu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=g1(e),[r,i]=m1(t);for(let u=0;u<this.hashCount;u++){const d=this.Et(r,i,u);if(!this.At(d))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new kS(u,i,t);return r.forEach(m=>d.insert(m)),d}insert(e){if(0===this.It)return;const t=g1(e),[r,i]=m1(t);for(let u=0;u<this.hashCount;u++){const d=this.Et(r,i,u);this.Rt(d)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class $0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class H0{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,G0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new H0(gt.min(),i,new Bn(Lt),no(),Zt())}}class G0{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new G0(r,t,Zt(),Zt(),Zt())}}class kC{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class y1{constructor(e,t){this.targetId=e,this.Vt=t}}class _1{constructor(e,t,r=a.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class v1{constructor(){this.St=0,this.Dt=E1(),this.Ct=a.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Zt(),t=Zt(),r=Zt();return this.Dt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new G0(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=E1()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class AP{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=no(),this.zt=w1(),this.Wt=new Bn(Lt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,u=this.se(r);if(u){const d=u.target;if(SC(d))if(0===i){const m=new Ze(d.path);this.Yt(r,m,tr.newNoDocument(m,gt.min()))}else pt(1===i);else{const m=this.ie(r);if(m!==i){const w=this.re(e,m);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=OS.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(D,A,N){var V,z,le,Oe,ke,Je;const bt={localCacheCount:A,existenceFilterCount:N.count},At=N.unchangedNames;return At&&(bt.bloomFilter={applied:0===D,hashCount:null!==(V=At?.hashCount)&&void 0!==V?V:0,bitmapLength:null!==(Oe=null===(le=null===(z=At?.bits)||void 0===z?void 0:z.bitmap)||void 0===le?void 0:le.length)&&void 0!==Oe?Oe:0,padding:null!==(Je=null===(ke=At?.bits)||void 0===ke?void 0:ke.padding)&&void 0!==Je?Je:0}),bt}(w,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:d=0},hashCount:m=0}=r;let w,D;try{w=_(u).toUint8Array()}catch(A){if(A instanceof s)return Ns("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw A}try{D=new kS(w,d,m)}catch(A){return Ns(A instanceof $0?"BloomFilter error: ":"Applying bloom filter failed: ",A),1}return 0===D.It?1:i!==t-this.oe(e.targetId,D)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const d=this.Gt.ue(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((u,d)=>{const m=this.se(d);if(m){if(u.current&&SC(m.target)){const w=new Ze(m.target.path);null!==this.jt.get(w)||this.ae(d,w)||this.Yt(d,w,tr.newNoDocument(w,e))}u.Mt&&(t.set(d,u.Ot()),u.Ft())}});let r=Zt();this.zt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const D=this.se(w);return!D||"TargetPurposeLimboResolution"===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,d)=>d.setReadTime(e));const i=new H0(e,t,this.Wt,this.jt,r);return this.jt=no(),this.zt=w1(),this.Wt=new Bn(Lt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new v1,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Zn(Lt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new v1),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function w1(){return new Bn(Ze.comparator)}function E1(){return new Bn(Ze.comparator)}const xP={asc:"ASCENDING",desc:"DESCENDING"},MP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NP={and:"AND",or:"OR"};class RP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function FS(n,e){return n.useProto3Json||tg(e)?e:{value:e}}function by(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function PP(n,e){return by(n,e.toTimestamp())}function Vr(n){return pt(!!n),gt.fromTimestamp(function(e){const t=h(e);return new Xn(t.seconds,t.nanos)}(n))}function LS(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function C1(n){const e=Jt.fromString(n);return pt(R1(e)),e}function z0(n,e){return LS(n.databaseId,e.path)}function tc(n,e){const t=C1(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(b1(t))}function VS(n,e){return LS(n.databaseId,e)}function D1(n){const e=C1(n);return 4===e.length?Jt.emptyPath():b1(e)}function q0(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function b1(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function T1(n,e,t){return{name:z0(n,e),fields:t.value.mapValue.fields}}function S1(n,e,t){const r=tc(n,e.name),i=Vr(e.updateTime),u=e.createTime?Vr(e.createTime):gt.min(),d=new $i({mapValue:{fields:e.fields}}),m=tr.newFoundDocument(r,i,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Z0(n,e){let t;if(e instanceof Cy)t={update:T1(n,e.key,e.value)};else if(e instanceof Dy)t={delete:z0(n,e.key)};else if(e instanceof Ml)t={update:T1(n,e.key,e.data),updateMask:jP(e.fieldMask)};else{if(!(e instanceof MS))return st();t={verify:z0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const d=u.transform;if(d instanceof Ey)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof og)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ag)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Iy)return{fieldPath:u.field.canonicalString(),increment:d.gt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:PP(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function US(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?gr.updateTime(Vr(i.updateTime)):void 0!==i.exists?gr.exists(i.exists):gr.none():gr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,d){let m=null;"setToServerValue"in d?(pt("REQUEST_TIME"===d.setToServerValue),m=new Ey):"appendMissingElements"in d?m=new og(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new ag(d.removeAllFromArray.values||[]):"increment"in d?m=new Iy(u,d.increment):st();const w=er.fromServerFormat(d.fieldPath);return new B0(w,m)}(n,i)):[];var i;if(e.update){const i=tc(n,e.update.name),u=new $i({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Rs((e.updateMask.fieldPaths||[]).map(D=>er.fromServerFormat(D)));return new Ml(i,u,d,t,r)}return new Cy(i,u,t,r)}if(e.delete){const i=tc(n,e.delete);return new Dy(i,t)}if(e.verify){const i=tc(n,e.verify);return new MS(i,t)}return st()}function A1(n,e){return{documents:[VS(n,e.path)]}}function BS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=VS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=VS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(w){if(0!==w.length)return N1(An.create(w,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(w){if(0!==w.length)return w.map(D=>{return{field:Ih((A=D).field),direction:VP(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=FS(n,e.limit);var m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function x1(n){let e=D1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){pt(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const N=M1(A);return N instanceof An&&IS(N)?N.getFilters():[N]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new _y(Ty((N=A).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(A){let N;return N="object"==typeof A?A.value:A,tg(N)?null:N}(t.limit));let w=null;var A;t.startAt&&(w=new Eh((A=t.startAt).values||[],!!A.before));let D=null;return t.endAt&&(D=function(A){return new Eh(A.values||[],!A.before)}(t.endAt)),zM(e,i,d,u,m,"F",w,D)}function M1(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ty(e.unaryFilter.field);return rn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Ty(e.unaryFilter.field);return rn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ty(e.unaryFilter.field);return rn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ty(e.unaryFilter.field);return rn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(n):void 0!==n.fieldFilter?rn.create(Ty((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return An.create(e.compositeFilter.filters.map(t=>M1(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(n):st();var e}function VP(n){return xP[n]}function UP(n){return MP[n]}function BP(n){return NP[n]}function Ih(n){return{fieldPath:n.canonicalString()}}function Ty(n){return er.fromServerFormat(n.fieldPath)}function N1(n){return n instanceof rn?function(e){if("=="===e.op){if(gy(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NAN"}};if(py(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gy(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NOT_NAN"}};if(py(e.value))return{unaryFilter:{field:Ih(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ih(e.field),op:UP(e.op),value:e.value}}}(n):n instanceof An?function(e){const t=e.getFilters().map(r=>N1(r));return 1===t.length?t[0]:{compositeFilter:{op:BP(e.op),filters:t}}}(n):st()}function jP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function R1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Nl{constructor(e,t,r,i,u=gt.min(),d=gt.min(),m=a.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new Nl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Nl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class P1{constructor(e){this.fe=e}}function O1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:FC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:z0(i=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:by(i,u.version.toTimestamp()),createTime:by(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ug(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:ug(e.version)}}var i,u;return r}function FC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ug(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cg(n){const e=new Xn(n.seconds,n.nanoseconds);return gt.fromTimestamp(e)}function lg(n,e){const t=(e.baseMutations||[]).map(u=>US(n.fe,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>US(n.fe,u)),i=Xn.fromMillis(e.localWriteTimeMs);return new NS(e.batchId,i,t,r)}function W0(n){const e=cg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cg(n.lastLimboFreeSnapshotVersion):gt.min();let r;var i;return void 0!==n.query.documents?(pt(1===(i=n.query).documents.length),r=Ps(wy(D1(i.documents[0])))):r=Ps(x1(n.query)),new Nl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,a.fromBase64String(n.resumeToken))}function k1(n,e){const t=ug(e.snapshotVersion),r=ug(e.lastLimboFreeSnapshotVersion);let i;i=SC(e.target)?A1(n.fe,e.target):BS(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ig(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function jS(n){const e=x1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?MC(e,e.limit,"L"):e}function $S(n,e){return new PS(e.largestBatchId,US(n.fe,e.overlayMutation))}function F1(n,e){const t=e.path.lastSegment();return[n,Lr(e.path.popLast()),t]}function L1(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ug(r.readTime),documentKey:Lr(r.documentKey.path),largestBatchId:r.largestBatchId}}class HP{getBundleMetadata(e,t){return V1(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:cg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return V1(e).put({bundleId:(r=t).id,createTime:ug(Vr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return U1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:jS(i.bundledQuery),readTime:cg(i.readTime)};var i})}saveNamedQuery(e,t){return U1(e).put({name:(r=t).name,readTime:ug(Vr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function V1(n){return ui(n,"bundles")}function U1(n){return ui(n,"namedQueries")}class LC{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new LC(e,t.uid||"")}getOverlay(e,t){return K0(e).get(F1(this.userId,t)).next(r=>r?$S(this.serializer,r):null)}getOverlays(e,t){const r=ec();return ie.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,d)=>{const m=new PS(t,d);i.push(this.we(e,m))}),ie.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(d=>i.add(Lr(d.getCollectionPath())));const u=[];return i.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(K0(e).J("collectionPathOverlayIndex",m))}),ie.waitFor(u)}getOverlaysForCollection(e,t,r){const i=ec(),u=Lr(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return K0(e).j("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const D=$S(this.serializer,w);i.set(D.getKey(),D)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=ec();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return K0(e).X({index:"collectionGroupOverlayIndex",range:m},(w,D,A)=>{const N=$S(this.serializer,D);u.size()<i||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):A.done()}).next(()=>u)}we(e,t){return K0(e).put(function(r,i,u){const[d,m,w]=F1(i,u.mutation.key);return{userId:i,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Z0(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function K0(n){return ui(n,"documentOverlays")}class dg{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(g(e.integerValue));else if("doubleValue"in e){const r=g(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Dl(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(_(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?my(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):st()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ze.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function GP(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function B1(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=GP(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}dg.Ve=new dg;class zP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=B1(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=B1(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class qP{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class ZP{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Y0{constructor(){this.je=new zP,this.ze=new qP(this.je),this.We=new ZP(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class hg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hg(this.indexId,this.documentKey,this.arrayValue,r)}}function Ch(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=j1(n.arrayValue,e.arrayValue),0!==t?t:(t=j1(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function j1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class WP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){pt(e.collectionGroup===this.collectionId);const t=vh(e);if(void 0!==t&&!this.en(t))return!1;const r=Ju(e);let i=0,u=0;for(;i<r.length&&this.en(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ze){const d=r[i];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[u++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(u>=this.Ye.length||!this.sn(this.Ye[u++],d))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function $1(n){var e,t;if(pt(n instanceof rn||n instanceof An),n instanceof rn){if(n instanceof $M){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>rn.create(n.field,"==",u)))||[];return An.create(i,"or")}return n}const r=n.filters.map(i=>$1(i));return An.create(r,n.op)}function KP(n){if(0===n.getFilters().length)return[];const e=zS($1(n));return pt(H1(e)),HS(e)||GS(e)?[e]:e.getFilters()}function HS(n){return n instanceof rn}function GS(n){return n instanceof An&&IS(n)}function H1(n){return HS(n)||GS(n)||function(e){if(e instanceof An&&ES(e)){for(const t of e.getFilters())if(!HS(t)&&!GS(t))return!1;return!0}return!1}(n)}function zS(n){if(pt(n instanceof rn||n instanceof An),n instanceof rn)return n;if(1===n.filters.length)return zS(n.filters[0]);const e=n.filters.map(r=>zS(r));let t=An.create(e,n.op);return t=VC(t),H1(t)?t:(pt(t instanceof An),pt(vy(t)),pt(t.filters.length>1),t.filters.reduce((r,i)=>qS(r,i)))}function qS(n,e){let t;return pt(n instanceof rn||n instanceof An),pt(e instanceof rn||e instanceof An),t=n instanceof rn?e instanceof rn?An.create([n,e],"and"):G1(n,e):e instanceof rn?G1(e,n):function(r,i){if(pt(r.filters.length>0&&i.filters.length>0),vy(r)&&vy(i))return UM(r,i.getFilters());const u=ES(r)?r:i,d=ES(r)?i:r,m=u.filters.map(w=>qS(w,d));return An.create(m,"or")}(n,e),VC(t)}function G1(n,e){if(vy(e))return UM(e,n.getFilters());{const t=e.filters.map(r=>qS(n,r));return An.create(t,"or")}}function VC(n){if(pt(n instanceof rn||n instanceof An),n instanceof rn)return n;const e=n.getFilters();if(1===e.length)return VC(e[0]);if(LM(n))return n;const t=e.map(i=>VC(i)),r=[];return t.forEach(i=>{i instanceof rn?r.push(i):i instanceof An&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:An.create(r,n.op)}class YP{constructor(){this.rn=new ZS}addToCollectionParentIndex(e,t){return this.rn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(to.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(to.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class ZS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Zn(Jt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zn(Jt.comparator)).toArray()}}const UC=new Uint8Array(0);class QP{constructor(e,t){this.user=e,this.databaseId=t,this.on=new ZS,this.un=new xl(r=>ig(r),(r,i)=>k0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Lr(i)};return z1(e).put(u)}return ie.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[T0(t),""],!1,!0);return z1(e).j(i).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Ja(d.parent))}return r})}addFieldIndex(e,t){const r=BC(e),i={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete i.indexId;const u=r.add(i);if(t.indexState){const d=J0(e);return u.next(m=>{d.put(L1(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=BC(e),i=J0(e),u=Q0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Q0(e);let i=!0;const u=new Map;return ie.forEach(this.cn(t),d=>this.an(e,d).next(m=>{i&&(i=!!m),u.set(d,m)})).next(()=>{if(i){let d=Zt();const m=[];return ie.forEach(u,(w,D)=>{var A;Le("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(At=>`${At.fieldPath}:${At.kind}`).join(",")}`} to execute ${ig(t)}`);const N=function(At,Ut){const Wt=vh(Ut);if(void 0===Wt)return null;for(const an of AC(At,Wt.fieldPath))switch(an.op){case"array-contains-any":return an.value.arrayValue.values||[];case"array-contains":return[an.value]}return null}(D,w),V=function(At,Ut){const Wt=new Map;for(const an of Ju(Ut))for(const us of AC(At,an.fieldPath))switch(us.op){case"==":case"in":Wt.set(an.fieldPath.canonicalString(),us.value);break;case"not-in":case"!=":return Wt.set(an.fieldPath.canonicalString(),us.value),Array.from(Wt.values())}return null}(D,w),z=function(At,Ut){const Wt=[];let an=!0;for(const us of Ju(Ut)){const Ig=0===us.kind?HM(At,us.fieldPath,At.startAt):GM(At,us.fieldPath,At.startAt);Wt.push(Ig.value),an&&(an=Ig.inclusive)}return new Eh(Wt,an)}(D,w),le=function(At,Ut){const Wt=[];let an=!0;for(const us of Ju(Ut)){const Ig=0===us.kind?GM(At,us.fieldPath,At.endAt):HM(At,us.fieldPath,At.endAt);Wt.push(Ig.value),an&&(an=Ig.inclusive)}return new Eh(Wt,an)}(D,w),Oe=this.hn(w,D,z),ke=this.hn(w,D,le),Je=this.ln(w,D,V),bt=this.fn(w.indexId,N,Oe,z.inclusive,ke,le.inclusive,Je);return ie.forEach(bt,At=>r.H(At,t.limit).next(Ut=>{Ut.forEach(Wt=>{const an=Ze.fromSegments(Wt.documentKey);d.has(an)||(d=d.add(an),m.push(an))})}))}).next(()=>m)}return ie.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:KP(An.create(e.filters,"and")).map(r=>DS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),D=w/(null!=t?t.length:1),A=[];for(let N=0;N<w;++N){const V=t?this.dn(t[N/D]):UC,z=this.wn(e,V,r[N%D],i),le=this._n(e,V,u[N%D],d),Oe=m.map(ke=>this.wn(e,V,ke,!0));A.push(...this.createRange(z,le,Oe))}return A}wn(e,t,r,i){const u=new hg(e,Ze.empty(),t,r);return i?u:u.Je()}_n(e,t,r,i){const u=new hg(e,Ze.empty(),t,r);return i?u.Je():u}an(e,t){const r=new WP(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let d=null;for(const m of u)r.tn(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;const i=this.cn(t);return ie.forEach(i,u=>this.an(e,u).next(d=>{d?0!==r&&d.fields.length<function(m){let w=new Zn(er.comparator),D=!1;for(const A of m.filters)for(const N of A.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?D=!0:w=w.add(N.field));for(const A of m.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Y0;for(const i of Ju(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const d=r.He(i.kind);dg.Ve._e(u,d)}return r.Qe()}dn(e){const t=new Y0;return dg.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Y0;return dg.Ve._e(wn(this.databaseId,t),r.He(function(i){const u=Ju(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Y0);let u=0;for(const d of Ju(e)){const m=r[u++];for(const w of i)if(this.yn(t,d.fieldPath)&&Tl(m))i=this.pn(i,d,m);else{const D=w.He(d.kind);dg.Ve._e(m,D)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of i){const w=new Y0;w.seed(m.Qe()),dg.Ve._e(d,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof rn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=BC(e),i=J0(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const d=[];return ie.forEach(u,m=>i.get([m.indexId,this.uid]).next(w=>{d.push(function(D,A){const N=A?new Xp(A.sequenceNumber,new to(cg(A.readTime),new Ze(Ja(A.documentKey)),A.largestBatchId)):Xp.empty(),V=D.fields.map(([z,le])=>new Jp(er.fromServerFormat(z),le));return new Il(D.indexId,D.collectionGroup,V,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Lt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=BC(e),u=J0(e);return this.Tn(e).next(d=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ie.forEach(m,w=>u.put(L1(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(i,u)=>{const d=r.get(i.collectionGroup);return(d?ie.resolve(d):this.getFieldIndexes(e,i.collectionGroup)).next(m=>(r.set(i.collectionGroup,m),ie.forEach(m,w=>this.En(e,i,w).next(D=>{const A=this.An(u,w);return D.isEqual(A)?ie.resolve():this.vn(e,u,w,D,A)}))))})}Rn(e,t,r,i){return Q0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Q0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Q0(e);let u=new Zn(Ch);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(d,m)=>{u=u.add(new hg(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new Zn(Ch);const i=this.mn(t,e);if(null==i)return r;const u=vh(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Tl(d))for(const m of d.arrayValue.values||[])r=r.add(new hg(t.indexId,e.key,this.dn(m),i))}else r=r.add(new hg(t.indexId,e.key,UC,i));return r}vn(e,t,r,i,u){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,D,A,N){const V=m.getIterator(),z=w.getIterator();let le=rg(V),Oe=rg(z);for(;le||Oe;){let ke=!1,Je=!1;if(le&&Oe){const bt=D(le,Oe);bt<0?Je=!0:bt>0&&(ke=!0)}else null!=le?Je=!0:ke=!0;ke?(A(Oe),Oe=rg(z)):Je?(N(le),le=rg(V)):(le=rg(V),Oe=rg(z))}}(i,u,Ch,m=>{d.push(this.Rn(e,t,r,m))},m=>{d.push(this.Pn(e,t,r,m))}),ie.waitFor(d)}Tn(e){let t=1;return J0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Ch(d,m)).filter((d,m,w)=>!m||0!==Ch(d,w[m-1]));const i=[];i.push(e);for(const d of r){const m=Ch(d,e),w=Ch(d,t);if(0===m)i[0]=e.Je();else if(m>0&&w<0)i.push(d),i.push(d.Je());else if(w>0)break}i.push(t);const u=[];for(let d=0;d<i.length;d+=2){if(this.bn(i[d],i[d+1]))return[];u.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,UC,[]],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,UC,[]]))}return u}bn(e,t){return Ch(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(q1)}getMinOffset(e,t){return ie.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||st())).next(q1)}}function z1(n){return ui(n,"collectionParents")}function Q0(n){return ui(n,"indexEntries")}function BC(n){return ui(n,"indexConfiguration")}function J0(n){return ui(n,"indexState")}function q1(n){pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;hy(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new to(e.readTime,e.documentKey,t)}const Z1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class os{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new os(e,os.DEFAULT_COLLECTION_PERCENTILE,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function W1(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:d},(A,N,V)=>(m++,V.delete()));u.push(w.next(()=>{pt(1===m)}));const D=[];for(const A of t.mutations){const N=_C(e,A.key.path,t.batchId);u.push(i.delete(N)),D.push(A.key)}return ie.waitFor(u).next(()=>D)}function jC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}os.DEFAULT_COLLECTION_PERCENTILE=10,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,os.DEFAULT=new os(41943040,os.DEFAULT_COLLECTION_PERCENTILE,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),os.DISABLED=new os(-1,0,0);class $C{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){pt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new $C(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dh(e).X({index:"userMutationsIndex",range:r},(i,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Sy(e),d=Dh(e);return d.add({}).next(m=>{pt("number"==typeof m);const w=new NS(m,t,r,i),D=function(V,z,le){const Oe=le.baseMutations.map(Je=>Z0(V.fe,Je)),ke=le.mutations.map(Je=>Z0(V.fe,Je));return{userId:z,batchId:le.batchId,localWriteTimeMs:le.localWriteTime.toMillis(),baseMutations:Oe,mutations:ke}}(this.serializer,this.userId,w),A=[];let N=new Zn((V,z)=>Lt(V.canonicalString(),z.canonicalString()));for(const V of i){const z=_C(this.userId,V.key.path,m);N=N.add(V.key.path.popLast()),A.push(d.put(D)),A.push(u.put(z,cS))}return N.forEach(V=>{A.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.Vn[m]=w.keys()}),ie.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return Dh(e).get(t).next(r=>r?(pt(r.userId===this.userId),lg(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ie.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Dh(e).X({index:"userMutationsIndex",range:i},(d,m,w)=>{m.userId===this.userId&&(pt(m.batchId>=r),u=lg(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Dh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dh(e).j("userMutationsIndex",t).next(r=>r.map(i=>lg(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ng(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Sy(e).X({range:i},(d,m,w)=>{const[D,A,N]=d,V=Ja(A);if(D===this.userId&&t.path.isEqual(V))return Dh(e).get(N).next(z=>{if(!z)throw st();pt(z.userId===this.userId),u.push(lg(this.serializer,z))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(Lt);const i=[];return t.forEach(u=>{const d=ng(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=Sy(e).X({range:m},(D,A,N)=>{const[V,z,le]=D,Oe=Ja(z);V===this.userId&&u.path.isEqual(Oe)?r=r.add(le):N.done()});i.push(w)}),ie.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=ng(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new Zn(Lt);return Sy(e).X({range:d},(w,D,A)=>{const[N,V,z]=w,le=Ja(V);N===this.userId&&r.isPrefixOf(le)?le.length===i&&(m=m.add(z)):A.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Dh(e).get(u).next(d=>{if(null===d)throw st();pt(d.userId===this.userId),r.push(lg(this.serializer,d))}))}),ie.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return W1(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ie.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Sy(e).X({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Ja(u[1]);i.push(w)}else m.done()}).next(()=>{pt(0===i.length)})})}containsKey(e,t){return K1(e,this.userId,t)}xn(e){return Y1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function K1(n,e,t){const r=ng(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Sy(n).X({range:u,Y:!0},(m,w,D)=>{const[A,N,V]=m;A===e&&N===i&&(d=!0),D.done()}).next(()=>d)}function Dh(n){return ui(n,"mutations")}function Sy(n){return ui(n,"documentMutations")}function Y1(n){return ui(n,"mutationQueues")}class fg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new fg(0)}static Mn(){return new fg(-1)}}class JP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new fg(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>gt.fromTimestamp(new Xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ay(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(pt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Ay(e).X((d,m)=>{const w=W0(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(i++,u.push(this.removeTargetData(e,w)))}).next(()=>ie.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Ay(e).X((r,i)=>{const u=W0(i);t(u)})}$n(e){return Q1(e).get("targetGlobalKey").next(t=>(pt(null!==t),t))}On(e,t){return Q1(e).put("targetGlobalKey",t)}Fn(e,t){return Ay(e).put(k1(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ig(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ay(e).X({range:i,index:"queryTargetsIndex"},(d,m,w)=>{const D=W0(m);k0(t,D.target)&&(u=D,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=bh(e);return t.forEach(d=>{const m=Lr(d.path);i.push(u.put({targetId:r,path:m})),i.push(this.referenceDelegate.addReference(e,r,d))}),ie.waitFor(i)}removeMatchingKeys(e,t,r){const i=bh(e);return ie.forEach(t,u=>{const d=Lr(u.path);return ie.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=bh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=bh(e);let u=Zt();return i.X({range:r,Y:!0},(d,m,w)=>{const D=Ja(d[1]),A=new Ze(D);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Lr(t.path),i=IDBKeyRange.bound([r],[T0(r)],!1,!0);let u=0;return bh(e).X({index:"documentTargetsIndex",Y:!0,range:i},([d,m],w,D)=>{0!==d&&(u++,D.done())}).next(()=>u>0)}le(e,t){return Ay(e).get(t).next(r=>r?W0(r):null)}}function Ay(n){return ui(n,"targets")}function Q1(n){return ui(n,"targetGlobal")}function bh(n){return ui(n,"targetDocuments")}function J1([n,e],[t,r]){const i=Lt(n,t);return 0===i?Lt(e,r):i}class XP{constructor(e){this.Ln=e,this.buffer=new Zn(J1),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();J1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class X1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ao(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Xu(r)}yield t.Qn(3e5)}))}}class eO{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(ji.ct);const r=new XP(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Z1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z1):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,u,d,m,w,D;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),i=this.params.maximumSequenceNumbersToCollect):i=N,d=Date.now(),this.nthSequenceNumber(e,i))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(D=Date.now(),I0()<=za.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${i} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(D-w)+`ms\nTotal Duration: ${D-A}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:N})))}}class tO{constructor(e,t){this.db=e,this.garbageCollector=function eN(n,e){return new eO(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return HC(e,r)}removeReference(e,t,r){return HC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return HC(e,t)}Xn(e,t){return function(r,i){let u=!1;return Y1(r).Z(d=>K1(r,d,i).next(m=>(m&&(u=!0),ie.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Yn(e,(d,m)=>{if(m<=t){const w=this.Xn(e,d).next(D=>{if(!D)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,gt.min()),bh(e).delete([0,Lr(d.path)])))});i.push(w)}}).next(()=>ie.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return HC(e,t)}Yn(e,t){const r=bh(e);let i,u=ji.ct;return r.X({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:D})=>{0===d?(u!==ji.ct&&t(new Ze(Ja(i)),u),u=D,i=w):u=ji.ct}).next(()=>{u!==ji.ct&&t(new Ze(Ja(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function HC(n,e){return bh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Lr(e.path),sequenceNumber:r}));var r}class tN{constructor(){this.changes=new xl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pg(e).put(r)}removeEntry(e,t,r){return pg(e).delete(function(i,u){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],FC(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=tr.newInvalidDocument(t);return pg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(X0(t))},(i,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:tr.newInvalidDocument(t)};return pg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(X0(t))},(i,u)=>{r={document:this.ts(t,u),size:jC(u)}}).next(()=>r)}getEntries(e,t){let r=no();return this.ns(e,t,(i,u)=>{const d=this.ts(i,u);r=r.insert(i,d)}).next(()=>r)}ss(e,t){let r=no(),i=new Bn(Ze.comparator);return this.ns(e,t,(u,d)=>{const m=this.ts(u,d);r=r.insert(u,m),i=i.insert(u,jC(d))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ie.resolve();let i=new Zn(sN);t.forEach(w=>i=i.add(w));const u=IDBKeyRange.bound(X0(i.first()),X0(i.last())),d=i.getIterator();let m=d.getNext();return pg(e).X({index:"documentKeyIndex",range:u},(w,D,A)=>{const N=Ze.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&sN(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,D),m=d.hasNext()?d.getNext():null),m?A.G(X0(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),FC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pg(e).j(IDBKeyRange.bound(d,m,!0)).next(w=>{let D=no();for(const A of w){const N=this.ts(Ze.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);N.isFoundDocument()&&(L0(t,N)||i.has(N.key))&&(D=D.insert(N.key,N))}return D})}getAllFromCollectionGroup(e,t,r,i){let u=no();const d=iN(t,r),m=iN(t,to.max());return pg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,D,A)=>{const N=this.ts(Ze.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(N.key,N),u.size===i&&A.done()}).next(()=>u)}newChangeBuffer(e){return new rO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return rN(e).get("remoteDocumentGlobalKey").next(t=>(pt(!!t),t))}Zn(e,t){return rN(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function $P(n,e){let t;if(e.document)t=S1(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=cg(e.noDocument.readTime);t=tr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ze.fromSegments(e.unknownDocument.path),i=cg(e.unknownDocument.version);t=tr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Xn(r[0],r[1]);return gt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(gt.min()))return r}return tr.newInvalidDocument(e)}}function nN(n){return new nO(n)}class rO extends tN{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new xl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Zn((u,d)=>Lt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=O1(this.os.serializer,d);i=i.add(u.path.popLast()),r+=jC(w)-m.size,t.push(this.os.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=O1(this.os.serializer,d.convertToNoDocument(gt.min()));t.push(this.os.addEntry(e,u,w))}}),i.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((u,d)=>{this.us.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function rN(n){return ui(n,"remoteDocumentGlobal")}function pg(n){return ui(n,"remoteDocumentsV14")}function X0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function iN(n,e){const t=e.documentKey.path.toArray();return[n,FC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function sN(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Lt(t[u],r[u]),i)return i;return i=Lt(t.length,r.length),i||(i=Lt(t[t.length-2],r[r.length-2]),i||Lt(t[t.length-1],r[r.length-1]))}class iO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class oN{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&j0(r.mutation,i,Rs.empty(),Xn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Zt()){const i=ec();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let d=V0();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=ec();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Zt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,i){let u=no();const d=U0(),m=U0();return t.forEach((w,D)=>{const A=r.get(D.key);i.has(D.key)&&(void 0===A||A.mutation instanceof Ml)?u=u.insert(D.key,D):void 0!==A?(d.set(D.key,A.mutation.getFieldMask()),j0(A.mutation,D,A.mutation.getFieldMask(),Xn.now())):d.set(D.key,Rs.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((D,A)=>d.set(D,A)),t.forEach((D,A)=>{var N;return m.set(D,new iO(A,null!==(N=d.get(D))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=U0();let i=new Bn((d,m)=>d-m),u=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const D=t.get(w);if(null===D)return;let A=r.get(w)||Rs.empty();A=m.applyToLocalView(D,A),r.set(w,A);const N=(i.get(m.batchId)||Zt()).add(w);i=i.insert(m.batchId,N)})}).next(()=>{const d=[],m=i.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),D=w.key,A=w.value,N=JM();A.forEach(V=>{if(!u.has(V)){const z=a1(t.get(V),r.get(V));null!==z&&N.set(V,z),u=u.add(V)}}),d.push(this.documentOverlayCache.saveOverlays(e,D,N))}return ie.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):TS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const d=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ie.resolve(ec());let m=-1,w=u;return d.next(D=>ie.forEach(D,(A,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(A)?ie.resolve():this.remoteDocumentCache.getEntry(e,A).next(V=>{w=w.insert(A,V)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,w,D,Zt())).next(A=>({batchId:m,changes:QM(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=V0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=V0();return this.indexManager.getCollectionParents(e,i).next(d=>ie.forEach(d,m=>{const w=(D=t,A=m.child(i),new Al(A,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(D=>{D.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((m,w)=>{const D=w.getKey();null===u.get(D)&&(u=u.insert(D,tr.newInvalidDocument(D)))});let d=V0();return u.forEach((m,w)=>{const D=i.get(m);void 0!==D&&j0(D.mutation,w,Rs.empty(),Xn.now()),L0(t,w)&&(d=d.insert(m,w))}),d})}}class sO{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ie.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Vr(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:jS(r.bundledQuery),readTime:Vr(r.readTime)}),ie.resolve();var r}}class oO{constructor(){this.overlays=new Bn(Ze.comparator),this.ls=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ec();return ie.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.we(e,t,u)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=ec(),u=t.length+1,d=new Ze(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&w.largestBatchId>r&&i.set(w.getKey(),w)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new Bn((D,A)=>D-A);const d=this.overlays.getIterator();for(;d.hasNext();){const D=d.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let A=u.get(D.largestBatchId);null===A&&(A=ec(),u=u.insert(D.largestBatchId,A)),A.set(D.getKey(),D)}}const m=ec(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,A)=>m.set(D,A)),!(m.size()>=i)););return ie.resolve(m)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const d=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new PS(t,r));let u=this.ls.get(t);void 0===u&&(u=Zt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class WS{constructor(){this.fs=new Zn(bi.ds),this.ws=new Zn(bi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new bi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new bi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ze(new Jt([])),r=new bi(t,e),i=new bi(t,e+1),u=[];return this.ws.forEachInRange([r,i],d=>{this.ys(d),u.push(d.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ze(new Jt([])),r=new bi(t,e),i=new bi(t,e+1);let u=Zt();return this.ws.forEachInRange([r,i],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new bi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class bi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ze.comparator(e.key,t.key)||Lt(e.As,t.As)}static _s(e,t){return Lt(e.As,t.As)||Ze.comparator(e.key,t.key)}}class aO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Zn(bi.ds)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.vs;this.vs++;const d=new NS(u,t,r,i);this.mutationQueue.push(d);for(const m of i)this.Rs=this.Rs.add(new bi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(d)}lookupMutationBatch(e,t){return ie.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),u=i<0?0:i;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bi(t,0),i=new bi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],d=>{const m=this.Ps(d.As);u.push(m)}),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(Lt);return t.forEach(i=>{const u=new bi(i,0),d=new bi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,d],m=>{r=r.add(m.As)})}),ie.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ze.isDocumentKey(u)||(u=u.child(""));const d=new bi(new Ze(u),0);let m=new Zn(Lt);return this.Rs.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===i&&(m=m.add(w.As)),!0)},d),ie.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){pt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ie.forEach(t.mutations,i=>{const u=new bi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new bi(t,0),i=this.Rs.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ie.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uO{constructor(e){this.Ds=e,this.docs=new Bn(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,d=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=no();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():tr.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=no();const d=t.path,m=new Ze(d.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:D,value:{document:A}}=w.getNext();if(!d.isPrefixOf(D.path))break;D.path.length>d.length+1||hy(sS(A),r)<=0||(i.has(A.key)||L0(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,t,r,i){st()}Cs(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cO(this)}getSize(e){return ie.resolve(this.size)}}class cO extends tN{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class lO{constructor(e){this.persistence=e,this.xs=new xl(t=>ig(t),k0),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new WS,this.targetCount=0,this.Ms=fg.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ie.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new fg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Fn(t),ie.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.xs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)}),ie.waitFor(u).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(d=>{u.push(i.markPotentiallyOrphaned(e,d))}),ie.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.ks.containsKey(t))}}class KS{constructor(e,t){this.$s={},this.overlays={},this.Os=new ji(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new lO(this),this.indexManager=new YP,this.remoteDocumentCache=new uO(r=>this.referenceDelegate.Ls(r)),this.serializer=new P1(t),this.qs=new sO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new aO(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new dO(this.Os.next());return this.referenceDelegate.Us(),r(i).next(u=>this.referenceDelegate.Ks(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Gs(e,t){return ie.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class dO extends gC{constructor(e){super(),this.currentSequenceNumber=e}}class GC{constructor(e){this.persistence=e,this.Qs=new WS,this.js=null}static zs(e){return new GC(e)}get Ws(){if(this.js)return this.js;throw st()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Ws,r=>{const i=Ze.fromPath(r);return this.Hs(e,i).next(u=>{u||t.removeEntry(i,gt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ie.or([()=>ie.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class hO{constructor(e){this.serializer=e}O(e,t,r,i){const u=new S0("createOrUpgrade",t);var m;r<1&&i>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uS,{unique:!0}),m.createObjectStore("documentMutations"),aN(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=ie.resolve();return r<3&&i>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),aN(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(u))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").j().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uS,{unique:!0});const A=w.store("mutations"),N=D.map(V=>A.put(V));return ie.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(d=d.next(()=>this.Ys(u))),r<6&&i>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&i>=7&&(d=d.next(()=>this.Zs(u))),r<8&&i>=8&&(d=d.next(()=>this.ti(e,u))),r<9&&i>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(d=d.next(()=>this.ei(u))),r<11&&i>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:N0});w.createIndex("collectionPathOverlayIndex",pS,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",gS,{unique:!1})}(e)})),r<13&&i>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:lS});w.createIndex("documentKeyIndex",dS),w.createIndex("collectionGroupIndex",vC)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>this.si(e,u))),r<15&&i>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:IC}).createIndex("sequenceNumberIndex",M0,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:MM}).createIndex("documentKeyIndex",CC,{unique:!1})}(e))),d}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=jC(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ie.forEach(i,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",d).next(m=>ie.forEach(m,w=>{pt(w.userId===u.userId);const D=lg(this.serializer,w);return W1(e,u.userId,D).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.X((d,m)=>{const w=new Jt(d),D=[0,Lr(w)];u.push(t.get(D).next(A=>A?ie.resolve():t.put({targetId:0,path:Lr(w),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ie.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:fS});const r=t.store("collectionParents"),i=new ZS,u=d=>{if(i.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:Lr(w)})}};return t.store("remoteDocuments").X({Y:!0},(d,m)=>{const w=new Jt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([d,m,w],D)=>{const A=Ja(m);return u(A.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const u=W0(i),d=k1(this.serializer,u);return t.put(d)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(D=d,D.document?new Ze(Jt.fromString(D.document.name).popFirst(5)):D.noDocument?Ze.fromSegments(D.noDocument.path):D.unknownDocument?Ze.fromSegments(D.unknownDocument.path):st()).path.toArray();var D;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(m.put(A))}).next(()=>ie.waitFor(i))}si(e,t){const r=t.store("mutations"),i=nN(this.serializer),u=new KS(GC.zs,this.serializer.fe);return r.j().next(d=>{const m=new Map;return d.forEach(w=>{var D;let A=null!==(D=m.get(w.userId))&&void 0!==D?D:Zt();lg(this.serializer,w).keys().forEach(N=>A=A.add(N)),m.set(w.userId,A)}),ie.forEach(m,(w,D)=>{const A=new In(D),N=LC.de(this.serializer,A),V=u.getIndexManager(A),z=$C.de(A,this.serializer,V,u.referenceDelegate);return new oN(i,z,N,V).recalculateAndSaveOverlaysForDocumentKeys(new TC(t,ji.ct),w).next()})})}}function aN(n){n.createObjectStore("targetDocuments",{keyPath:EC}).createIndex("documentTargetsIndex",hS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wC,{unique:!0}),n.createObjectStore("targetGlobal")}const YS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QS{constructor(e,t,r,i,u,d,m,w,D,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=d,this.document=m,this.ri=D,this.oi=A,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=V=>Promise.resolve(),!QS.D())throw new be(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tO(this,i),this.di=t+"main",this.serializer=new P1(w),this.wi=new ra(this.di,this.ui,new hO(this.serializer)),this.Bs=new JP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nN(this.serializer),this.qs=new HP,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===A&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(ce.FAILED_PRECONDITION,YS);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ji(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ie.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Ao(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return ew(e).get("owner").next(t=>ie.resolve(this.Ri(t)))}Pi(e){return qC(e).delete(this.clientId)}bi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ui(r,"clientMetadata");return i.j().next(u=>{const d=e.Si(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return ie.forEach(m,w=>i.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ie.resolve(!0):ew(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new be(ce.FAILED_PRECONDITION,YS);return!1}}return!(!this.networkEnabled||!this.inForeground)||qC(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,m=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new TC(t,ji.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>qC(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return $C.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new QP(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return LC.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(d=this.ui)?yS:14===d?bC:13===d?DC:12===d?NM:11===d?mS:void st();var d;let m;return this.wi.runTransaction(e,i,u,w=>(m=new TC(w,this.Os?this.Os.next():ji.ct),"readwrite-primary"===t?this.Ti(m).next(D=>!!D||this.Ei(m)).next(D=>{if(!D)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new be(ce.FAILED_PRECONDITION,pC);return r(m)}).next(D=>this.vi(m).next(()=>D)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return ew(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(ce.FAILED_PRECONDITION,YS)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ew(e).put("owner",t)}static D(){return ra.D()}Ai(e){const t=ew(e);return t.get("owner").next(r=>this.Ri(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,tn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ew(n){return ui(n,"owner")}function qC(n){return ui(n,"clientMetadata")}function JS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class XS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Zt(),i=Zt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new XS(e,t.fromCache,r,i)}}class uN{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(u=>u||this.Gi(e,t,i,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(qM(t))return ie.resolve(null);let r=Ps(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=MC(t,null,"F"),r=Ps(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Zt(...u);return this.Ui.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const D=this.ji(t,m);return this.zi(t,D,d,w.readTime)?this.Ki(e,MC(t,null,"F")):this.Wi(e,D,t,w)}))})))}Gi(e,t,r,i){return qM(t)||i.isEqual(gt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const d=this.ji(t,u);return this.zi(t,d,r,i)?this.Qi(e,t):(I0()<=za.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),AS(t)),this.Wi(e,d,t,fC(i,-1)))})}ji(e,t){let r=new Zn(KM(e));return t.forEach((i,u)=>{L0(e,u)&&(r=r.add(u))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Qi(e,t){return I0()<=za.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",AS(t)),this.Ui.getDocumentsMatchingQuery(e,t,to.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class fO{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Bn(Lt),this.Yi=new xl(u=>ig(u),k0),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oN(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function cN(n,e,t,r){return new fO(n,e,t,r)}function lN(n,e){return eA.apply(this,arguments)}function eA(){return eA=(0,Ie.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Zt();for(const D of i){d.push(D.batchId);for(const A of D.mutations)w=w.add(A.key)}for(const D of u){m.push(D.batchId);for(const A of D.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(D=>({er:D,removedBatchIds:d,addedBatchIds:m}))})})}),eA.apply(this,arguments)}function pO(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,D){const A=w.batch,N=A.keys();let V=ie.resolve();return N.forEach(z=>{V=V.next(()=>D.getEntry(m,z)).next(le=>{const Oe=w.docVersions.get(z);pt(null!==Oe),le.version.compareTo(Oe)<0&&(A.applyToRemoteDocument(le,w),le.isValidDocument()&&(le.setReadTime(w.commitVersion),D.addEntry(le)))})}),V.next(()=>d.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Zt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function dN(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function gO(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const m=[];e.targetChanges.forEach((A,N)=>{const V=i.get(N);if(!V)return;m.push(t.Bs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,A.addedDocuments,N)));let z=V.withSequenceNumber(u.currentSequenceNumber);var le,Oe,ke;null!==e.targetMismatches.get(N)?z=z.withResumeToken(a.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):A.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(A.resumeToken,r)),i=i.insert(N,z),Oe=z,ke=A,(0===(le=V).resumeToken.approximateByteSize()||Oe.snapshotVersion.toMicroseconds()-le.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,z))});let w=no(),D=Zt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(hN(u,d,e.documentUpdates).next(A=>{w=A.nr,D=A.sr})),!r.isEqual(gt.min())){const A=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return ie.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,D)).next(()=>w)}).then(u=>(t.Ji=i,u))}function hN(n,e,t){let r=Zt(),i=Zt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=no();return t.forEach((m,w)=>{const D=u.get(m);w.isFoundDocument()!==D.isFoundDocument()&&(i=i.add(m)),w.isNoDocument()&&w.version.isEqual(gt.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Le("LocalStore","Ignoring outdated watch update for ",m,". Current version:",D.version," Watch version:",w.version)}),{nr:d,sr:i}})}function mO(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xy(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(u=>u?(i=u,ie.resolve(i)):t.Bs.allocateTargetId(r).next(d=>(i=new Nl(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function My(n,e,t){return tA.apply(this,arguments)}function tA(){return tA=(0,Ie.Z)(function*(n,e,t){const r=Ke(n),i=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Ao(d))throw d;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),tA.apply(this,arguments)}function ZC(n,e,t){const r=Ke(n);let i=gt.min(),u=Zt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,D){const A=Ke(m),N=A.Yi.get(D);return void 0!==N?ie.resolve(A.Ji.get(N)):A.Bs.getTargetData(w,D)}(r,d,Ps(e)).next(m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(d,e,t?i:gt.min(),t?u:Zt())).next(m=>(gN(r,WM(e),m),{documents:m,ir:u})))}function fN(n,e){const t=Ke(n),r=Ke(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(d=>d?d.target:null))}function pN(n,e){const t=Ke(n),r=t.Xi.get(e)||gt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,fC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(gN(t,e,i),i))}function gN(n,e,t){let r=n.Xi.get(e)||gt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function nA(){return nA=(0,Ie.Z)(function*(n,e,t,r){const i=Ke(n);let u=Zt(),d=no();for(const D of t){const A=e.rr(D.metadata.name);D.document&&(u=u.add(A));const N=e.ur(D);N.setReadTime(e.cr(D.metadata.readTime)),d=d.insert(A,N)}const m=i.Zi.newChangeBuffer({trackRemovals:!0}),w=yield xy(i,(D=r,Ps(wy(Jt.fromString(`__bundle__/docs/${D}`)))));var D;return i.persistence.runTransaction("Apply bundle documents","readwrite",D=>hN(D,m,d).next(A=>(m.apply(D),A)).next(A=>i.Bs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>i.Bs.addMatchingKeys(D,u,w.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(D,A.nr,A.sr)).next(()=>A.nr)))}),nA.apply(this,arguments)}function _O(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,Ie.Z)(function*(n,e,t=Zt()){const r=yield xy(n,Ps(jS(e.bundledQuery))),i=Ke(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const d=Vr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i.qs.saveNamedQuery(u,e);const m=r.withResumeToken(a.EMPTY_BYTE_STRING,d);return i.Ji=i.Ji.insert(m.targetId,m),i.Bs.updateTargetData(u,m).next(()=>i.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>i.qs.saveNamedQuery(u,e))})}),rA.apply(this,arguments)}function mN(n,e){return`firestore_clients_${n}_${e}`}function yN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function iA(n,e){return`firestore_targets_${n}_${e}`}class WC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let u,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(u=new be(i.error.code,i.error.message))),d?new WC(e,t,i.state,u):(pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new be(r.error.code,r.error.message))),u?new tw(e,r.state,i):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class KC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=xS();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=fy(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return i?new KC(e,u):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sA{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sA(t.clientId,t.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class oA{constructor(){this.activeTargetIds=xS()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aA{constructor(e,t,r,i,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Bn(Lt),this.started=!1,this.yr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=mN(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new oA),this.Tr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const u=e.getItem(mN(e.persistenceKey,i));if(u){const d=KC.ar(i,u);d&&(e.gr=e.gr.insert(d.clientId,d))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(iA(this.persistenceKey,e));if(r){const i=tw.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(iA(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(u){let d=ji.ct;if(null!=u)try{const m=JSON.parse(u);pt("number"==typeof m),d=m}catch(m){pr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);i!==ji.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new WC(this.currentUser,e,t,r),u=yN(this.persistenceKey,this.currentUser,e);this.setItem(u,i.hr())}Cr(e){const t=yN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=iA(this.persistenceKey,e),u=new tw(e,t,r);this.setItem(i,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return KC.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return WC.ar(new In(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return tw.ar(i,t)}br(e){return sA.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),u=this.Sr(r),d=[],m=[];return u.forEach(w=>{i.has(w)||d.push(w)}),i.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Wr(d,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=xS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class _N{constructor(){this.Hr=new oA,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new oA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vO{Yr(e){}shutdown(){}}class vN{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let YC=null;function uA(){return null===YC?YC=268435456+Math.round(2147483648*Math.random()):YC++,"0x"+YC.toString(16)}const wO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EO{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const as="WebChannelConnection";class IO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,u){const d=uA(),m=this.To(e,t);Le("RestConnection",`Sending RPC '${e}' ${d}:`,m,r);const w={};return this.Eo(w,i,u),this.Ao(e,m,w,r).then(D=>(Le("RestConnection",`Received RPC '${e}' ${d}: `,D),D),D=>{throw Ns("RestConnection",`RPC '${e}' ${d} failed with error: `,D,"url: ",m,"request:",r),D})}vo(e,t,r,i,u,d){return this.Io(e,t,r,i,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+mh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}To(e,t){return`${this.mo}/v1/${t}:${wO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const u=uA();return new Promise((d,m)=>{const w=new So;w.setWithCredentials(!0),w.listenOnce(bM.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case v0.NO_ERROR:const A=w.getResponseJson();Le(as,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(A)),d(A);break;case v0.TIMEOUT:Le(as,`RPC '${e}' ${u} timed out`),m(new be(ce.DEADLINE_EXCEEDED,"Request time out"));break;case v0.HTTP_ERROR:const N=w.getStatus();if(Le(as,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let V=w.getResponseJson();Array.isArray(V)&&(V=V[0]);const z=V?.error;if(z&&z.status&&z.message){const le=function(Oe){const ke=Oe.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ke)>=0?ke:ce.UNKNOWN}(z.status);m(new be(le,z.message))}else m(new be(ce.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new be(ce.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Le(as,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(i);Le(as,`RPC '${e}' ${u} sending request:`,i),w.send(t,"POST",D,r,15)})}Ro(e,t,r){const i=uA(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=WT(),m=KT(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(w.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(w.xmlHttpFactory=new aC({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const A=u.join("");Le(as,`Creating RPC '${e}' stream ${i}: ${A}`,w);const N=d.createWebChannel(A,w);let V=!1,z=!1;const le=new EO({ro:ke=>{z?Le(as,`Not sending because RPC '${e}' stream ${i} is closed:`,ke):(V||(Le(as,`Opening RPC '${e}' stream ${i} transport.`),N.open(),V=!0),Le(as,`RPC '${e}' stream ${i} sending:`,ke),N.send(ke))},oo:()=>N.close()}),Oe=(ke,Je,bt)=>{ke.listen(Je,At=>{try{bt(At)}catch(Ut){setTimeout(()=>{throw Ut},0)}})};return Oe(N,E0.EventType.OPEN,()=>{z||Le(as,`RPC '${e}' stream ${i} transport opened.`)}),Oe(N,E0.EventType.CLOSE,()=>{z||(z=!0,Le(as,`RPC '${e}' stream ${i} transport closed`),le.wo())}),Oe(N,E0.EventType.ERROR,ke=>{z||(z=!0,Ns(as,`RPC '${e}' stream ${i} transport errored:`,ke),le.wo(new be(ce.UNAVAILABLE,"The operation could not be completed")))}),Oe(N,E0.EventType.MESSAGE,ke=>{var Je;if(!z){const bt=ke.data[0];pt(!!bt);const At=bt,Ut=At.error||(null===(Je=At[0])||void 0===Je?void 0:Je.error);if(Ut){Le(as,`RPC '${e}' stream ${i} received error:`,Ut);const Wt=Ut.status;let an=function(Ig){const JR=qr[Ig];if(void 0!==JR)return f1(JR)}(Wt),us=Ut.message;void 0===an&&(an=ce.INTERNAL,us="Unknown error status: "+Wt+" with message "+Ut.message),z=!0,le.wo(new be(an,us)),N.close()}else Le(as,`RPC '${e}' stream ${i} received:`,bt),le._o(bt)}}),Oe(m,YT.STAT_EVENT,ke=>{ke.stat===w0.PROXY?Le(as,`RPC '${e}' stream ${i} detected buffering proxy`):ke.stat===w0.NOPROXY&&Le(as,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{le.fo()},0),le}}function wN(){return typeof window<"u"?window:null}function QC(){return typeof document<"u"?document:null}function nw(n){return new RP(n,!0)}class cA{constructor(e,t,r=1e3,i=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class EN{constructor(e,t,r,i,u,d,m,w){this.ii=e,this.$o=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new cA(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ie.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ie.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new be(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,Ie.Z)(function*(){e.state=0,e.start()}))}tu(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CO extends EN{constructor(e,t,r,i,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,d),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function kP(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:st(),i=e.targetChange.targetIds||[],u=function(w,D){return w.useProto3Json?(pt(void 0===D||"string"==typeof D),a.fromBase64String(D||"")):(pt(void 0===D||D instanceof Uint8Array),a.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const D=void 0===w.code?ce.UNKNOWN:f1(w.code);return new be(D,w.message||"")}(d);t=new _1(r,i,u,m||null)}else if("documentChange"in e){const r=e.documentChange,i=tc(n,r.document.name),u=Vr(r.document.updateTime),d=r.document.createTime?Vr(r.document.createTime):gt.min(),m=new $i({mapValue:{fields:r.document.fields}}),w=tr.newFoundDocument(i,u,d,m);t=new kC(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,i=tc(n,r.document),u=r.readTime?Vr(r.readTime):gt.min(),d=tr.newNoDocument(i,u);t=new kC([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,i=tc(n,r.document);t=new kC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,{count:i=0,unchangedNames:u}=r,d=new TP(i,u);t=new y1(r.targetId,d)}}var w;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return gt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?gt.min():u.readTime?Vr(u.readTime):gt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=q0(this.serializer),t.addTarget=function(i,u){let d;const m=u.target;if(d=SC(m)?{documents:A1(i,m)}:{query:BS(i,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=I1(i,u.resumeToken);const w=FS(i,u.expectedCount);null!==w&&(d.expectedCount=w)}else if(u.snapshotVersion.compareTo(gt.min())>0){d.readTime=by(i,u.snapshotVersion.toTimestamp());const w=FS(i,u.expectedCount);null!==w&&(d.expectedCount=w)}return d}(this.serializer,e);const r=function LP(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=q0(this.serializer),t.removeTarget=e,this.Wo(t)}}class DO extends EN{constructor(e,t,r,i,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,d),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function FP(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(r,i){let u=Vr(r.updateTime?r.updateTime:i);return u.isEqual(gt.min())&&(u=Vr(i)),new IP(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Vr(e.commitTime);return this.listener.cu(r,t)}return pt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=q0(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Z0(this.serializer,r))};this.Wo(t)}}class bO extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.Io(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new be(ce.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.vo(e,t,r,u,d,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(ce.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class SO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(pr(t),this.mu=!1):Le("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class AO{constructor(e,t,r,i,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,Ie.Z)(function*(){var w;Th(d)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,Ie.Z)(function*(D){const A=Ke(D);A.vu.add(4),yield Ny(A),A.bu.set("Unknown"),A.vu.delete(4),yield rw(A)}),function(D){return w.apply(this,arguments)})(d))}))}),this.bu=new SO(r,i)}}function rw(n){return dA.apply(this,arguments)}function dA(){return dA=(0,Ie.Z)(function*(n){if(Th(n))for(const e of n.Ru)yield e(!0)}),dA.apply(this,arguments)}function Ny(n){return hA.apply(this,arguments)}function hA(){return hA=(0,Ie.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),hA.apply(this,arguments)}function JC(n,e){const t=Ke(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),gA(t)?pA(t):Py(t).Ko()&&fA(t,e))}function iw(n,e){const t=Ke(n),r=Py(t);t.Au.delete(e),r.Ko()&&IN(t,e),0===t.Au.size&&(r.Ko()?r.jo():Th(t)&&t.bu.set("Unknown"))}function fA(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(gt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Py(n).su(e)}function IN(n,e){n.Vu.qt(e),Py(n).iu(e)}function pA(n){n.Vu=new AP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Py(n).start(),n.bu.gu()}function gA(n){return Th(n)&&!Py(n).Uo()&&n.Au.size>0}function Th(n){return 0===Ke(n).vu.size}function CN(n){n.Vu=void 0}function xO(n){return mA.apply(this,arguments)}function mA(){return mA=(0,Ie.Z)(function*(n){n.Au.forEach((e,t)=>{fA(n,e)})}),mA.apply(this,arguments)}function MO(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,Ie.Z)(function*(n,e){CN(n),gA(n)?(n.bu.Iu(e),pA(n)):n.bu.set("Unknown")}),yA.apply(this,arguments)}function NO(n,e,t){return _A.apply(this,arguments)}function _A(){return _A=(0,Ie.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof _1&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(i,u){const d=u.cause;for(const m of u.targetIds)i.Au.has(m)&&(yield i.remoteSyncer.rejectListen(m,d),i.Au.delete(m),i.Vu.removeTarget(m))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield XC(n,r)}else if(e instanceof kC?n.Vu.Ht(e):e instanceof y1?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(gt.min()))try{const r=yield dN(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const d=i.Vu.ce(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const D=i.Au.get(w);D&&i.Au.set(w,D.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach((m,w)=>{const D=i.Au.get(m);if(!D)return;i.Au.set(m,D.withResumeToken(a.EMPTY_BYTE_STRING,D.snapshotVersion)),IN(i,m);const A=new Nl(D.target,m,w,D.sequenceNumber);fA(i,A)}),i.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield XC(n,r)}var r}),_A.apply(this,arguments)}function XC(n,e,t){return vA.apply(this,arguments)}function vA(){return vA=(0,Ie.Z)(function*(n,e,t){if(!Ao(e))throw e;n.vu.add(1),yield Ny(n),n.bu.set("Offline"),t||(t=()=>dN(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield rw(n)}))}),vA.apply(this,arguments)}function DN(n,e){return e().catch(t=>XC(n,t,e))}function Ry(n){return wA.apply(this,arguments)}function wA(){return wA=(0,Ie.Z)(function*(n){const e=Ke(n),t=Sh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;RO(e);)try{const i=yield mO(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,PO(e,i)}catch(i){yield XC(e,i)}bN(e)&&TN(e)}),wA.apply(this,arguments)}function RO(n){return Th(n)&&n.Eu.length<10}function PO(n,e){n.Eu.push(e);const t=Sh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function bN(n){return Th(n)&&!Sh(n).Uo()&&n.Eu.length>0}function TN(n){Sh(n).start()}function OO(n){return EA.apply(this,arguments)}function EA(){return EA=(0,Ie.Z)(function*(n){Sh(n).hu()}),EA.apply(this,arguments)}function kO(n){return IA.apply(this,arguments)}function IA(){return IA=(0,Ie.Z)(function*(n){const e=Sh(n);for(const t of n.Eu)e.uu(t.mutations)}),IA.apply(this,arguments)}function FO(n,e,t){return CA.apply(this,arguments)}function CA(){return CA=(0,Ie.Z)(function*(n,e,t){const r=n.Eu.shift(),i=RS.from(r,e,t);yield DN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ry(n)}),CA.apply(this,arguments)}function LO(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,Ie.Z)(function*(n,e){var t;e&&Sh(n).ou&&(yield(t=(0,Ie.Z)(function*(r,i){if(h1(u=i.code)&&u!==ce.ABORTED){const d=r.Eu.shift();Sh(r).Qo(),yield DN(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield Ry(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),bN(n)&&TN(n)}),DA.apply(this,arguments)}function SN(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,Ie.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=Th(t);t.vu.add(3),yield Ny(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield rw(t)}),bA.apply(this,arguments)}function TA(n,e){return SA.apply(this,arguments)}function SA(){return SA=(0,Ie.Z)(function*(n,e){const t=Ke(n);e?(t.vu.delete(2),yield rw(t)):e||(t.vu.add(2),yield Ny(t),t.bu.set("Unknown"))}),SA.apply(this,arguments)}function Py(n){return n.Su||(n.Su=function(e,t,r){const i=Ke(e);return i.fu(),new CO(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:xO.bind(null,n),ao:MO.bind(null,n),nu:NO.bind(null,n)}),n.Ru.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Su.Qo(),gA(n)?pA(n):n.bu.set("Unknown")):(yield n.Su.stop(),CN(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Sh(n){return n.Du||(n.Du=function(e,t,r){const i=Ke(e);return i.fu(),new DO(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:OO.bind(null,n),ao:LO.bind(null,n),au:kO.bind(null,n),cu:FO.bind(null,n)}),n.Ru.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Du.Qo(),yield Ry(n)):(yield n.Du.stop(),n.Eu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class AA{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,i,u){const d=Date.now()+r,m=new AA(e,t,d,i,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new be(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oy(n,e){if(pr("AsyncQueue",`${e}: ${n}`),Ao(n))return new be(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class ky{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=V0(),this.sortedSet=new Bn(this.comparator)}static emptySet(e){return new ky(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ky)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ky;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class AN{constructor(){this.Cu=new Bn(Ze.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):st():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Fy{constructor(e,t,r,i,u,d,m,w,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,i,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Fy(e,t,ky.emptySet(t),d,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&F0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class VO{constructor(){this.Nu=void 0,this.listeners=[]}}class UO{constructor(){this.queries=new xl(e=>ZM(e),F0),this.onlineState="Unknown",this.ku=new Set}}function xA(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,Ie.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new VO),i)try{u.Nu=yield t.onListen(r)}catch(d){const m=Oy(d,`Initialization of query '${AS(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&PA(t)}),MA.apply(this,arguments)}function NA(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,Ie.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),RA.apply(this,arguments)}function BO(n,e){const t=Ke(n);let r=!1;for(const i of e){const d=t.queries.get(i.query);if(d){for(const m of d.listeners)m.$u(i)&&(r=!0);d.Nu=i}}r&&PA(t)}function jO(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function PA(n){n.ku.forEach(e=>{e.next()})}class OA{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Fy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Fy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class $O{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class xN{constructor(e){this.serializer=e}rr(e){return tc(this.serializer,e)}ur(e){return e.metadata.exists?S1(this.serializer,e.document,!1):tr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Vr(e)}}class HO{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=MN(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Jt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new xN(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.rr(i.metadata.name);for(const d of i.metadata.queries){const m=(t.get(d)||Zt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function yO(n,e,t,r){return nA.apply(this,arguments)}(e.localStore,new xN(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield _O(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function MN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class NN{constructor(e){this.key=e}}class RN{constructor(e){this.key=e}}class PN{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Zt(),this.mutatedKeys=Zt(),this.tc=KM(e),this.ec=new ky(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new AN,i=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,d=i,m=!1;const w="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,D="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,N)=>{const V=i.get(A),z=L0(this.query,N)?N:null,le=!!V&&this.mutatedKeys.has(V.key),Oe=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let ke=!1;V&&z?V.data.isEqual(z.data)?le!==Oe&&(r.track({type:3,doc:z}),ke=!0):this.rc(V,z)||(r.track({type:2,doc:z}),ke=!0,(w&&this.tc(z,w)>0||D&&this.tc(z,D)<0)&&(m=!0)):!V&&z?(r.track({type:0,doc:z}),ke=!0):V&&!z&&(r.track({type:1,doc:V}),ke=!0,(w||D)&&(m=!0)),ke&&(z?(d=d.add(z),u=Oe?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{ec:d,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((D,A)=>function(N,V){const z=le=>{switch(le){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return z(N)-z(V)}(D.type,A.type)||this.tc(D.doc,A.doc)),this.oc(r);const d=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,w=m!==this.Xu;return this.Xu=m,0!==u.length||w?{snapshot:new Fy(this.query,e.ec,i,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:d}:{cc:d}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new AN,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Zt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new RN(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new NN(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Zt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Fy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class GO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class zO{constructor(e){this.key=e,this.fc=!1}}class qO{constructor(e,t,r,i,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.dc={},this.wc=new xl(m=>ZM(m),F0),this._c=new Map,this.mc=new Set,this.gc=new Bn(Ze.comparator),this.yc=new Map,this.Ic=new WS,this.Tc={},this.Ec=new Map,this.Ac=fg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function ZO(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,Ie.Z)(function*(n,e){const t=ix(n);let r,i;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.lc();else{const d=yield xy(t.localStore,Ps(e)),m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield FA(t,e,r,"current"===m,d.resumeToken),t.isPrimaryClient&&JC(t.remoteStore,d)}return i}),kA.apply(this,arguments)}function FA(n,e,t,r,i){return LA.apply(this,arguments)}function LA(){return LA=(0,Ie.Z)(function*(n,e,t,r,i){n.Rc=(N,V,z)=>{return(le=(0,Ie.Z)(function*(Oe,ke,Je,bt){let At=ke.view.sc(Je);At.zi&&(At=yield ZC(Oe.localStore,ke.query,!1).then(({documents:an})=>ke.view.sc(an,At)));const Ut=bt&&bt.targetChanges.get(ke.targetId),Wt=ke.view.applyChanges(At,Oe.isPrimaryClient,Ut);return ZA(Oe,ke.targetId,Wt.cc),Wt.snapshot}),function(Oe,ke,Je,bt){return le.apply(this,arguments)})(n,N,V,z);var le};const u=yield ZC(n.localStore,e,!0),d=new PN(e,u.ir),m=d.sc(u.documents),w=G0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),D=d.applyChanges(m,n.isPrimaryClient,w);ZA(n,t,D.cc);const A=new GO(e,t,d);return n.wc.set(e,A),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),D.snapshot}),LA.apply(this,arguments)}function WO(n,e){return VA.apply(this,arguments)}function VA(){return VA=(0,Ie.Z)(function*(n,e){const t=Ke(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!F0(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield My(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),iw(t.remoteStore,r.targetId),Ly(t,r.targetId)}).catch(Xu))):(Ly(t,r.targetId),yield My(t.localStore,r.targetId,!0))}),VA.apply(this,arguments)}function UA(){return UA=(0,Ie.Z)(function*(n,e,t){const r=sx(n);try{const i=yield function(u,d){const m=Ke(u),w=Xn.now(),D=d.reduce((V,z)=>V.add(z.key),Zt());let A,N;return m.persistence.runTransaction("Locally write mutations","readwrite",V=>{let z=no(),le=Zt();return m.Zi.getEntries(V,D).next(Oe=>{z=Oe,z.forEach((ke,Je)=>{Je.isValidDocument()||(le=le.add(ke))})}).next(()=>m.localDocuments.getOverlayedDocuments(V,z)).next(Oe=>{A=Oe;const ke=[];for(const Je of d){const bt=DP(Je,A.get(Je.key).overlayedDocument);null!=bt&&ke.push(new Ml(Je.key,bt,PM(bt.value.mapValue),gr.exists(!0)))}return m.mutationQueue.addMutationBatch(V,w,ke,d)}).next(Oe=>{N=Oe;const ke=Oe.applyToLocalDocumentSet(A,le);return m.documentOverlayCache.saveOverlays(V,Oe.batchId,ke)})}).then(()=>({batchId:N.batchId,changes:QM(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,d,m){let w=u.Tc[u.currentUser.toKey()];w||(w=new Bn(Lt)),w=w.insert(d,m),u.Tc[u.currentUser.toKey()]=w}(r,i.batchId,t),yield Rl(r,i.changes),yield Ry(r.remoteStore)}catch(i){const u=Oy(i,"Failed to persist write");t.reject(u)}}),UA.apply(this,arguments)}function ON(n,e){return BA.apply(this,arguments)}function BA(){return BA=(0,Ie.Z)(function*(n,e){const t=Ke(n);try{const r=yield gO(t.localStore,e);e.targetChanges.forEach((i,u)=>{const d=t.yc.get(u);d&&(pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.fc=!0:i.modifiedDocuments.size>0?pt(d.fc):i.removedDocuments.size>0&&(pt(d.fc),d.fc=!1))}),yield Rl(t,r,e)}catch(r){yield Xu(r)}}),BA.apply(this,arguments)}function kN(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((u,d)=>{const m=d.view.Mu(e);m.snapshot&&i.push(m.snapshot)}),function(u,d){const m=Ke(u);m.onlineState=d;let w=!1;m.queries.forEach((D,A)=>{for(const N of A.listeners)N.Mu(d)&&(w=!0)}),w&&PA(m)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function YO(n,e,t){return jA.apply(this,arguments)}function jA(){return jA=(0,Ie.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),u=i&&i.key;if(u){let d=new Bn(Ze.comparator);d=d.insert(u,tr.newNoDocument(u,gt.min()));const m=Zt().add(u),w=new H0(gt.min(),new Map,new Bn(Lt),d,m);yield ON(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),WA(r)}else yield My(r.localStore,e,!1).then(()=>Ly(r,e,t)).catch(Xu)}),jA.apply(this,arguments)}function QO(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,Ie.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=yield pO(t.localStore,e);qA(t,r,null),zA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Rl(t,i)}catch(i){yield Xu(i)}}),$A.apply(this,arguments)}function JO(n,e,t){return HA.apply(this,arguments)}function HA(){return HA=(0,Ie.Z)(function*(n,e,t){const r=Ke(n);try{const i=yield function(u,d){const m=Ke(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return m.mutationQueue.lookupMutationBatch(w,d).next(A=>(pt(null!==A),D=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,D,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>m.localDocuments.getDocuments(w,D))})}(r.localStore,e);qA(r,e,t),zA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Rl(r,i)}catch(i){yield Xu(i)}}),HA.apply(this,arguments)}function GA(){return GA=(0,Ie.Z)(function*(n,e){const t=Ke(n);Th(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ke(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Oy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),GA.apply(this,arguments)}function zA(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function qA(n,e,t){const r=Ke(n);let i=r.Tc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Ly(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||FN(n,r)})}function FN(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(iw(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),WA(n))}function ZA(n,e,t){for(const r of t)r instanceof NN?(n.Ic.addReference(r.key,e),ek(n,r)):r instanceof RN?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||FN(n,r.key)):st()}function ek(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.mc.add(r),WA(n))}function WA(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ze(Jt.fromString(e)),r=n.Ac.next();n.yc.set(r,new zO(t)),n.gc=n.gc.insert(t,r),JC(n.remoteStore,new Nl(Ps(wy(t.path)),r,"TargetPurposeLimboResolution",ji.ct))}}function Rl(n,e,t){return KA.apply(this,arguments)}function KA(){return KA=(0,Ie.Z)(function*(n,e,t){const r=Ke(n),i=[],u=[],d=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,w)=>{d.push(r.Rc(w,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,D?.fromCache?"not-current":"current"),D){i.push(D);const A=XS.Li(w.targetId,D);u.push(A)}}))}),yield Promise.all(d),r.dc.nu(i),yield(m=(0,Ie.Z)(function*(w,D){const A=Ke(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ie.forEach(D,V=>ie.forEach(V.Fi,z=>A.persistence.referenceDelegate.addReference(N,V.targetId,z)).next(()=>ie.forEach(V.Bi,z=>A.persistence.referenceDelegate.removeReference(N,V.targetId,z)))))}catch(N){if(!Ao(N))throw N;Le("LocalStore","Failed to update sequence numbers: "+N)}for(const N of D){const V=N.targetId;if(!N.fromCache){const z=A.Ji.get(V),Oe=z.withLastLimboFreeSnapshotVersion(z.snapshotVersion);A.Ji=A.Ji.insert(V,Oe)}}}),function(w,D){return m.apply(this,arguments)})(r.localStore,u))}),KA.apply(this,arguments)}function tk(n,e){return YA.apply(this,arguments)}function YA(){return YA=(0,Ie.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield lN(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(d=>{d.forEach(m=>{m.reject(new be(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Rl(t,r.er)}var i}),YA.apply(this,arguments)}function nk(n,e){const t=Ke(n),r=t.yc.get(e);if(r&&r.fc)return Zt().add(r.key);{let i=Zt();const u=t._c.get(e);if(!u)return i;for(const d of u){const m=t.wc.get(d);i=i.unionWith(m.view.nc)}return i}}function rk(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,Ie.Z)(function*(n,e){const t=Ke(n),r=yield ZC(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&ZA(t,e.targetId,i.cc),i}),QA.apply(this,arguments)}function ik(n,e){return JA.apply(this,arguments)}function JA(){return JA=(0,Ie.Z)(function*(n,e){const t=Ke(n);return pN(t.localStore,e).then(r=>Rl(t,r))}),JA.apply(this,arguments)}function sk(n,e,t,r){return XA.apply(this,arguments)}function XA(){return XA=(0,Ie.Z)(function*(n,e,t,r){const i=Ke(n),u=yield function(d,m){const w=Ke(d),D=Ke(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>D.Sn(A,m).next(N=>N?w.localDocuments.getDocuments(A,N):ie.resolve(null)))}(i.localStore,e);var m;null!==u?("pending"===t?yield Ry(i.remoteStore):"acknowledged"===t||"rejected"===t?(qA(i,e,r||null),zA(i,e),m=e,Ke(Ke(i.localStore).mutationQueue).Cn(m)):st(),yield Rl(i,u)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),XA.apply(this,arguments)}function ex(){return ex=(0,Ie.Z)(function*(n,e){const t=Ke(n);if(ix(t),sx(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield LN(t,r.toArray());t.vc=!0,yield TA(t.remoteStore,!0);for(const u of i)JC(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(Ly(t,d),My(t.localStore,d,!0))),iw(t.remoteStore,d)}),yield i,yield LN(t,r),function(u){const d=Ke(u);d.yc.forEach((m,w)=>{iw(d.remoteStore,w)}),d.Ic.Ts(),d.yc=new Map,d.gc=new Bn(Ze.comparator)}(t),t.vc=!1,yield TA(t.remoteStore,!1)}}),ex.apply(this,arguments)}function LN(n,e,t){return tx.apply(this,arguments)}function tx(){return tx=(0,Ie.Z)(function*(n,e,t){const r=Ke(n),i=[],u=[];for(const d of e){let m;const w=r._c.get(d);if(w&&0!==w.length){m=yield xy(r.localStore,Ps(w[0]));for(const D of w){const A=r.wc.get(D),N=yield rk(r,A);N.snapshot&&u.push(N.snapshot)}}else{const D=yield fN(r.localStore,d);m=yield xy(r.localStore,D),yield FA(r,VN(D),d,!1,m.resumeToken)}i.push(m)}return r.dc.nu(u),i}),tx.apply(this,arguments)}function VN(n){return zM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ak(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).$i()}function uk(n,e,t,r){return nx.apply(this,arguments)}function nx(){return nx=(0,Ie.Z)(function*(n,e,t,r){const i=Ke(n);if(i.vc)return void Le("SyncEngine","Ignoring unexpected query state notification.");const u=i._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield pN(i.localStore,WM(u[0])),m=H0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,a.EMPTY_BYTE_STRING);yield Rl(i,d,m);break}case"rejected":yield My(i.localStore,e,!0),Ly(i,e,r);break;default:st()}}),nx.apply(this,arguments)}function ck(n,e,t){return rx.apply(this,arguments)}function rx(){return rx=(0,Ie.Z)(function*(n,e,t){const r=ix(n);if(r.vc){for(const i of e){if(r._c.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const u=yield fN(r.localStore,i),d=yield xy(r.localStore,u);yield FA(r,VN(u),d.targetId,!1,d.resumeToken),JC(r.remoteStore,d)}for(const i of t)r._c.has(i)&&(yield My(r.localStore,i,!1).then(()=>{iw(r.remoteStore,i),Ly(r,i)}).catch(Xu))}}),rx.apply(this,arguments)}function ix(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ON.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YO.bind(null,e),e.dc.nu=BO.bind(null,e.eventManager),e.dc.Pc=jO.bind(null,e.eventManager),e}function sx(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JO.bind(null,e),e}class sw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.serializer=nw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return cN(this.persistence,new uN,e.initialUser,this.serializer)}createPersistence(e){return new KS(GC.zs,this.serializer)}createSharedClientState(e){return new _N}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ox extends sw{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield sx(r.Vc.syncEngine),yield Ry(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return cN(this.persistence,new uN,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new X1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new x0(t,this.persistence);return new yC(e.asyncQueue,r)}createPersistence(e){const t=JS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?os.withCacheSize(this.cacheSizeBytes):os.DEFAULT;return new QS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,wN(),QC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _N}}class UN extends ox{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof aA&&(r.sharedClientState.syncEngine={jr:sk.bind(null,i),zr:uk.bind(null,i),Wr:ck.bind(null,i),$i:ak.bind(null,i),Qr:ik.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,Ie.Z)(function*(d){yield function ok(n,e){return ex.apply(this,arguments)}(r.Vc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=wN();if(!aA.D(t))throw new be(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=JS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new aA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vy{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>kN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=tk.bind(null,r.syncEngine),yield TA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new UO}createDatastore(e){const t=nw(e.databaseInfo.databaseId),r=new IO(e.databaseInfo);return new bO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=m=>kN(this.syncEngine,m,0),d=vN.D()?new vN:new vO,new AO(t,r,i,u,d);var t,r,i,u,d}createSyncEngine(e,t){return function(r,i,u,d,m,w,D){const A=new qO(r,i,u,d,m,w);return D&&(A.vc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=Ke(t);Le("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Ny(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function BN(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class eD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class hk{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Un,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(i);return new $O(JSON.parse(u),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ie.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class fk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new be(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ie.Z)(function*(u,d){const m=Ke(u),w=q0(m.serializer)+"/documents",D={documents:d.map(z=>z0(m.serializer,z))},A=yield m.vo("BatchGetDocuments",w,D,d.length),N=new Map;A.forEach(z=>{const le=function OP(n,e){return"found"in e?function(t,r){pt(!!r.found);const i=tc(t,r.found.name),u=Vr(r.found.updateTime),d=r.found.createTime?Vr(r.found.createTime):gt.min(),m=new $i({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(i,u,d,m)}(n,e):"missing"in e?function(t,r){pt(!!r.missing),pt(!!r.readTime);const i=tc(t,r.missing),u=Vr(r.readTime);return tr.newNoDocument(i,u)}(n,e):st()}(m.serializer,z);N.set(le.key.toString(),le)});const V=[];return d.forEach(z=>{const le=N.get(z.toString());pt(!!le),V.push(le)}),V}),function(u,d){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ze.fromPath(i);e.mutations.push(new MS(u,e.precondition(u)))}),yield(r=(0,Ie.Z)(function*(i,u){const d=Ke(i),m=q0(d.serializer)+"/documents",w={writes:u.map(D=>Z0(d.serializer,D))};yield d.Io("Commit",m,w)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=gt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new be(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(gt.min())?gr.exists(!1):gr.updateTime(t):gr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(gt.min()))throw new be(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gr.updateTime(t)}return gr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pk{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new cA(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ie.Z)(function*(){const t=new fk(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Uc(u)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!tg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!h1(t)}return!1}}class gk{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=In.UNAUTHENTICATED,this.clientId=rS.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ie.Z)(function*(m){Le("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Le("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Oy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function tD(n,e){return ax.apply(this,arguments)}function ax(){return ax=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ie.Z)(function*(u){r.isEqual(u)||(yield lN(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),ax.apply(this,arguments)}function ux(n,e){return cx.apply(this,arguments)}function cx(){return cx=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lx(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>SN(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>SN(e.remoteStore,u)),n._onlineComponents=e}),cx.apply(this,arguments)}function jN(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function lx(n){return dx.apply(this,arguments)}function dx(){return dx=(0,Ie.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Le("FirestoreClient","Using user provided OfflineComponentProvider");try{yield tD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!jN(t))throw t;Ns("Error using user provided cache. Falling back to memory cache: "+t),yield tD(n,new sw)}}else Le("FirestoreClient","Using default OfflineComponentProvider"),yield tD(n,new sw);return n._offlineComponents}),dx.apply(this,arguments)}function nD(n){return hx.apply(this,arguments)}function hx(){return hx=(0,Ie.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Le("FirestoreClient","Using user provided OnlineComponentProvider"),yield ux(n,n._uninitializedComponentsProvider._online)):(Le("FirestoreClient","Using default OnlineComponentProvider"),yield ux(n,new Vy))),n._onlineComponents}),hx.apply(this,arguments)}function $N(n){return lx(n).then(e=>e.persistence)}function rD(n){return lx(n).then(e=>e.localStore)}function HN(n){return nD(n).then(e=>e.remoteStore)}function fx(n){return nD(n).then(e=>e.syncEngine)}function Uy(n){return px.apply(this,arguments)}function px(){return px=(0,Ie.Z)(function*(n){const e=yield nD(n),t=e.eventManager;return t.onListen=ZO.bind(null,e.syncEngine),t.onUnlisten=WO.bind(null,e.syncEngine),t}),px.apply(this,arguments)}function zN(n,e,t={}){const r=new Un;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,u,d,m,w){const D=new eD({next:N=>{u.enqueueAndForget(()=>NA(i,A));const V=N.docs.has(d);!V&&N.fromCache?w.reject(new be(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&N.fromCache&&m&&"server"===m.source?w.reject(new be(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new OA(wy(d.path),D,{includeMetadataChanges:!0,Ku:!0});return xA(i,A)}(yield Uy(n),n.asyncQueue,e,t,r)})),r.promise}function qN(n,e,t={}){const r=new Un;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,u,d,m,w){const D=new eD({next:N=>{u.enqueueAndForget(()=>NA(i,A)),N.fromCache&&"server"===m.source?w.reject(new be(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new OA(d,D,{includeMetadataChanges:!0,Ku:!0});return xA(i,A)}(yield Uy(n),n.asyncQueue,e,t,r)})),r.promise}function ZN(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const WN=new Map;function gx(n,e,t){if(!t)throw new be(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KN(n,e,t,r){if(!0===e&&!0===r)throw new be(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YN(n){if(!Ze.isDocumentKey(n))throw new be(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function QN(n){if(Ze.isDocumentKey(n))throw new be(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=iD(n);throw new be(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function JN(n,e){if(e<=0)throw new be(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class XN{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new be(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new be(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=ZN(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ow{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new be(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new be(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new b0;switch(t.type){case"firstParty":return new tS(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new be(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=WN.get(e);t&&(Le("ComponentProvider","Removing Datastore"),WN.delete(e),t.terminate())}(this),Promise.resolve()}}class nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class Hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class nc extends Hi{constructor(e,t,r){super(e,t,wy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new Ze(e))}withConverter(e){return new nc(this.firestore,e,this._path)}}function tR(n,e,...t){if(n=(0,tn.m9)(n),gx("collection","path",e),n instanceof ow){const r=Jt.fromString(e,...t);return QN(r),new nc(n,null,r)}{if(!(n instanceof nr||n instanceof nc))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return QN(r),new nc(n.firestore,null,r)}}function sD(n,e,...t){if(n=(0,tn.m9)(n),1===arguments.length&&(e=rS.A()),gx("doc","path",e),n instanceof ow){const r=Jt.fromString(e,...t);return YN(r),new nr(n,null,new Ze(r))}{if(!(n instanceof nr||n instanceof nc))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return YN(r),new nr(n.firestore,n instanceof nc?n.converter:null,new Ze(r))}}function nR(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),(n instanceof nr||n instanceof nc)&&(e instanceof nr||e instanceof nc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function mx(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),n instanceof Hi&&e instanceof Hi&&n.firestore===e.firestore&&F0(n._query,e._query)&&n.converter===e.converter}class bk{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new cA(this,"async_queue_retry"),this.Xc=()=>{const t=QC();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=QC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=QC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Un;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Ao(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,pr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=AA.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(i),i}Zc(){this.Wc&&st()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function yx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Tk{constructor(){this._progressObserver={},this._taskCompletionResolver=new Un,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rr extends ow{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bk,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||rR(this),this._firestoreClient.terminate()}}function Ur(n){return n._firestoreClient||rR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rR(n){var e,t,r;const i=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new R(n._databaseId,m,n._persistenceKey,(D=i).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,ZN(D.experimentalLongPollingOptions),D.useFetchStreams));var m,D;n._firestoreClient=new gk(n._authCredentials,n._appCheckCredentials,n._queue,u),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function iR(n,e,t){const r=new Un;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield tD(n,t),yield ux(n,e),r.resolve()}catch(i){const u=i;if(!jN(u))throw u;Ns("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function sR(n){if(n._initialized||n._terminated)throw new be(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class rc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rc(a.fromBase64String(e))}catch(t){throw new be(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new rc(a.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new be(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gg{constructor(e){this._methodName=e}}class oD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const Lk=/^__.*__$/;class Vk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ml(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cy(e,this.data,t,this.fieldTransforms)}}class oR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ml(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class aD{constructor(e,t,r,i,u,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new aD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return lD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(aR(this.ca)&&Lk.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Uk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nw(e)}ya(e,t,r,i=!1){return new aD({ca:e,methodName:t,ga:r,path:er.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mg(n){const e=n._freezeSettings(),t=nw(n._databaseId);return new Uk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uD(n,e,t,r,i,u={}){const d=n.ya(u.merge||u.mergeFields?2:0,e,t,i);Ex("Data must be an object, but it was:",d,r);const m=lR(r,d);let w,D;if(u.merge)w=new Rs(d.fieldMask),D=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const V=cw(e,N,t);if(!d.contains(V))throw new be(ce.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);hR(A,V)||A.push(V)}w=new Rs(A),D=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,D=d.fieldTransforms;return new Vk(new $i(m),w,D)}class uw extends gg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uw}}function uR(n,e,t){return new aD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _x extends gg{_toFieldTransform(e){return new B0(e.path,new Ey)}isEqual(e){return e instanceof _x}}class Bk extends gg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=uR(this,e,!0),r=this.pa.map(u=>yg(u,t)),i=new og(r);return new B0(e.path,i)}isEqual(e){return this===e}}class jk extends gg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=uR(this,e,!0),r=this.pa.map(u=>yg(u,t)),i=new ag(r);return new B0(e.path,i)}isEqual(e){return this===e}}class $k extends gg{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Iy(e.serializer,t1(e.serializer,this.Ia));return new B0(e.path,t)}isEqual(e){return this===e}}function vx(n,e,t,r){const i=n.ya(1,e,t);Ex("Data must be an object, but it was:",i,r);const u=[],d=$i.empty();bl(r,(w,D)=>{const A=cD(e,w,t);D=(0,tn.m9)(D);const N=i.da(A);if(D instanceof uw)u.push(A);else{const V=yg(D,N);null!=V&&(u.push(A),d.set(A,V))}});const m=new Rs(u);return new oR(d,m,i.fieldTransforms)}function wx(n,e,t,r,i,u){const d=n.ya(1,e,t),m=[cw(e,r,t)],w=[i];if(u.length%2!=0)throw new be(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(cw(e,u[V])),w.push(u[V+1]);const D=[],A=$i.empty();for(let V=m.length-1;V>=0;--V)if(!hR(D,m[V])){const z=m[V];let le=w[V];le=(0,tn.m9)(le);const Oe=d.da(z);if(le instanceof uw)D.push(z);else{const ke=yg(le,Oe);null!=ke&&(D.push(z),A.set(z,ke))}}const N=new Rs(D);return new oR(A,N,d.fieldTransforms)}function cR(n,e,t,r=!1){return yg(t,n.ya(r?4:3,e))}function yg(n,e){if(dR(n=(0,tn.m9)(n)))return Ex("Unsupported field value:",e,n),lR(n,e);if(n instanceof gg)return function(t,r){if(!aR(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const d of t){let m=yg(d,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),i.push(m),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,tn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return t1(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Xn.fromDate(t);return{timestampValue:by(r.serializer,i)}}if(t instanceof Xn){const i=new Xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:by(r.serializer,i)}}if(t instanceof oD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof rc)return{bytesValue:I1(r.serializer,t._byteString)};if(t instanceof nr){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:LS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${iD(t)}`)}(n,e)}function lR(n,e){const t={};return vS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bl(n,(r,i)=>{const u=yg(i,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function dR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xn||n instanceof oD||n instanceof rc||n instanceof nr||n instanceof gg)}function Ex(n,e,t){if(!dR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=iD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function cw(n,e,t){if((e=(0,tn.m9)(e))instanceof Pl)return e._internalPath;if("string"==typeof e)return cD(n,e);throw lD("Field path arguments must be of type string or ",n,!1,void 0,t)}const Hk=new RegExp("[~\\*/\\[\\]]");function cD(n,e,t){if(e.search(Hk)>=0)throw lD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pl(...e.split("."))._internalPath}catch{throw lD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lD(n,e,t,r,i){const u=r&&!r.isEmpty(),d=void 0!==i;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${i}`),w+=")"),new be(ce.INVALID_ARGUMENT,m+n+w)}function hR(n,e){return n.some(t=>t.isEqual(e))}class lw{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gk extends lw{data(){return super.data()}}function dD(n,e){return"string"==typeof e?cD(n,e):e instanceof Pl?e._internalPath:e._delegate._internalPath}function fR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new be(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ix{}class dw extends Ix{}function Ah(n,e,...t){let r=[];e instanceof Ix&&r.push(e),r=r.concat(t),function(i){const u=i.filter(m=>m instanceof By).length,d=i.filter(m=>m instanceof hw).length;if(u>1||u>0&&d>0)throw new be(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class hw extends dw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hw(e,t,r)}_apply(e){const t=this._parse(e);return yR(e._query,t),new Hi(e.firestore,e.converter,SS(e._query,t))}_parse(e){const t=mg(e.firestore);return function(i,u,d,m,w,D,A){let N;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new be(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){mR(A,D);const V=[];for(const z of A)V.push(gR(m,i,z));N={arrayValue:{values:V}}}else N=gR(m,i,A)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||mR(A,D),N=cR(d,"where",A,"in"===D||"not-in"===D);return rn.create(w,D,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class By extends Ix{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new By(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:An.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const d=i.getFlattenedFilters();for(const m of d)yR(u,m),u=SS(u,m)}(e._query,t),new Hi(e.firestore,e.converter,SS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Cx extends dw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Cx(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new _y(i,u);return function(m,w){if(null===bS(m)){const D=xC(m);null!==D&&_R(0,D,w.field)}}(r,d),d}(e._query,this._field,this._direction);return new Hi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Al(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class hD extends dw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new hD(e,t,r)}_apply(e){return new Hi(e.firestore,e.converter,MC(e._query,this._limit,this._limitType))}}class fD extends dw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new fD(e,t,r)}_apply(e){const t=pR(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,(i=t,new Al((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class pD extends dw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pD(e,t,r)}_apply(e){const t=pR(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,(i=t,new Al((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function pR(n,e,t,r){if(t[0]=(0,tn.m9)(t[0]),t[0]instanceof lw)return function(i,u,d,m,w){if(!m)throw new be(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const D=[];for(const A of sg(i))if(A.field.isKeyField())D.push(wn(u,m.key));else{const N=m.data.field(A.field);if(E(N))throw new be(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const V=A.field.canonicalString();throw new be(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}D.push(N)}return new Eh(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=mg(n.firestore);return function(u,d,m,w,D,A){const N=u.explicitOrderBy;if(D.length>N.length)throw new be(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let z=0;z<D.length;z++){const le=D[z];if(N[z].field.isKeyField()){if("string"!=typeof le)throw new be(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof le}`);if(!TS(u)&&-1!==le.indexOf("/"))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${le}' contains a slash.`);const Oe=u.path.child(Jt.fromString(le));if(!Ze.isDocumentKey(Oe))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const ke=new Ze(Oe);V.push(wn(d,ke))}else{const Oe=cR(m,w,le);V.push(Oe)}}return new Eh(V,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function gR(n,e,t){if("string"==typeof(t=(0,tn.m9)(t))){if(""===t)throw new be(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TS(e)&&-1!==t.indexOf("/"))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ze.isDocumentKey(r))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wn(n,new Ze(r))}if(t instanceof nr)return wn(n,t._key);throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iD(t)}.`)}function mR(n,e){if(!Array.isArray(n)||0===n.length)throw new be(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yR(n,e){if(e.isInequality()){const r=xC(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new be(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=bS(n);null!==u&&_R(0,i,u)}const t=function(r,i){for(const u of r)for(const d of u.getFlattenedFilters())if(i.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new be(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function _R(n,e,t){if(!t.isEqual(e))throw new be(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Dx{convertValue(e,t="none"){switch(me(e)){case 0:return null;case 1:return e.booleanValue;case 2:return g(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bl(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new oD(g(e.latitude),g(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=C(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(S(e));default:return null}}convertTimestamp(e){const t=h(e);return new Xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);pt(R1(r));const i=new P(r.get(1),r.get(3)),u=new Ze(r.popFirst(5));return i.isEqual(t)||pr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function gD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Xk extends Dx{constructor(e){super(),this.firestore=e}convertBytes(e){return new rc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}class _g{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ol extends lw{constructor(e,t,r,i,u,d){super(e,t,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class fw extends Ol{data(e={}){return super.data(e)}}class xh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _g(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fw(this._firestore,this._userDataWriter,r.key,r,new _g(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new fw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new _g(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const m=new fw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new _g(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),D=u.indexOf(d.doc.key)),{type:tF(d.type),doc:m,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function wR(n,e){return n instanceof Ol&&e instanceof Ol?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xh&&e instanceof xh&&n._firestore===e._firestore&&mx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Mh extends Dx{constructor(e){super(),this.firestore=e}convertBytes(e){return new rc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}function ER(n,e,t){n=sn(n,nr);const r=sn(n.firestore,rr),i=gD(n.converter,e,t);return jy(r,[uD(mg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,gr.none())])}function IR(n,e,t,...r){n=sn(n,nr);const i=sn(n.firestore,rr),u=mg(i);let d;return d="string"==typeof(e=(0,tn.m9)(e))||e instanceof Pl?wx(u,"updateDoc",n._key,e,t,r):vx(u,"updateDoc",n._key,e),jy(i,[d.toMutation(n._key,gr.exists(!0))])}function CR(n,...e){var t,r,i;n=(0,tn.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||yx(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(yx(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(i=N.complete)||void 0===i?void 0:i.bind(N)}let w,D,A;if(n instanceof nr)D=sn(n.firestore,rr),A=wy(n._key.path),w={next:N=>{e[d]&&e[d](bx(D,n,N))},error:e[d+1],complete:e[d+2]};else{const N=sn(n,Hi);D=sn(N.firestore,rr),A=N._query;const V=new Mh(D);w={next:z=>{e[d]&&e[d](new xh(D,V,N,z))},error:e[d+1],complete:e[d+2]},fR(n._query)}return function(N,V,z,le){const Oe=new eD(le),ke=new OA(V,Oe,z);return N.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return xA(yield Uy(N),ke)})),()=>{Oe.Dc(),N.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return NA(yield Uy(N),ke)}))}}(Ur(D),A,m,w)}function jy(n,e){return function(t,r){const i=new Un;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function KO(n,e,t){return UA.apply(this,arguments)}(yield fx(t),r,i)})),i.promise}(Ur(n),e)}function bx(n,e,t){const r=t.docs.get(e._key),i=new Mh(n);return new Ol(n,i,e._key,r,new _g(t.hasPendingWrites,t.fromCache),e.converter)}const vF={maxAttempts:5};class DR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mg(e)}set(e,t,r){this._verifyNotCommitted();const i=Nh(e,this._firestore),u=gD(i.converter,t,r),d=uD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,gr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Nh(e,this._firestore);let d;return d="string"==typeof(t=(0,tn.m9)(t))||t instanceof Pl?wx(this._dataReader,"WriteBatch.update",u._key,t,r,i):vx(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nh(e,this._firestore);return this._mutations=this._mutations.concat(new Dy(t._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nh(n,e){if((n=(0,tn.m9)(n)).firestore!==e)throw new be(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mg(e)}get(e){const t=Nh(e,this._firestore),r=new Xk(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const u=i[0];if(u.isFoundDocument())return new lw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new lw(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=Nh(e,this._firestore),u=gD(i.converter,t,r),d=uD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(e,t,r,...i){const u=Nh(e,this._firestore);let d;return d="string"==typeof(t=(0,tn.m9)(t))||t instanceof Pl?wx(this._dataReader,"Transaction.update",u._key,t,r,i):vx(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Nh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nh(e,this._firestore),r=new Mh(this._firestore);return super.get(e).then(i=>new Ol(this._firestore,r,t._key,i._document,new _g(!1,!1),t.converter))}}function Tx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function TR(){if(typeof Uint8Array>"u")throw new be("unimplemented","Uint8Arrays are not available in this environment.")}function SR(){if(!function o(){return typeof atob<"u"}())throw new be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){mh=al.SDK_VERSION,(0,al._registerComponent)(new pp.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),d=new rr(new eS(t.getProvider("auth-internal")),new nS(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new be(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new P(m.options.projectId,w)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),d._setSettings(i),d},"PUBLIC").setMultipleInstances(!0)),(0,al.registerVersion)(uC,"3.12.0",n),(0,al.registerVersion)(uC,"3.12.0","esm2017")}();class pw{constructor(e){this._delegate=e}static fromBase64String(e){return SR(),new pw(rc.fromBase64String(e))}static fromUint8Array(e){return TR(),new pw(rc.fromUint8Array(e))}toBase64(){return SR(),this._delegate.toBase64()}toUint8Array(){return TR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Sx(n){return function xF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class MF{enableIndexedDbPersistence(e,t){return function Ak(n,e){sR(n=sn(n,rr));const t=Ur(n);if(t._uninitializedComponentsProvider)throw new be(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Ns("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Vy;return iR(t,i,new ox(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function xk(n){sR(n=sn(n,rr));const e=Ur(n);if(e._uninitializedComponentsProvider)throw new be(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Ns("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Vy;return iR(e,r,new UN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Mk(n){if(n._initialized&&!n._terminated)throw new be(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Un;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!ra.D())return Promise.resolve();const i=r+"main";yield ra.delete(i)}),function(r){return t.apply(this,arguments)})(JS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class AR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof P||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ns("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function eR(n,e,t,r={}){var i;const u=(n=sn(n,ow))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Ns("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=In.MOCK_USER;else{d=(0,tn.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new be(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new In(w)}n._authCredentials=new Ya(new D0(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function Rk(n){return function mk(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield $N(n),t=yield HN(n);return e.setNetworkEnabled(!0),function(r){const i=Ke(r);return i.vu.delete(0),rw(i)}(t)}))}(Ur(n=sn(n,rr)))}(this._delegate)}disableNetwork(){return function Pk(n){return function yk(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield $N(n),t=yield HN(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(i){const u=Ke(i);u.vu.add(0),yield Ny(u),u.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ur(n=sn(n,rr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,KN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Nk(n){return function(e){const t=new Un;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function XO(n,e){return GA.apply(this,arguments)}(yield fx(e),t)})),t.promise}(Ur(n=sn(n,rr)))}(this._delegate)}onSnapshotsInSync(e){return function lF(n,e){return function wk(n,e){const t=new eD(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Uy(n),i=t,Ke(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Uy(n),i=t,void Ke(r).ku.delete(i);var r,i}))}}(Ur(n=sn(n,rr)),yx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $y(this,tR(this._delegate,e))}catch(t){throw Os(t,"collection()","Firestore.collection()")}}doc(e){try{return new ia(this,sD(this._delegate,e))}catch(t){throw Os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ks(this,function Dk(n,e){if(n=sn(n,ow),gx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hi(n,null,(t=e,new Al(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function EF(n,e,t){n=sn(n,rr);const r=Object.assign(Object.assign({},vF),t);return function(i){if(i.maxAttempts<1)throw new be(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,d){const m=new Un;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const w=yield function GN(n){return nD(n).then(e=>e.datastore)}(i);new pk(i.asyncQueue,w,d,u,m).run()})),m.promise}(Ur(n),i=>e(new wF(n,i)),r)}(this._delegate,t=>e(new xR(this,t)))}batch(){return Ur(this._delegate),new MR(new DR(this._delegate,e=>jy(this._delegate,e)))}loadBundle(e){return function Ok(n,e){const t=Ur(n=sn(n,rr)),r=new Tk;return function Ek(n,e,t,r){const i=function(u,d){let m;return m="string"==typeof u?p1().encode(u):u,w=function(w,D){if(w instanceof Uint8Array)return BN(w,D);if(w instanceof ArrayBuffer)return BN(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new hk(w,d);var w}(t,nw(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function lk(n,e,t){const r=Ke(n);var i;(i=(0,Ie.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(V,z){const le=Ke(V),Oe=Vr(z.createTime);return le.persistence.runTransaction("hasNewerBundle","readonly",ke=>le.qs.getBundleMetadata(ke,z.id)).then(ke=>!!ke&&ke.createTime.compareTo(Oe)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=w).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(MN(w));const D=new HO(w,u.localStore,d.serializer);let A=yield d.bc();for(;A;){const V=yield D.zu(A);V&&m._updateProgress(V),A=yield d.bc()}const N=yield D.complete();return yield Rl(u,N.Ju,void 0),yield function(V,z){const le=Ke(V);return le.persistence.runTransaction("Save bundle","readwrite",Oe=>le.qs.saveBundleMetadata(Oe,z))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Hu)}catch(w){return Ns("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var V}),function(u,d,m){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield fx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function kk(n,e){return function Ik(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const i=Ke(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.qs.getNamedQuery(u,r))}(yield rD(n),e)}))}(Ur(n=sn(n,rr)),e).then(t=>t?new Hi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ks(this,t):null)}}class mD extends Dx{constructor(e){super(),this.firestore=e}convertBytes(e){return new pw(new rc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ia.forKey(t,this.firestore,null)}}class xR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mD(e)}get(e){const t=wg(e);return this._delegate.get(t).then(r=>new gw(this._firestore,new Ol(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=wg(e);return r?(Tx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=wg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=wg(e);return this._delegate.delete(t),this}}class MR{constructor(e){this._delegate=e}set(e,t,r){const i=wg(e);return r?(Tx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=wg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=wg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new fw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=vg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new vg(e,new mD(e),t),i.set(t,u)),u}}vg.INSTANCES=new WeakMap;class ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ia(t,new nr(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new ia(t,new nr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $y(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $y(this.firestore,tR(this._delegate,e))}catch(t){throw Os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,tn.m9)(e))instanceof nr&&nR(this._delegate,e)}set(e,t){t=Tx("DocumentReference.set",t);try{return t?ER(this._delegate,e,t):ER(this._delegate,e)}catch(r){throw Os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?IR(this._delegate,e):IR(this._delegate,e,t,...r)}catch(i){throw Os(i,"updateDoc()","DocumentReference.update()")}}delete(){return function uF(n){return jy(sn(n.firestore,rr),[new Dy(n._key,gr.none())])}(this._delegate)}onSnapshot(...e){const t=NR(e),r=RR(e,i=>new gw(this.firestore,new Ol(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return CR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function rF(n){n=sn(n,nr);const e=sn(n.firestore,rr),t=Ur(e),r=new Mh(e);return function _k(n,e){const t=new Un;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,u,d){try{const m=yield function(w,D){const A=Ke(w);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,D))}(i,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new be(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Oy(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(i,u,d){return r.apply(this,arguments)})(yield rD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ol(e,r,n._key,i,new _g(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function iF(n){n=sn(n,nr);const e=sn(n.firestore,rr);return zN(Ur(e),n._key,{source:"server"}).then(t=>bx(e,n,t))}(this._delegate):function nF(n){n=sn(n,nr);const e=sn(n.firestore,rr);return zN(Ur(e),n._key).then(t=>bx(e,n,t))}(this._delegate),t.then(r=>new gw(this.firestore,new Ol(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ia(this.firestore,this._delegate.withConverter(e?vg.getInstance(this.firestore,e):null))}}function Os(n,e,t){return n.message=n.message.replace(e,t),n}function NR(n){for(const e of n)if("object"==typeof e&&!Sx(e))return e;return{}}function RR(n,e){var t,r;let i;return i=Sx(n[0])?n[0]:Sx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class gw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wR(this._delegate,e._delegate)}}class mw extends gw{data(e){const t=this._delegate.data(e);return function XT(n,e){n||st()}(void 0!==t),t}}class ks{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mD(e)}where(e,t,r){try{return new ks(this.firestore,Ah(this._delegate,function zk(n,e,t){const r=e,i=dD("where",n);return hw._create(i,r,t)}(e,t,r)))}catch(i){throw Os(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ks(this.firestore,Ah(this._delegate,function qk(n,e="asc"){const t=e,r=dD("orderBy",n);return Cx._create(r,t)}(e,t)))}catch(r){throw Os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ks(this.firestore,Ah(this._delegate,function Zk(n){return JN("limit",n),hD._create("limit",n,"F")}(e)))}catch(t){throw Os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ks(this.firestore,Ah(this._delegate,function Wk(n){return JN("limitToLast",n),hD._create("limitToLast",n,"L")}(e)))}catch(t){throw Os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ks(this.firestore,Ah(this._delegate,function Kk(...n){return fD._create("startAt",n,!0)}(...e)))}catch(t){throw Os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ks(this.firestore,Ah(this._delegate,function Yk(...n){return fD._create("startAfter",n,!1)}(...e)))}catch(t){throw Os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ks(this.firestore,Ah(this._delegate,function Qk(...n){return pD._create("endBefore",n,!1)}(...e)))}catch(t){throw Os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ks(this.firestore,Ah(this._delegate,function Jk(...n){return pD._create("endAt",n,!0)}(...e)))}catch(t){throw Os(t,"endAt()","Query.endAt()")}}isEqual(e){return mx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function oF(n){n=sn(n,Hi);const e=sn(n.firestore,rr),t=Ur(e),r=new Mh(e);return function vk(n,e){const t=new Un;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,u,d){try{const m=yield ZC(i,u,!0),w=new PN(u,m.ir),D=w.sc(m.documents),A=w.applyChanges(D,!1);d.resolve(A.snapshot)}catch(m){const w=Oy(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(i,u,d){return r.apply(this,arguments)})(yield rD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new xh(e,r,n,i))}(this._delegate):"server"===e?.source?function aF(n){n=sn(n,Hi);const e=sn(n.firestore,rr),t=Ur(e),r=new Mh(e);return qN(t,n._query,{source:"server"}).then(i=>new xh(e,r,n,i))}(this._delegate):function sF(n){n=sn(n,Hi);const e=sn(n.firestore,rr),t=Ur(e),r=new Mh(e);return fR(n._query),qN(t,n._query).then(i=>new xh(e,r,n,i))}(this._delegate),t.then(r=>new Ax(this.firestore,new xh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=NR(e),r=RR(e,i=>new Ax(this.firestore,new xh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return CR(this._delegate,t,r)}withConverter(e){return new ks(this.firestore,this._delegate.withConverter(e?vg.getInstance(this.firestore,e):null))}}class RF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ax{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new RF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new mw(this._firestore,r))})}isEqual(e){return wR(this._delegate,e._delegate)}}class $y extends ks{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ia(this.firestore,e):null}doc(e){try{return new ia(this.firestore,void 0===e?sD(this._delegate):sD(this._delegate,e))}catch(t){throw Os(t,"doc()","CollectionReference.doc()")}}add(e){return function cF(n,e){const t=sn(n.firestore,rr),r=sD(n),i=gD(n.converter,e);return jy(t,[uD(mg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,gr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ia(this.firestore,t))}isEqual(e){return nR(this._delegate,e._delegate)}withConverter(e){return new $y(this.firestore,this._delegate.withConverter(e?vg.getInstance(this.firestore,e):null))}}function wg(n){return sn(n,nr)}class xx{constructor(...e){this._delegate=new Pl(...e)}static documentId(){return new xx(er.keyField().canonicalString())}isEqual(e){return(e=(0,tn.m9)(e))instanceof Pl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Eg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function CF(){return new _x("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Eg(e)}static delete(){const e=function IF(){return new uw("deleteField")}();return e._methodName="FieldValue.delete",new Eg(e)}static arrayUnion(...e){const t=function DF(...n){return new Bk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Eg(t)}static arrayRemove(...e){const t=function bF(...n){return new jk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Eg(t)}static increment(e){const t=function TF(n){return new $k("increment",n)}(e);return t._methodName="FieldValue.increment",new Eg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const PF={Firestore:AR,GeoPoint:oD,Timestamp:Xn,Blob:pw,Transaction:xR,WriteBatch:MR,DocumentReference:ia,DocumentSnapshot:gw,Query:ks,QueryDocumentSnapshot:mw,QuerySnapshot:Ax,CollectionReference:$y,FieldPath:xx,FieldValue:Eg,setLogLevel:function NF(n){!function JT(n){na.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function PR(n,e){return function FF(n,e=hT.z){return new Xi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Mx(n,e){return PR(n,e).pipe((0,ft.U)(t=>({payload:t,type:"query"})))}function yD(n,e){return Mx(n,e).pipe(mo(void 0),ah(),(0,ft.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=i.find(A=>A.doc.ref.isEqual(d.ref)),D=t?.payload.docs.find(A=>A.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function OR(n,e,t){return yD(n,t).pipe(ze((r,i)=>function VF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function UF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Nx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Nx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Nx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function vI(n,e=zo.y){return n=n??wI,(0,Ln.e)((t,r)=>{let i,u=!0;t.subscribe((0,Fn.x)(r,d=>{const m=e(d);(u||!n(i,m))&&(u=!1,i=m,r.next(d))}))})}(),(0,ft.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Nx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function kR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function kF(n){(function OF(n,e){n.INTERNAL.registerComponent(new pp.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},PF)))})(n,(e,t)=>new AR(e,t,new MF)),n.registerVersion("@firebase/firestore-compat","0.3.9")}(pT.Z);class FR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=yD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ft.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(mo(void 0),ah(),Nr(([r,i])=>i.length>0||!r),(0,ft.U)(([r,i])=>i),ii.iC)}auditTrail(e){return this.stateChanges(e).pipe(ze((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kR(e);return OR(this.query,t,this.afs.schedulers.outsideAngular).pipe(ii.iC)}valueChanges(e={}){return Mx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ii.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(ii.iC)}add(e){return this.ref.add(e)}doc(e){return new LR(this.ref.doc(e),this.afs)}}class LR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=VR(r,t);return new FR(i,u,this.afs)}snapshotChanges(){return function LF(n,e){return PR(n,e).pipe(mo(void 0),ah(),(0,ft.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ii.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(ii.iC)}}class BF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?yD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Nr(t=>t.length>0),ii.iC):yD(this.query,this.afs.schedulers.outsideAngular).pipe(ii.iC)}auditTrail(e){return this.stateChanges(e).pipe(ze((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kR(e);return OR(this.query,t,this.afs.schedulers.outsideAngular).pipe(ii.iC)}valueChanges(e={}){return Mx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ii.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(ii.iC)}}const jF=new l.OlP("angularfire2.enableFirestorePersistence"),$F=new l.OlP("angularfire2.firestore.persistenceSettings"),HF=new l.OlP("angularfire2.firestore.settings"),GF=new l.OlP("angularfire2.firestore.use-emulator");function VR(n,e=(t=>t)){return{query:e(n),ref:n}}let zF=(()=>{class n{constructor(t,r,i,u,d,m,w,D,A,N,V,z,le,Oe,ke,Je,bt){this.schedulers=w;const At=(0,is.on)(t,m,r),Ut=A;N&&_I(At,m,V,le,Oe,ke,z,Je),[this.firestore,this.persistenceEnabled$]=(0,is.cc)(`${At.name}.firestore`,"AngularFirestore",At.name,()=>{const Wt=m.runOutsideAngular(()=>At.firestore());if(u&&Wt.settings(u),Ut&&Wt.useEmulator(...Ut),i&&!au(d)){const an=()=>{try{return(0,ln.D)(Wt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(us){return typeof console<"u"&&console.warn(us),lt(!1)}};return[Wt,m.runOutsideAngular(an)]}return[Wt,lt(!1)]},[u,Ut,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=VR(i,r),m=this.schedulers.ngZone.run(()=>u);return new FR(m,d,this)}collectionGroup(t,r){const i=r||(d=>d),u=this.firestore.collectionGroup(t);return new BF(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new LR(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(is.Dh),l.LFG(is.xv,8),l.LFG(jF,8),l.LFG(HF,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(ii.HU),l.LFG($F,8),l.LFG(GF,8),l.LFG(ea,8),l.LFG(cv,8),l.LFG(lv,8),l.LFG(dv,8),l.LFG(hv,8),l.LFG(mI,8),l.LFG(yI,8),l.LFG(vp,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_D=(()=>{class n{constructor(t,r){this.firestore=t,this.router=r,this.categoriesNames=[],this.cardsForCompany=[]}getCollection(t){return this.firestore.collection("/collections/collectionsID_111/"+t).valueChanges()}getMultipleCollections(t){return vs(t.map(i=>this.firestore.collection("/collections/collectionsID_111/"+i).valueChanges()))}getDocument(t,r){return this.firestore.collection("/collections/collectionsID_111/"+t).doc(r).valueChanges()}addDocument(t,r,i){const u=i;return this.firestore.collection("/collections/collectionsID_111/"+t).doc(u).set(r)}updateDocument(t,r,i){return this.firestore.collection("/collections/collectionsID_111/"+t).doc(r).update(i)}deleteDocument(t,r){return this.firestore.collection("/collections/collectionsID_111/"+t).doc(r).delete()}getDocumentFromAnyCollection(t,r){return v_(r.map(u=>this.firestore.collection("/collections/collectionsID_111/"+u).doc(t).get().pipe((0,ft.U)(d=>d.exists?{collection:u,data:d.data()}:null)))).pipe((0,ft.U)(u=>u.find(d=>null!==d)||null))}onCompanyPage(t){this.router.navigate(["/company-page"],{fragment:"new",queryParams:{name:t.companyName,mobile:t.companyMobileNumber,categorie:t.companyCategorie,govid:t.companyGovID,idfield:t.idField}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(zF),l.LFG(en))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qF(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Company Name is required"),l.qZA())}function ZF(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,qF,2,0,"div",5),l.qZA()),2&n){const t=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=t.companyForm.get("companyName"))||null==r.errors?null:r.errors.required)}}function WF(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Company Name is required"),l.qZA())}function KF(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,WF,2,0,"div",5),l.qZA()),2&n){const t=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=t.companyForm.get("companyID"))||null==r.errors?null:r.errors.required)}}function YF(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Company Category is required"),l.qZA())}function QF(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,YF,2,0,"div",5),l.qZA()),2&n){const t=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=t.companyForm.get("companyCategory"))||null==r.errors?null:r.errors.required)}}function JF(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Company Email is required"),l.qZA())}function XF(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Invalid email address"),l.qZA())}function eL(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,JF,2,0,"div",5),l.YNc(2,XF,2,0,"div",5),l.qZA()),2&n){const t=l.oxw();let r,i;l.xp6(1),l.Q6J("ngIf",null==(r=t.companyForm.get("companyEmail"))||null==r.errors?null:r.errors.required),l.xp6(1),l.Q6J("ngIf",null==(i=t.companyForm.get("companyEmail"))||null==i.errors?null:i.errors.email)}}function tL(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Company Password is required"),l.qZA())}function nL(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Password must be at least 8 characters"),l.qZA())}function rL(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,tL,2,0,"div",5),l.YNc(2,nL,2,0,"div",5),l.qZA()),2&n){const t=l.oxw();let r,i;l.xp6(1),l.Q6J("ngIf",null==(r=t.companyForm.get("companyPassword"))||null==r.errors?null:r.errors.required),l.xp6(1),l.Q6J("ngIf",null==(i=t.companyForm.get("companyPassword"))||null==i.errors?null:i.errors.minlength)}}let iL=(()=>{class n{constructor(t,r,i,u){this.afauth=t,this.data=r,this.router=i,this.afAuth=u}ngOnInit(){this.companyForm=new Ga({companyName:new rs("",Or.required),companyCategory:new rs("",Or.required),companyID:new rs("",Or.required),companyEmail:new rs("",[Or.required,Or.email]),companyPassword:new rs("",[Or.required,Or.minLength(8)])})}onSubmit(){if(console.log(this.companyForm.value),this.companyForm.valid){const t=this.companyForm.get("companyEmail")?.value,r=this.companyForm.get("companyPassword")?.value;this.afauth.register(t,r).then(i=>{console.log("User Registered:",i.user),this.companyItem={companyName:this.companyForm.get("companyName")?.value,companyCategorie:this.companyForm.get("companyCategory")?.value,companyMobileNumber:this.companyForm.get("companyID")?.value,companyGovID:this.companyForm.get("companyID")?.value,idField:i.user?.uid},this.data.addDocument(this.companyForm.get("companyCategory")?.value,this.companyItem,this.companyItem.idField).then(()=>{this.companyForm.reset(),this.router.navigate(["/company-user-page"])}).catch(u=>{console.error("Registration error:",u),alert(`Registration failed: ${u.message}`)})}).catch(i=>{console.error("Registration Error:",i),alert(i)})}else console.log("Form is invalid"),alert("Registration failed! Please try again.")}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ep),l.Y36(_D),l.Y36(en),l.Y36(ea))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-register"]],decls:45,vars:7,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","companyName"],["type","text","id","companyName","formControlName","companyName",1,"form-control"],[4,"ngIf"],["for","companyID"],["type","number","id","companyID","formControlName","companyID",1,"form-control"],["for","companyCategory"],["id","companyCategory","formControlName","companyCategory",1,"form-control"],["value","entertainmentSpaces"],["value","govInstitutes"],["value","foodServices"],["value","shoppingCenters"],["value","theatersAndMovies"],["value","fitnessCenters"],["for","companyEmail"],["type","email","id","companyEmail","formControlName","companyEmail",1,"form-control"],["for","companyPassword"],["type","password","id","companyPassword","formControlName","companyPassword",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","submit","routerLink","/log-in",1,"btn","btn-primary"]],template:function(t,r){if(1&t&&(l.TgZ(0,"div",0)(1,"h2"),l._uU(2,"Company Registration Form"),l.qZA(),l.TgZ(3,"form",1),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.TgZ(4,"div",2)(5,"label",3),l._uU(6,"Company Name:"),l.qZA(),l._UZ(7,"input",4),l.YNc(8,ZF,2,1,"div",5),l.qZA(),l.TgZ(9,"div",2)(10,"label",6),l._uU(11,"Company ID:"),l.qZA(),l._UZ(12,"input",7),l.YNc(13,KF,2,1,"div",5),l.qZA(),l.TgZ(14,"div",2)(15,"label",8),l._uU(16,"Company Category:"),l.qZA(),l.TgZ(17,"select",9)(18,"option",10),l._uU(19,"Entertainment spaces"),l.qZA(),l.TgZ(20,"option",11),l._uU(21,"GovInstitutes"),l.qZA(),l.TgZ(22,"option",12),l._uU(23,"Food services"),l.qZA(),l.TgZ(24,"option",13),l._uU(25,"Shopping centers"),l.qZA(),l.TgZ(26,"option",14),l._uU(27,"Theaters and movies"),l.qZA(),l.TgZ(28,"option",15),l._uU(29,"Fitness centers"),l.qZA()(),l.YNc(30,QF,2,1,"div",5),l.qZA(),l.TgZ(31,"div",2)(32,"label",16),l._uU(33,"Company Email:"),l.qZA(),l._UZ(34,"input",17),l.YNc(35,eL,3,2,"div",5),l.qZA(),l.TgZ(36,"div",2)(37,"label",18),l._uU(38,"Company Password:"),l.qZA(),l._UZ(39,"input",19),l.YNc(40,rL,3,2,"div",5),l.qZA(),l.TgZ(41,"button",20),l._uU(42,"Register"),l.qZA(),l.TgZ(43,"button",21),l._uU(44,"Log In"),l.qZA()()()),2&t){let i,u,d,m,w;l.xp6(3),l.Q6J("formGroup",r.companyForm),l.xp6(5),l.Q6J("ngIf",(null==(i=r.companyForm.get("companyName"))?null:i.invalid)&&(null==(i=r.companyForm.get("companyName"))?null:i.touched)),l.xp6(5),l.Q6J("ngIf",(null==(u=r.companyForm.get("companyID"))?null:u.invalid)&&(null==(u=r.companyForm.get("companyID"))?null:u.touched)),l.xp6(17),l.Q6J("ngIf",r.companyForm.get("companyCategory")&&(null==(d=r.companyForm.get("companyCategory"))?null:d.touched)),l.xp6(5),l.Q6J("ngIf",(null==(m=r.companyForm.get("companyEmail"))?null:m.invalid)&&(null==(m=r.companyForm.get("companyEmail"))?null:m.touched)),l.xp6(5),l.Q6J("ngIf",(null==(w=r.companyForm.get("companyPassword"))?null:w.invalid)&&(null==(w=r.companyForm.get("companyPassword"))?null:w.touched)),l.xp6(1),l.Q6J("disabled",!r.companyForm.valid)}},dependencies:[Rn,$d,Gu,L_,B_,$a,op,rl,Wf,Kf,tl,Yd],styles:[".container[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:20px;border:1px solid #ddd;border-radius:10px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-control[_ngcontent-%COMP%]{width:100%;height:40px;padding:10px;border:1px solid #ccc;border-radius:5px}.form-control[_ngcontent-%COMP%]:focus{border-color:#aaa;box-shadow:0 0 10px #0003}.btn[_ngcontent-%COMP%]{width:100%;height:40px;padding:10px;border:none;border-radius:5px;background-color:#4caf50;color:#fff;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background-color:#3e8e41}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]}),n})();function sL(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",8),l._UZ(1,"img",9),l.TgZ(2,"h3")(3,"a",10),l.NdJ("click",function(){const u=l.CHM(t).$implicit,d=l.oxw(4);return l.KtG(d.onPage(u))}),l._uU(4),l.qZA()(),l.TgZ(5,"p"),l._uU(6),l.qZA(),l.TgZ(7,"p"),l._uU(8),l.qZA(),l.TgZ(9,"p"),l._uU(10),l.qZA()()}if(2&n){const t=e.$implicit;l.xp6(4),l.Oqu(t.companyName),l.xp6(2),l.hij("Category: ",t.companyCategorie,""),l.xp6(2),l.hij("GovId: ",t.companyGovID,""),l.xp6(2),l.hij("Mobile: ",t.companyMobileNumber,"")}}function oL(n,e){if(1&n&&(l.TgZ(0,"div")(1,"div",6),l.YNc(2,sL,11,4,"div",7),l.qZA()()),2&n){const t=e.$implicit;l.xp6(2),l.Q6J("ngForOf",t)}}function aL(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,oL,3,1,"div",5),l.qZA()),2&n){const t=e.ngIf;l.xp6(1),l.Q6J("ngForOf",t)}}function uL(n,e){if(1&n&&(l.TgZ(0,"div",3),l.YNc(1,aL,2,1,"div",4),l.ALo(2,"async"),l.qZA()),2&n){const t=l.oxw(),r=l.MAs(4);l.xp6(1),l.Q6J("ngIf",l.lcZ(2,2,t.items))("ngIfElse",r)}}function cL(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",8),l._UZ(1,"img",9),l.TgZ(2,"h3")(3,"a",10),l.NdJ("click",function(){const u=l.CHM(t).$implicit,d=l.oxw(2);return l.KtG(d.onPage(u))}),l._uU(4),l.qZA()(),l.TgZ(5,"p"),l._uU(6),l.qZA(),l.TgZ(7,"p"),l._uU(8),l.qZA(),l.TgZ(9,"p"),l._uU(10),l.qZA()()}if(2&n){const t=e.$implicit;l.xp6(4),l.Oqu(t.companyName),l.xp6(2),l.hij("Category: ",t.companyCategorie,""),l.xp6(2),l.hij("GovId: ",t.companyGovID,""),l.xp6(2),l.hij("Mobile: ",t.companyMobileNumber,"")}}function lL(n,e){if(1&n&&(l.YNc(0,cL,11,4,"div",7),l.ALo(1,"async")),2&n){const t=l.oxw();l.Q6J("ngForOf",l.lcZ(1,1,t.companys))}}function dL(n,e){1&n&&(l.TgZ(0,"p"),l._uU(1,"Loading..."),l.qZA())}let UR=(()=>{class n{constructor(t,r){this.dataServ=t,this.router=r}onPage(t){this.dataServ.onCompanyPage(t)}ngOnInit(){this.categories=this.data,"1"==this.categories?this.items=this.dataServ.getMultipleCollections(["entertainmentSpaces","govInstitutes","foodServices","shoppingCenters","theatersAndMovies","fitnessCenters"]):this.companys=this.dataServ.getCollection(this.categories),console.log(this.items)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_D),l.Y36(en))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-cards-for-company"]],inputs:{data:"data"},decls:5,vars:2,consts:[["class","",4,"ngIf","ngIfElse"],["signleCategorie",""],["loading",""],[1,""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"companies-container"],["class","company-box",4,"ngFor","ngForOf"],[1,"company-box"],["src","https://placehold.co/600x400","alt","Company Logo"],[3,"click"]],template:function(t,r){if(1&t&&(l.YNc(0,uL,3,4,"div",0),l.YNc(1,lL,2,3,"ng-template",null,1,l.W1O),l.YNc(3,dL,2,0,"ng-template",null,2,l.W1O)),2&t){const i=l.MAs(2);l.Q6J("ngIf","1"==r.data)("ngIfElse",i)}},dependencies:[_n,Rn,nu],styles:[".company-search[_ngcontent-%COMP%]{max-width:800px;margin:40px auto;padding:20px;border:1px solid #ccc;border-radius:10px;box-shadow:0 0 10px #0000001a}.companies-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.company-box[_ngcontent-%COMP%]{width:200px;height:250px;margin:20px;padding:20px;border:1px solid #ccc;border-radius:10px;box-shadow:0 0 10px #0000001a;display:flex;flex-direction:column;align-items:center}.company-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;margin-bottom:20px}.company-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px}.company-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}"]}),n})();function hL(n,e){1&n&&l._UZ(0,"app-cards-for-company",3),2&n&&l.Q6J("data","1")}function fL(n,e){1&n&&l._UZ(0,"app-cards-for-company",3),2&n&&l.Q6J("data","entertainmentSpaces")}function pL(n,e){1&n&&l._UZ(0,"app-cards-for-company",3),2&n&&l.Q6J("data","govInstitutes")}function gL(n,e){1&n&&l._UZ(0,"app-cards-for-company",3),2&n&&l.Q6J("data","foodServices")}function mL(n,e){1&n&&l._UZ(0,"app-cards-for-company",3),2&n&&l.Q6J("data","shoppingCenters")}function yL(n,e){1&n&&l._UZ(0,"app-cards-for-company",3),2&n&&l.Q6J("data","theatersAndMovies")}function _L(n,e){1&n&&l._UZ(0,"app-cards-for-company",3),2&n&&l.Q6J("data","fitnessCenters")}let vL=(()=>{class n{constructor(){this.categoriesNames=[]}onSave(t){this.categories=t}ngOnInit(){this.categories="1"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-categories"]],decls:29,vars:7,consts:[[1,"categories"],[3,"click"],[3,"data",4,"ngIf"],[3,"data"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"p")(2,"a",1),l.NdJ("click",function(){return r.onSave("entertainmentSpaces")}),l._uU(3,"Entertainment spaces"),l.qZA()(),l.TgZ(4,"p")(5,"a",1),l.NdJ("click",function(){return r.onSave("govInstitutes")}),l._uU(6,"GovInstitutes"),l.qZA()(),l.TgZ(7,"p")(8,"a",1),l.NdJ("click",function(){return r.onSave("foodServices")}),l._uU(9,"Food services"),l.qZA()(),l.TgZ(10,"p")(11,"a",1),l.NdJ("click",function(){return r.onSave("shoppingCenters")}),l._uU(12,"Shopping centers"),l.qZA()(),l.TgZ(13,"p")(14,"a",1),l.NdJ("click",function(){return r.onSave("theatersAndMovies")}),l._uU(15,"Theaters and movies"),l.qZA()(),l.TgZ(16,"p")(17,"a",1),l.NdJ("click",function(){return r.onSave("fitnessCenters")}),l._uU(18,"Fitness centers"),l.qZA()(),l.TgZ(19,"p")(20,"a",1),l.NdJ("click",function(){return r.onSave("1")}),l._uU(21,"all"),l.qZA()()(),l.YNc(22,hL,1,1,"app-cards-for-company",2),l.YNc(23,fL,1,1,"app-cards-for-company",2),l.YNc(24,pL,1,1,"app-cards-for-company",2),l.YNc(25,gL,1,1,"app-cards-for-company",2),l.YNc(26,mL,1,1,"app-cards-for-company",2),l.YNc(27,yL,1,1,"app-cards-for-company",2),l.YNc(28,_L,1,1,"app-cards-for-company",2)),2&t&&(l.xp6(22),l.Q6J("ngIf","1"==r.categories),l.xp6(1),l.Q6J("ngIf","entertainmentSpaces"==r.categories),l.xp6(1),l.Q6J("ngIf","govInstitutes"==r.categories),l.xp6(1),l.Q6J("ngIf","foodServices"==r.categories),l.xp6(1),l.Q6J("ngIf","shoppingCenters"==r.categories),l.xp6(1),l.Q6J("ngIf","theatersAndMovies"==r.categories),l.xp6(1),l.Q6J("ngIf","fitnessCenters"==r.categories))},dependencies:[Rn,UR]}),n})(),wL=(()=>{class n{transform(t,r,i){if(!t||!r)return t;const u=r.toLowerCase();return t.filter(d=>d[i]?.toString().toLowerCase()?.includes(u))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=l.Yjl({name:"searchFilter",type:n,pure:!0}),n})();function EL(n,e){1&n&&(l.TgZ(0,"button",18),l._uU(1,"Login"),l.qZA())}function IL(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",13),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.LogOut())}),l._uU(1," LogOut"),l.qZA()}}function CL(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",22),l._UZ(1,"img",23),l.TgZ(2,"h3")(3,"a",13),l.NdJ("click",function(){const u=l.CHM(t).$implicit,d=l.oxw(3);return l.KtG(d.onPage(u))}),l._uU(4),l.qZA()(),l.TgZ(5,"p"),l._uU(6),l.qZA(),l.TgZ(7,"p"),l._uU(8),l.qZA(),l.TgZ(9,"p"),l._uU(10),l.qZA()()}if(2&n){const t=e.$implicit;l.xp6(4),l.Oqu(t.companyName),l.xp6(2),l.hij("Category: ",t.companyCategorie,""),l.xp6(2),l.hij("GovId: ",t.companyGovID,""),l.xp6(2),l.hij("Mobile: ",t.companyMobileNumber,"")}}function DL(n,e){if(1&n&&(l.TgZ(0,"div",20),l.YNc(1,CL,11,4,"div",21),l.ALo(2,"searchFilter"),l.qZA()),2&n){const t=e.$implicit,r=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",l.Dn7(2,1,t,r.searchTerm,r.searchfor))}}function bL(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,DL,3,5,"div",19),l.qZA()),2&n){const t=e.ngIf;l.xp6(1),l.Q6J("ngForOf",t)}}function TL(n,e){1&n&&(l.TgZ(0,"p"),l._uU(1,"Loading..."),l.qZA())}let SL=(()=>{class n{constructor(t,r,i){this.authService=t,this.dataServ=r,this.router=i,this.searchTerm="",this.searchfor=""}LogOut(){this.authService.logout().then(()=>{this.router.navigate([""]),alert("you logged out succesfully")}).catch(t=>{console.error("Logout error:",t)})}filterOut(t){this.searchTerm="",""==this.searchTerm&&(this.searchTerm=t,this.searchfor="companyCategorie",console.log(this.searchTerm))}ngOnInit(){this.authService.isLoggedIn().subscribe(r=>{this.isLoggedIn=r}),this.searchfor="companyName",this.companies=this.dataServ.getMultipleCollections(["entertainmentSpaces","govInstitutes","foodServices","shoppingCenters","theatersAndMovies","fitnessCenters"])}onPage(t){this.dataServ.onCompanyPage(t)}searchCompanies(){console.log(this.searchTerm)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ep),l.Y36(_D),l.Y36(en))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home-page"]],decls:55,vars:7,consts:[[1,"home-page"],[1,"top-bar"],[1,"registration-login"],["routerLink","/register"],["routerLink","/company-user-page"],["routerLink","/log-in",4,"ngIf"],[3,"click",4,"ngIf"],[1,"search-bar"],["type","search","placeholder","Search companies...",3,"ngModel","ngModelChange"],[1,"left-bar"],[1,"logo"],["src","https://placehold.co/50x50","alt","Logo"],[1,"categories"],[3,"click"],[1,"contact-us"],[1,"middle"],[4,"ngIf","ngIfElse"],["loading",""],["routerLink","/log-in"],["class","companie-container",4,"ngFor","ngForOf"],[1,"companie-container"],["class","cards",4,"ngFor","ngForOf"],[1,"cards"],["src","https://placehold.co/150x50","alt","Company Logo"]],template:function(t,r){if(1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),l._uU(4,"Register"),l.qZA(),l.TgZ(5,"button",4),l._uU(6,"user"),l.qZA(),l.YNc(7,EL,2,0,"button",5),l.YNc(8,IL,2,0,"button",6),l.qZA(),l.TgZ(9,"div",7)(10,"h3"),l._uU(11,"Company Search"),l.qZA(),l.TgZ(12,"input",8),l.NdJ("ngModelChange",function(u){return r.searchTerm=u}),l.qZA()()(),l.TgZ(13,"div",9)(14,"div",10),l._UZ(15,"img",11),l.qZA(),l.TgZ(16,"div",12)(17,"h2"),l._uU(18,"Categorization"),l.qZA(),l.TgZ(19,"ul")(20,"p")(21,"a",13),l.NdJ("click",function(){return r.filterOut("entertainmentSpaces")}),l._uU(22,"Entertainment spaces"),l.qZA()(),l.TgZ(23,"p")(24,"a",13),l.NdJ("click",function(){return r.filterOut("govInstitutes")}),l._uU(25,"GovInstitutes"),l.qZA()(),l.TgZ(26,"p")(27,"a",13),l.NdJ("click",function(){return r.filterOut("foodServices")}),l._uU(28,"Food services"),l.qZA()(),l.TgZ(29,"p")(30,"a",13),l.NdJ("click",function(){return r.filterOut("shoppingCenters")}),l._uU(31,"Shopping centers"),l.qZA()(),l.TgZ(32,"p")(33,"a",13),l.NdJ("click",function(){return r.filterOut("theatersAndMovies")}),l._uU(34,"Theaters and movies"),l.qZA()(),l.TgZ(35,"p")(36,"a",13),l.NdJ("click",function(){return r.filterOut("fitnessCenters")}),l._uU(37,"Fitness centers"),l.qZA()(),l.TgZ(38,"p")(39,"a",13),l.NdJ("click",function(){return r.filterOut("")}),l._uU(40,"all"),l.qZA()()()(),l.TgZ(41,"div",14)(42,"h2"),l._uU(43,"Contact Us"),l.qZA(),l.TgZ(44,"p"),l._uU(45,"Phone: 555555555"),l.qZA(),l.TgZ(46,"p"),l._uU(47,"Email: example"),l.qZA(),l.TgZ(48,"p"),l._uU(49,"Our Location: example street N01"),l.qZA()()(),l.TgZ(50,"div",15),l.YNc(51,bL,2,1,"div",16),l.ALo(52,"async"),l.YNc(53,TL,2,0,"ng-template",null,17,l.W1O),l.qZA()()),2&t){const i=l.MAs(54);l.xp6(7),l.Q6J("ngIf",!r.isLoggedIn),l.xp6(1),l.Q6J("ngIf",r.isLoggedIn),l.xp6(4),l.Q6J("ngModel",r.searchTerm),l.xp6(39),l.Q6J("ngIf",l.lcZ(52,5,r.companies))("ngIfElse",i)}},dependencies:[_n,Rn,$d,$a,Wf,ME,nu,wL],styles:[".home-page[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100vh}.top-bar[_ngcontent-%COMP%]{background-color:#03055b;color:#fff;padding:20px;display:flex;justify-content:space-between;align-items:center}.companie-container[_ngcontent-%COMP%]{display:flex}.registration-login[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px}.cards[_ngcontent-%COMP%]{display:block}.search-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px}.left-bar[_ngcontent-%COMP%]{background-color:#f7f7f7;padding:20px;width:200px;height:100vh;display:flex;flex-direction:column}.logo[_ngcontent-%COMP%], .categories[_ngcontent-%COMP%], .contact-us[_ngcontent-%COMP%]{margin-bottom:20px}.left-bar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.middle[_ngcontent-%COMP%]{padding:20px}.companies-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}.cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;border:1px solid #ccc;border-radius:8px;padding:16px;width:250px;box-shadow:0 4px 6px #0000001a;text-align:center}.left-bar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.left-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#03055b}.middle[_ngcontent-%COMP%]{align-items:center;display:flexbox}.left-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc}.left-bar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}"]}),n})();function AL(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Company Name is required"),l.qZA())}function xL(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,AL,2,0,"div",7),l.qZA()),2&n){const t=l.oxw(2);let r;l.xp6(1),l.Q6J("ngIf",null==(r=t.companyForm.get("companyName"))||null==r.errors?null:r.errors.required)}}function ML(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Company Name is required"),l.qZA())}function NL(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,ML,2,0,"div",7),l.qZA()),2&n){const t=l.oxw(2);let r;l.xp6(1),l.Q6J("ngIf",null==(r=t.companyForm.get("companyID"))||null==r.errors?null:r.errors.required)}}function RL(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Company Category is required"),l.qZA())}function PL(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,RL,2,0,"div",7),l.qZA()),2&n){const t=l.oxw(2);let r;l.xp6(1),l.Q6J("ngIf",null==(r=t.companyForm.get("companyCategory"))||null==r.errors?null:r.errors.required)}}function OL(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Please put correct mobile number"),l.qZA())}function kL(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",2)(1,"h2"),l._uU(2,"Company info change Form"),l.qZA(),l.TgZ(3,"form",3),l.NdJ("ngSubmit",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.onSubmit())}),l.TgZ(4,"div",4)(5,"label",5),l._uU(6,"Company Name:"),l.qZA(),l._UZ(7,"input",6),l.YNc(8,xL,2,1,"div",7),l.qZA(),l.TgZ(9,"div",4)(10,"label",8),l._uU(11,"Company ID:"),l.qZA(),l._UZ(12,"input",9),l.YNc(13,NL,2,1,"div",7),l.qZA(),l.TgZ(14,"div",4)(15,"label",10),l._uU(16,"Company Category:"),l.qZA(),l.TgZ(17,"select",11)(18,"option",12),l._uU(19,"Entertainment spaces"),l.qZA(),l.TgZ(20,"option",13),l._uU(21,"GovInstitutes"),l.qZA(),l.TgZ(22,"option",14),l._uU(23,"Food services"),l.qZA(),l.TgZ(24,"option",15),l._uU(25,"Shopping centers"),l.qZA(),l.TgZ(26,"option",16),l._uU(27,"Theaters and movies"),l.qZA(),l.TgZ(28,"option",17),l._uU(29,"Fitness centers"),l.qZA()(),l.YNc(30,PL,2,1,"div",7),l.qZA(),l.TgZ(31,"div",4)(32,"label",18),l._uU(33,"Company Mobile Number:"),l.qZA(),l._UZ(34,"input",19),l.YNc(35,OL,2,0,"div",7),l.qZA(),l.TgZ(36,"button",20),l._uU(37,"Update"),l.qZA()()()}if(2&n){const t=l.oxw();let r,i,u,d;l.xp6(3),l.Q6J("formGroup",t.companyForm),l.xp6(5),l.Q6J("ngIf",(null==(r=t.companyForm.get("companyName"))?null:r.invalid)&&(null==(r=t.companyForm.get("companyName"))?null:r.touched)),l.xp6(5),l.Q6J("ngIf",(null==(i=t.companyForm.get("companyID"))?null:i.invalid)&&(null==(i=t.companyForm.get("companyID"))?null:i.touched)),l.xp6(17),l.Q6J("ngIf",t.companyForm.get("companyCategory")&&(null==(u=t.companyForm.get("companyCategory"))?null:u.touched)),l.xp6(5),l.Q6J("ngIf",null==(d=t.companyForm.get("companyMobileNumber"))||null==d.errors?null:d.errors.required)}}function FL(n,e){1&n&&(l.TgZ(0,"p")(1,"a",21),l._uU(2,"please log in"),l.qZA()())}let LL=(()=>{class n{constructor(t,r,i){this.data=t,this.authService=r,this.route=i,this.companyForm=new Ga({companyName:new rs("",Or.required),companyCategory:new rs("",Or.required),companyID:new rs("",Or.required),companyMobileNumber:new rs("",[Or.required,Or.pattern(/^(\+\d{1,3}[- ]?)?\d{10}$/)])}),this.isLoggedIn=!1}ngOnInit(){this.authService.isLoggedIn().subscribe(r=>{this.isLoggedIn=r}),this.GetCompanyInfo(["entertainmentSpaces","govInstitutes","foodServices","shoppingCenters","theatersAndMovies","fitnessCenters"])}GetCompanyInfo(t){this.authService.getCurrentUserUID().subscribe({next:r=>{this.userUID=r||"",this.userUID?this.data.getDocumentFromAnyCollection(this.userUID,t).subscribe({next:i=>{i?(this.collectionName=i.data.companyCategorie,this.companyForm.setValue({companyName:i.data.companyName||"",companyCategory:i.data.companyCategorie||"",companyID:i.data.companyGovID||"",companyMobileNumber:i.data.companyMobileNumber||""}),console.log(this.companyForm)):console.warn("Document not found in any collection.")},error:i=>{console.error("Error fetching document:",i)}}):console.error("User UID is missing.")},error:r=>{console.error("Error fetching user UID:",r)}})}onSubmit(){this.companyItem={companyName:this.companyForm.get("companyName")?.value,companyCategorie:this.companyForm.get("companyCategory")?.value,companyMobileNumber:this.companyForm.get("companyID")?.value,companyGovID:this.companyForm.get("companyID")?.value,idField:this.userUID},this.data.updateDocument(this.collectionName,this.userUID,this.companyItem).then(()=>{alert("you updated you data succesfully"),this.route.navigateByUrl("")}).catch(t=>{alert(t)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(_D),l.Y36(Ep),l.Y36(en))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-company-user-page"]],decls:3,vars:2,consts:[["class","container",4,"ngIf","ngIfElse"],["logIn",""],[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","companyName"],["type","text","id","companyName","formControlName","companyName",1,"form-control"],[4,"ngIf"],["for","companyID"],["type","number","id","companyID","formControlName","companyID",1,"form-control",3,"value"],["for","companyCategory"],["id","companyCategory","formControlName","companyCategory",1,"form-control"],["value","entertainmentSpaces"],["value","govInstitutes"],["value","foodServices"],["value","shoppingCenters"],["value","theatersAndMovies"],["value","fitnessCenters"],["for","companyMobileNumber"],["type","number","id","companyMobileNumber","formControlName","companyMobileNumber",1,"form-control"],["type","submit",1,"btn","btn-primary"],["routerLink","/log-in"]],template:function(t,r){if(1&t&&(l.YNc(0,kL,38,5,"div",0),l.YNc(1,FL,3,0,"ng-template",null,1,l.W1O)),2&t){const i=l.MAs(2);l.Q6J("ngIf",r.isLoggedIn)("ngIfElse",i)}},dependencies:[Rn,em,Gu,L_,B_,$a,op,rl,Wf,Kf,tl,Yd],styles:[".container[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:20px;border:1px solid #ddd;border-radius:10px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-control[_ngcontent-%COMP%]{width:100%;height:40px;padding:10px;border:1px solid #ccc;border-radius:5px}.form-control[_ngcontent-%COMP%]:focus{border-color:#aaa;box-shadow:0 0 10px #0003}.btn[_ngcontent-%COMP%]{width:100%;height:40px;padding:10px;border:none;border-radius:5px;background-color:#4caf50;color:#fff;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background-color:#3e8e41}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]}),n})();function VL(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Email is required"),l.qZA())}function UL(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Invalid email address"),l.qZA())}function BL(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,VL,2,0,"div",7),l.YNc(2,UL,2,0,"div",7),l.qZA()),2&n){const t=l.oxw(2);let r,i;l.xp6(1),l.Q6J("ngIf",null==t.loginForm||null==(r=t.loginForm.get("email"))||null==r.errors?null:r.errors.required),l.xp6(1),l.Q6J("ngIf",null==t.loginForm||null==(i=t.loginForm.get("email"))||null==i.errors?null:i.errors.email)}}function jL(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Password is required"),l.qZA())}function $L(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Password must be at least 8 characters"),l.qZA())}function HL(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,jL,2,0,"div",7),l.YNc(2,$L,2,0,"div",7),l.qZA()),2&n){const t=l.oxw(2);let r,i;l.xp6(1),l.Q6J("ngIf",null==t.loginForm||null==(r=t.loginForm.get("password"))||null==r.errors?null:r.errors.required),l.xp6(1),l.Q6J("ngIf",null==t.loginForm||null==(i=t.loginForm.get("password"))||null==i.errors?null:i.errors.minlength)}}function GL(n,e){1&n&&(l.TgZ(0,"button",13),l._uU(1,"Register"),l.qZA())}function zL(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",2)(1,"h2"),l._uU(2,"Login"),l.qZA(),l.TgZ(3,"form",3),l.NdJ("ngSubmit",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.onSubmit())}),l.TgZ(4,"div",4)(5,"label",5),l._uU(6,"Email:"),l.qZA(),l._UZ(7,"input",6),l.YNc(8,BL,3,2,"div",7),l.qZA(),l.TgZ(9,"div",4)(10,"label",8),l._uU(11,"Password:"),l.qZA(),l._UZ(12,"input",9),l.YNc(13,HL,3,2,"div",7),l.qZA(),l.TgZ(14,"button",10),l._uU(15,"Login"),l.qZA(),l.YNc(16,GL,2,0,"button",11),l.qZA(),l.TgZ(17,"p"),l._uU(18,"Forgot Password?"),l.qZA(),l.TgZ(19,"button",12),l._uU(20,"Forgot Password"),l.qZA()()}if(2&n){const t=l.oxw();let r,i;l.xp6(3),l.Q6J("formGroup",t.loginForm),l.xp6(5),l.Q6J("ngIf",(null==t.loginForm||null==(r=t.loginForm.get("email"))?null:r.invalid)&&(null==t.loginForm||null==(r=t.loginForm.get("email"))?null:r.touched)),l.xp6(5),l.Q6J("ngIf",(null==t.loginForm||null==(i=t.loginForm.get("password"))?null:i.invalid)&&(null==t.loginForm||null==(i=t.loginForm.get("password"))?null:i.touched)),l.xp6(1),l.Q6J("disabled",!t.loginForm.valid),l.xp6(2),l.Q6J("ngIf",!t.isLoggedIn)}}function qL(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",14),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.LogOut())}),l._uU(1,"LogOut"),l.qZA()}}let ZL=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.afAuth=i,this.email="",this.password="",this.verificationCode="",this.verificationEmail="",this.errorMessage=""}ngOnInit(){this.authService.isLoggedIn().subscribe(t=>{this.isLoggedIn=t}),this.loginForm=new Ga({email:new rs("",[Or.required,Or.email]),password:new rs("",[Or.required,Or.minLength(8)])})}LogOut(){this.authService.logout().then(()=>{this.router.navigate(["/log-in"]),alert("you logged out succesfully")}).catch(t=>{console.error("Logout error:",t)})}onSubmit(){console.log(this.email),this.authService.login(this.loginForm.get("email")?.value,this.loginForm.get("password")?.value).then(t=>{alert("you logged in succesfully"),this.router.navigate(["/company-user-page"])}).catch(()=>{alert("invalid email or password")})}forgotPassword(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ep),l.Y36(en),l.Y36(ea))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-log-in"]],decls:3,vars:2,consts:[["class","login-page",4,"ngIf","ngIfElse"],["logOut",""],[1,"login-page"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],[4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/register","class","btn btn-primary",4,"ngIf"],["routerLink","/forgotPassword",1,"btn","btn-link"],["routerLink","/register",1,"btn","btn-primary"],[3,"click"]],template:function(t,r){if(1&t&&(l.YNc(0,zL,21,5,"div",0),l.YNc(1,qL,2,0,"ng-template",null,1,l.W1O)),2&t){const i=l.MAs(2);l.Q6J("ngIf",0==r.isLoggedIn)("ngIfElse",i)}},dependencies:[Rn,$d,Gu,$a,Wf,Kf,tl,Yd],styles:[".login-page[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:20px;border:1px solid #ccc;border-radius:10px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-control[_ngcontent-%COMP%]{width:100%;height:40px;padding:10px;font-size:16px;border:none;border-radius:5px}.form-control[_ngcontent-%COMP%]:focus{border-color:#aaa;box-shadow:0 0 10px #0003}.btn[_ngcontent-%COMP%]{width:100%;height:40px;padding:10px;font-size:16px;border:none;border-radius:5px;background-color:#4caf50;color:#fff;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background-color:#3e8e41}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]}),n})(),WL=(()=>{class n{constructor(t){this.route=t,this.company={companyName:"",companyMobileNumber:0,companyCategorie:"",companyGovID:0,idField:""}}ngOnInit(){this.route.queryParams.subscribe(t=>{this.company.companyName=t.name,this.company.companyMobileNumber=t.mobile,this.company.companyCategorie=t.categorie,this.company.companyGovID=t.govid,this.company.idField=t.idfield})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Pr))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-company-page"]],decls:14,vars:6,consts:[[1,"company-details"],[1,"company-info"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h2"),l._uU(2),l.qZA(),l.TgZ(3,"div",1)(4,"p"),l._uU(5),l.qZA(),l.TgZ(6,"p"),l._uU(7),l.qZA(),l.TgZ(8,"p"),l._uU(9),l.qZA(),l.TgZ(10,"p"),l._uU(11),l.qZA(),l.TgZ(12,"p"),l._uU(13),l.qZA()()()),2&t&&(l.xp6(2),l.Oqu(r.company.companyName),l.xp6(3),l.hij("Location: ",r.company.companyName,""),l.xp6(2),l.hij("name: ",r.company.companyName,""),l.xp6(2),l.hij("GovID: ",r.company.companyGovID,""),l.xp6(2),l.hij("number: ",r.company.companyName,""),l.xp6(2),l.hij("categorie: ",r.company.companyCategorie,""))},styles:[".homepage[_ngcontent-%COMP%]{max-width:800px;margin:40px auto;padding:20px;border:1px solid #ccc;border-radius:10px;box-shadow:0 0 10px #0000001a}.navbar[_ngcontent-%COMP%]{background-color:#03055b;color:#fff;padding:10px;text-align:center}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;justify-content:space-between}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:20px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc}main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:10px}img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:10px;margin-bottom:20px}"]}),n})(),KL=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-contact-us-page"]],decls:30,vars:0,consts:[[1,"contact-us"],["href","tel:558000839"],["href","mailto:mashoguliashvili00@gmail.com"],["for","name"],["type","text","id","name","name","name"],["for","email"],["type","email","id","email","name","email"],["for","message"],["id","message","name","message"],["type","submit","value","Send"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h2"),l._uU(2,"Contact Us"),l.qZA(),l.TgZ(3,"p"),l._uU(4,"Phone: "),l.TgZ(5,"a",1),l._uU(6,"558000839"),l.qZA()(),l.TgZ(7,"p"),l._uU(8,"Email: "),l.TgZ(9,"a",2),l._uU(10,"mashoguliashvili00gmail.com"),l.qZA()(),l.TgZ(11,"p"),l._uU(12,"Address: 123 Main St, Anytown, USA"),l.qZA(),l.TgZ(13,"form")(14,"label",3),l._uU(15,"Name:"),l.qZA(),l._UZ(16,"input",4)(17,"br")(18,"br"),l.TgZ(19,"label",5),l._uU(20,"Email:"),l.qZA(),l._UZ(21,"input",6)(22,"br")(23,"br"),l.TgZ(24,"label",7),l._uU(25,"Message:"),l.qZA(),l._UZ(26,"textarea",8)(27,"br")(28,"br")(29,"input",9),l.qZA()())},dependencies:[Gu,Kf,Ss],styles:[".contact-us[_ngcontent-%COMP%]{max-width:800px;margin:40px auto;padding:20px;border:1px solid #ccc;border-radius:10px;box-shadow:0 0 10px #0000001a}p[_ngcontent-%COMP%]{margin-bottom:20px}a[_ngcontent-%COMP%]{text-decoration:none;color:#03055b}a[_ngcontent-%COMP%]:hover{color:#ccc}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}label[_ngcontent-%COMP%]{margin-bottom:10px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;height:40px;padding:10px;border:1px solid #ccc;border-radius:5px;margin-bottom:20px}input[type=submit][_ngcontent-%COMP%]{background-color:#03055b;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#ccc}"]}),n})();function YL(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1,"Email is required"),l.qZA())}function QL(n,e){if(1&n&&(l.TgZ(0,"div"),l.YNc(1,YL,2,0,"div",5),l.qZA()),2&n){const t=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=t.changePasswordForm.get("email"))||null==r.errors?null:r.errors.required)}}const JL=[{path:"register",component:iL},{path:"cardsforcompanyPath",component:UR},{path:"categories",component:vL},{path:"",component:SL},{path:"company-user-page",component:LL},{path:"log-in",component:ZL},{path:"forgotPassword",component:(()=>{class n{constructor(t){this.authServic=t}ngOnInit(){this.changePasswordForm=new Ga({newPassword:new rs("",[Or.required,Or.minLength(8)])})}onChangePasswordSubmit(){console.log(this.changePasswordForm.value),this.authServic.forgotPassword(this.changePasswordForm.value).then(()=>{alert("email sent succesfully")}).catch(t=>{alert(t)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ep))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-password-forgot"]],decls:11,vars:3,consts:[[1,"change-password"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","newPassword"],["type","email","id","email","formControlName","newPassword",1,"form-control"],[4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){if(1&t&&(l.TgZ(0,"div",0)(1,"h2"),l._uU(2,"Change Password"),l.qZA(),l.TgZ(3,"form",1),l.NdJ("ngSubmit",function(){return r.onChangePasswordSubmit()}),l.TgZ(4,"div",2)(5,"label",3),l._uU(6,"Email:"),l.qZA(),l._UZ(7,"input",4),l.YNc(8,QL,2,1,"div",5),l.qZA(),l.TgZ(9,"button",6),l._uU(10,"Change Password"),l.qZA()()()),2&t){let i;l.xp6(3),l.Q6J("formGroup",r.changePasswordForm),l.xp6(5),l.Q6J("ngIf",(null==(i=r.changePasswordForm.get("email"))?null:i.invalid)&&(null==(i=r.changePasswordForm.get("newPassword"))?null:i.touched)),l.xp6(1),l.Q6J("disabled",!r.changePasswordForm.valid)}},dependencies:[Rn,Gu,$a,Wf,Kf,tl,Yd],styles:[".login-page[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:20px;border:1px solid #ccc;border-radius:10px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-control[_ngcontent-%COMP%]{width:100%;height:40px;padding:10px;font-size:16px;border:none;border-radius:5px}.form-control[_ngcontent-%COMP%]:focus{border-color:#aaa;box-shadow:0 0 10px #0003}.btn[_ngcontent-%COMP%]{width:100%;height:40px;padding:10px;font-size:16px;border:none;border-radius:5px;background-color:#4caf50;color:#fff;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background-color:#3e8e41}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]}),n})()},{path:"company-page",component:WL},{path:" contact-us",component:KL}];let XL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Xw.forRoot(JL),Xw]}),n})(),e2=(()=>{class n{constructor(){this.title="ProjectX"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[f]}),n})();const BR_firebase={apiKey:"AIzaSyC23KP0EEBXWYGo0CW3gqC_GHQ4pXO4j1w",authDomain:"projectx-da2e3.firebaseapp.com",projectId:"projectx-da2e3",storageBucket:"projectx-da2e3.firebasestorage.app",messagingSenderId:"931535630929",appId:"1:931535630929:web:ea4b070a2c43cecf87fe70",measurementId:"G-ZGLL5GC49F"};class jR{}class $R{}class kl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(d):this.headers.set(u,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof kl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new kl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof kl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let d=this.headers.get(t);if(!d)return;d=d.filter(m=>-1===u.indexOf(m)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class t2{encodeKey(e){return HR(e)}encodeValue(e){return HR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const r2=/%(\d[a-f0-9])/gi,i2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function HR(n){return encodeURIComponent(n).replace(r2,(e,t)=>i2[t]??e)}function vD(n){return`${n}`}class Rh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new t2,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function n2(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[d,m]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],w=t.get(d)||[];w.push(m),t.set(d,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(vD):[vD(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Rh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(vD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(vD(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class s2{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function GR(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function zR(n){return typeof Blob<"u"&&n instanceof Blob}function qR(n){return typeof FormData<"u"&&n instanceof FormData}class yw{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function o2(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new kl),this.context||(this.context=new s2),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+d}}else this.params=new Rh,this.urlWithParams=t}serializeBody(){return null===this.body?null:GR(this.body)||zR(this.body)||qR(this.body)||function a2(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Rh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||qR(this.body)?null:zR(this.body)?this.body.type||null:GR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Rh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,D=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((N,V)=>N.set(V,e.setHeaders[V]),w)),e.setParams&&(D=Object.keys(e.setParams).reduce((N,V)=>N.set(V,e.setParams[V]),D)),new yw(t,r,u,{params:D,headers:w,context:A,reportProgress:m,responseType:i,withCredentials:d})}}var Zr=(()=>((Zr=Zr||{})[Zr.Sent=0]="Sent",Zr[Zr.UploadProgress=1]="UploadProgress",Zr[Zr.ResponseHeader=2]="ResponseHeader",Zr[Zr.DownloadProgress=3]="DownloadProgress",Zr[Zr.Response=4]="Response",Zr[Zr.User=5]="User",Zr))();class Rx{constructor(e,t=200,r="OK"){this.headers=e.headers||new kl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Px extends Rx{constructor(e={}){super(e),this.type=Zr.ResponseHeader}clone(e={}){return new Px({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class wD extends Rx{constructor(e={}){super(e),this.type=Zr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new wD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ZR extends Rx{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ox(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let u2=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof yw)u=t;else{let w,D;w=i.headers instanceof kl?i.headers:new kl(i.headers),i.params&&(D=i.params instanceof Rh?i.params:new Rh({fromObject:i.params})),u=new yw(t,r,void 0!==i.body?i.body:null,{headers:w,context:i.context,params:D,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=lt(u).pipe(k(w=>this.handler.handle(w)));if(t instanceof yw||"events"===i.observe)return d;const m=d.pipe(Nr(w=>w instanceof wD));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,ft.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe((0,ft.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe((0,ft.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe((0,ft.U)(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Rh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Ox(i,r))}post(t,r,i={}){return this.request("POST",t,Ox(i,r))}put(t,r,i={}){return this.request("PUT",t,Ox(i,r))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(jR))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class WR{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const KR=new l.OlP("HTTP_INTERCEPTORS");let c2=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const l2=/^\)\]\}',?\n/;let YR=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Xi.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((z,le)=>i.setRequestHeader(z,le.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const z=t.detectContentTypeHeader();null!==z&&i.setRequestHeader("Content-Type",z)}if(t.responseType){const z=t.responseType.toLowerCase();i.responseType="json"!==z?z:"text"}const u=t.serializeBody();let d=null;const m=()=>{if(null!==d)return d;const z=i.statusText||"OK",le=new kl(i.getAllResponseHeaders()),Oe=function d2(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return d=new Px({headers:le,status:i.status,statusText:z,url:Oe}),d},w=()=>{let{headers:z,status:le,statusText:Oe,url:ke}=m(),Je=null;204!==le&&(Je=typeof i.response>"u"?i.responseText:i.response),0===le&&(le=Je?200:0);let bt=le>=200&&le<300;if("json"===t.responseType&&"string"==typeof Je){const At=Je;Je=Je.replace(l2,"");try{Je=""!==Je?JSON.parse(Je):null}catch(Ut){Je=At,bt&&(bt=!1,Je={error:Ut,text:Je})}}bt?(r.next(new wD({body:Je,headers:z,status:le,statusText:Oe,url:ke||void 0})),r.complete()):r.error(new ZR({error:Je,headers:z,status:le,statusText:Oe,url:ke||void 0}))},D=z=>{const{url:le}=m(),Oe=new ZR({error:z,status:i.status||0,statusText:i.statusText||"Unknown Error",url:le||void 0});r.error(Oe)};let A=!1;const N=z=>{A||(r.next(m()),A=!0);let le={type:Zr.DownloadProgress,loaded:z.loaded};z.lengthComputable&&(le.total=z.total),"text"===t.responseType&&!!i.responseText&&(le.partialText=i.responseText),r.next(le)},V=z=>{let le={type:Zr.UploadProgress,loaded:z.loaded};z.lengthComputable&&(le.total=z.total),r.next(le)};return i.addEventListener("load",w),i.addEventListener("error",D),i.addEventListener("timeout",D),i.addEventListener("abort",D),t.reportProgress&&(i.addEventListener("progress",N),null!==u&&i.upload&&i.upload.addEventListener("progress",V)),i.send(u),r.next({type:Zr.Sent}),()=>{i.removeEventListener("error",D),i.removeEventListener("abort",D),i.removeEventListener("load",w),i.removeEventListener("timeout",D),t.reportProgress&&(i.removeEventListener("progress",N),null!==u&&i.upload&&i.upload.removeEventListener("progress",V)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ua))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const kx=new l.OlP("XSRF_COOKIE_NAME"),Fx=new l.OlP("XSRF_HEADER_NAME");class QR{}let h2=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=oa(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de),l.LFG(l.Lbi),l.LFG(kx))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Lx=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(QR),l.LFG(Fx))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),f2=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(KR,[]);this.chain=r.reduceRight((i,u)=>new WR(i,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG($R),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),p2=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Lx,useClass:c2}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:kx,useValue:t.cookieName}:[],t.headerName?{provide:Fx,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Lx,{provide:KR,useExisting:Lx,multi:!0},{provide:QR,useClass:h2},{provide:kx,useValue:"XSRF-TOKEN"},{provide:Fx,useValue:"X-XSRF-TOKEN"}]}),n})(),g2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[u2,{provide:jR,useClass:f2},YR,{provide:$R,useExisting:YR}],imports:[p2.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),m2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[e2]}),n.\u0275inj=l.cJS({imports:[Cc,XL,is.hO.initializeApp(BR_firebase),dT,eh,th,g2]}),n})();jo().bootstrapModule(m2).catch(n=>console.error(n))},9751:(yt,Me,F)=>{F.d(Me,{y:()=>ve});var l=F(2961),X=F(727),O=F(8822),ae=F(9635),se=F(2416),fe=F(576),de=F(2806);let ve=(()=>{class Z{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const Ce=new Z;return Ce.source=this,Ce.operator=Ae,Ce}subscribe(Ae,Ce,rt){const _e=function $(Z){return Z&&Z instanceof l.Lv||function G(Z){return Z&&(0,fe.m)(Z.next)&&(0,fe.m)(Z.error)&&(0,fe.m)(Z.complete)}(Z)&&(0,X.Nn)(Z)}(Ae)?Ae:new l.Hp(Ae,Ce,rt);return(0,de.x)(()=>{const{operator:ye,source:ht}=this;_e.add(ye?ye.call(_e,ht):ht?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Ce){Ae.error(Ce)}}forEach(Ae,Ce){return new(Ce=pe(Ce))((rt,_e)=>{const ye=new l.Hp({next:ht=>{try{Ae(ht)}catch(vt){_e(vt),ye.unsubscribe()}},error:_e,complete:rt});this.subscribe(ye)})}_subscribe(Ae){var Ce;return null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(Ae)}[O.L](){return this}pipe(...Ae){return(0,ae.U)(Ae)(this)}toPromise(Ae){return new(Ae=pe(Ae))((Ce,rt)=>{let _e;this.subscribe(ye=>_e=ye,ye=>rt(ye),()=>Ce(_e))})}}return Z.create=je=>new Z(je),Z})();function pe(Z){var je;return null!==(je=Z??se.v.Promise)&&void 0!==je?je:Promise}},7579:(yt,Me,F)=>{F.d(Me,{x:()=>de});var l=F(9751),X=F(727);const ae=(0,F(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=F(8737),fe=F(2806);let de=(()=>{class pe extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Z=new ve(this,this);return Z.operator=$,Z}_throwIfClosed(){if(this.closed)throw new ae}next($){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next($)}})}error($){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Z}=this;for(;Z.length;)Z.shift().error($)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Z,isStopped:je,observers:Ae}=this;return Z||je?X.Lc:(this.currentObservers=null,Ae.push($),new X.w0(()=>{this.currentObservers=null,(0,se.P)(Ae,$)}))}_checkFinalizedStatuses($){const{hasError:Z,thrownError:je,isStopped:Ae}=this;Z?$.error(je):Ae&&$.complete()}asObservable(){const $=new l.y;return $.source=this,$}}return pe.create=(G,$)=>new ve(G,$),pe})();class ve extends de{constructor(G,$){super(),this.destination=G,this.source=$}next(G){var $,Z;null===(Z=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Z||Z.call($,G)}error(G){var $,Z;null===(Z=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Z||Z.call($,G)}complete(){var G,$;null===($=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===$||$.call(G)}_subscribe(G){var $,Z;return null!==(Z=null===($=this.source)||void 0===$?void 0:$.subscribe(G))&&void 0!==Z?Z:X.Lc}}},2961:(yt,Me,F)=>{F.d(Me,{Hp:()=>rt,Lv:()=>Z});var l=F(576),X=F(727),O=F(2416),ae=F(7849);function se(){}const fe=pe("C",void 0,void 0);function pe(Pe,we,ge){return{kind:Pe,value:we,error:ge}}var G=F(3410),$=F(2806);class Z extends X.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,X.Nn)(we)&&we.add(this)):this.destination=vt}static create(we,ge,He){return new rt(we,ge,He)}next(we){this.isStopped?ht(function ve(Pe){return pe("N",Pe,void 0)}(we),this):this._next(we)}error(we){this.isStopped?ht(function de(Pe){return pe("E",void 0,Pe)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?ht(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Ae(Pe,we){return je.call(Pe,we)}class Ce{constructor(we){this.partialObserver=we}next(we){const{partialObserver:ge}=this;if(ge.next)try{ge.next(we)}catch(He){_e(He)}}error(we){const{partialObserver:ge}=this;if(ge.error)try{ge.error(we)}catch(He){_e(He)}else _e(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(ge){_e(ge)}}}class rt extends Z{constructor(we,ge,He){let Be;if(super(),(0,l.m)(we)||!we)Be={next:we??void 0,error:ge??void 0,complete:He??void 0};else{let Xe;this&&O.v.useDeprecatedNextContext?(Xe=Object.create(we),Xe.unsubscribe=()=>this.unsubscribe(),Be={next:we.next&&Ae(we.next,Xe),error:we.error&&Ae(we.error,Xe),complete:we.complete&&Ae(we.complete,Xe)}):Be=we}this.destination=new Ce(Be)}}function _e(Pe){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Pe):(0,ae.h)(Pe)}function ht(Pe,we){const{onStoppedNotification:ge}=O.v;ge&&G.z.setTimeout(()=>ge(Pe,we))}const vt={closed:!0,next:se,error:function ye(Pe){throw Pe},complete:se}},727:(yt,Me,F)=>{F.d(Me,{Lc:()=>fe,w0:()=>se,Nn:()=>de});var l=F(576);const O=(0,F(3888).d)(pe=>function($){pe(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Z,je)=>`${je+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ae=F(8737);class se{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ae of $)Ae.remove(this);else $.remove(this);const{initialTeardown:Z}=this;if((0,l.m)(Z))try{Z()}catch(Ae){G=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Ae of je)try{ve(Ae)}catch(Ce){G=G??[],Ce instanceof O?G=[...G,...Ce.errors]:G.push(Ce)}}if(G)throw new O(G)}}add(G){var $;if(G&&G!==this)if(this.closed)ve(G);else{if(G instanceof se){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(G)}}_hasParent(G){const{_parentage:$}=this;return $===G||Array.isArray($)&&$.includes(G)}_addParent(G){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(G),$):$?[$,G]:G}_removeParent(G){const{_parentage:$}=this;$===G?this._parentage=null:Array.isArray($)&&(0,ae.P)($,G)}remove(G){const{_finalizers:$}=this;$&&(0,ae.P)($,G),G instanceof se&&G._removeParent(this)}}se.EMPTY=(()=>{const pe=new se;return pe.closed=!0,pe})();const fe=se.EMPTY;function de(pe){return pe instanceof se||pe&&"closed"in pe&&(0,l.m)(pe.remove)&&(0,l.m)(pe.add)&&(0,l.m)(pe.unsubscribe)}function ve(pe){(0,l.m)(pe)?pe():pe.unsubscribe()}},2416:(yt,Me,F)=>{F.d(Me,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(yt,Me,F)=>{F.d(Me,{E:()=>X});const X=new(F(9751).y)(se=>se.complete())},8996:(yt,Me,F)=>{F.d(Me,{D:()=>we});var l=F(8421),X=F(5363),O=F(9468),fe=F(9751),ve=F(2202),pe=F(576),G=F(9672);function Z(ge,He){if(!ge)throw new Error("Iterable cannot be null");return new fe.y(Be=>{(0,G.f)(Be,He,()=>{const Xe=ge[Symbol.asyncIterator]();(0,G.f)(Be,He,()=>{Xe.next().then(ee=>{ee.done?Be.complete():Be.next(ee.value)})},0,!0)})})}var je=F(3670),Ae=F(8239),Ce=F(1144),rt=F(6495),_e=F(2206),ye=F(4532),ht=F(3260);function we(ge,He){return He?function Pe(ge,He){if(null!=ge){if((0,je.c)(ge))return function ae(ge,He){return(0,l.Xf)(ge).pipe((0,O.R)(He),(0,X.Q)(He))}(ge,He);if((0,Ce.z)(ge))return function de(ge,He){return new fe.y(Be=>{let Xe=0;return He.schedule(function(){Xe===ge.length?Be.complete():(Be.next(ge[Xe++]),Be.closed||this.schedule())})})}(ge,He);if((0,Ae.t)(ge))return function se(ge,He){return(0,l.Xf)(ge).pipe((0,O.R)(He),(0,X.Q)(He))}(ge,He);if((0,_e.D)(ge))return Z(ge,He);if((0,rt.T)(ge))return function $(ge,He){return new fe.y(Be=>{let Xe;return(0,G.f)(Be,He,()=>{Xe=ge[ve.h](),(0,G.f)(Be,He,()=>{let ee,xt;try{({value:ee,done:xt}=Xe.next())}catch(ut){return void Be.error(ut)}xt?Be.complete():Be.next(ee)},0,!0)}),()=>(0,pe.m)(Xe?.return)&&Xe.return()})}(ge,He);if((0,ht.L)(ge))return function vt(ge,He){return Z((0,ht.Q)(ge),He)}(ge,He)}throw(0,ye.z)(ge)}(ge,He):(0,l.Xf)(ge)}},8421:(yt,Me,F)=>{F.d(Me,{Xf:()=>je});var l=F(7582),X=F(1144),O=F(8239),ae=F(9751),se=F(3670),fe=F(2206),de=F(4532),ve=F(6495),pe=F(3260),G=F(576),$=F(7849),Z=F(8822);function je(Pe){if(Pe instanceof ae.y)return Pe;if(null!=Pe){if((0,se.c)(Pe))return function Ae(Pe){return new ae.y(we=>{const ge=Pe[Z.L]();if((0,G.m)(ge.subscribe))return ge.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,X.z)(Pe))return function Ce(Pe){return new ae.y(we=>{for(let ge=0;ge<Pe.length&&!we.closed;ge++)we.next(Pe[ge]);we.complete()})}(Pe);if((0,O.t)(Pe))return function rt(Pe){return new ae.y(we=>{Pe.then(ge=>{we.closed||(we.next(ge),we.complete())},ge=>we.error(ge)).then(null,$.h)})}(Pe);if((0,fe.D)(Pe))return ye(Pe);if((0,ve.T)(Pe))return function _e(Pe){return new ae.y(we=>{for(const ge of Pe)if(we.next(ge),we.closed)return;we.complete()})}(Pe);if((0,pe.L)(Pe))return function ht(Pe){return ye((0,pe.Q)(Pe))}(Pe)}throw(0,de.z)(Pe)}function ye(Pe){return new ae.y(we=>{(function vt(Pe,we){var ge,He,Be,Xe;return(0,l.mG)(this,void 0,void 0,function*(){try{for(ge=(0,l.KL)(Pe);!(He=yield ge.next()).done;)if(we.next(He.value),we.closed)return}catch(ee){Be={error:ee}}finally{try{He&&!He.done&&(Xe=ge.return)&&(yield Xe.call(ge))}finally{if(Be)throw Be.error}}we.complete()})})(Pe,we).catch(ge=>we.error(ge))})}},6451:(yt,Me,F)=>{F.d(Me,{T:()=>fe});var l=F(8189),X=F(8421),O=F(515),ae=F(7669),se=F(8996);function fe(...de){const ve=(0,ae.yG)(de),pe=(0,ae._6)(de,1/0),G=de;return G.length?1===G.length?(0,X.Xf)(G[0]):(0,l.J)(pe)((0,se.D)(G,ve)):O.E}},5403:(yt,Me,F)=>{F.d(Me,{x:()=>X});var l=F(2961);function X(ae,se,fe,de,ve){return new O(ae,se,fe,de,ve)}class O extends l.Lv{constructor(se,fe,de,ve,pe,G){super(se),this.onFinalize=pe,this.shouldUnsubscribe=G,this._next=fe?function($){try{fe($)}catch(Z){se.error(Z)}}:super._next,this._error=ve?function($){try{ve($)}catch(Z){se.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch($){se.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(yt,Me,F)=>{F.d(Me,{U:()=>O});var l=F(4482),X=F(5403);function O(ae,se){return(0,l.e)((fe,de)=>{let ve=0;fe.subscribe((0,X.x)(de,pe=>{de.next(ae.call(se,pe,ve++))}))})}},8189:(yt,Me,F)=>{F.d(Me,{J:()=>O});var l=F(5577),X=F(4671);function O(ae=1/0){return(0,l.z)(X.y,ae)}},5577:(yt,Me,F)=>{F.d(Me,{z:()=>ve});var l=F(4004),X=F(8421),O=F(4482),ae=F(9672),se=F(5403),de=F(576);function ve(pe,G,$=1/0){return(0,de.m)(G)?ve((Z,je)=>(0,l.U)((Ae,Ce)=>G(Z,Ae,je,Ce))((0,X.Xf)(pe(Z,je))),$):("number"==typeof G&&($=G),(0,O.e)((Z,je)=>function fe(pe,G,$,Z,je,Ae,Ce,rt){const _e=[];let ye=0,ht=0,vt=!1;const Pe=()=>{vt&&!_e.length&&!ye&&G.complete()},we=He=>ye<Z?ge(He):_e.push(He),ge=He=>{Ae&&G.next(He),ye++;let Be=!1;(0,X.Xf)($(He,ht++)).subscribe((0,se.x)(G,Xe=>{je?.(Xe),Ae?we(Xe):G.next(Xe)},()=>{Be=!0},void 0,()=>{if(Be)try{for(ye--;_e.length&&ye<Z;){const Xe=_e.shift();Ce?(0,ae.f)(G,Ce,()=>ge(Xe)):ge(Xe)}Pe()}catch(Xe){G.error(Xe)}}))};return pe.subscribe((0,se.x)(G,we,()=>{vt=!0,Pe()})),()=>{rt?.()}}(Z,je,pe,$)))}},5363:(yt,Me,F)=>{F.d(Me,{Q:()=>ae});var l=F(9672),X=F(4482),O=F(5403);function ae(se,fe=0){return(0,X.e)((de,ve)=>{de.subscribe((0,O.x)(ve,pe=>(0,l.f)(ve,se,()=>ve.next(pe),fe),()=>(0,l.f)(ve,se,()=>ve.complete(),fe),pe=>(0,l.f)(ve,se,()=>ve.error(pe),fe)))})}},3099:(yt,Me,F)=>{F.d(Me,{B:()=>se});var l=F(8421),X=F(7579),O=F(2961),ae=F(4482);function se(de={}){const{connector:ve=(()=>new X.x),resetOnError:pe=!0,resetOnComplete:G=!0,resetOnRefCountZero:$=!0}=de;return Z=>{let je,Ae,Ce,rt=0,_e=!1,ye=!1;const ht=()=>{Ae?.unsubscribe(),Ae=void 0},vt=()=>{ht(),je=Ce=void 0,_e=ye=!1},Pe=()=>{const we=je;vt(),we?.unsubscribe()};return(0,ae.e)((we,ge)=>{rt++,!ye&&!_e&&ht();const He=Ce=Ce??ve();ge.add(()=>{rt--,0===rt&&!ye&&!_e&&(Ae=fe(Pe,$))}),He.subscribe(ge),!je&&rt>0&&(je=new O.Hp({next:Be=>He.next(Be),error:Be=>{ye=!0,ht(),Ae=fe(vt,pe,Be),He.error(Be)},complete:()=>{_e=!0,ht(),Ae=fe(vt,G),He.complete()}}),(0,l.Xf)(we).subscribe(je))})(Z)}}function fe(de,ve,...pe){if(!0===ve)return void de();if(!1===ve)return;const G=new O.Hp({next:()=>{G.unsubscribe(),de()}});return ve(...pe).subscribe(G)}},9468:(yt,Me,F)=>{F.d(Me,{R:()=>X});var l=F(4482);function X(O,ae=0){return(0,l.e)((se,fe)=>{fe.add(O.schedule(()=>se.subscribe(fe),ae))})}},8505:(yt,Me,F)=>{F.d(Me,{b:()=>se});var l=F(576),X=F(4482),O=F(5403),ae=F(4671);function se(fe,de,ve){const pe=(0,l.m)(fe)||de||ve?{next:fe,error:de,complete:ve}:fe;return pe?(0,X.e)((G,$)=>{var Z;null===(Z=pe.subscribe)||void 0===Z||Z.call(pe);let je=!0;G.subscribe((0,O.x)($,Ae=>{var Ce;null===(Ce=pe.next)||void 0===Ce||Ce.call(pe,Ae),$.next(Ae)},()=>{var Ae;je=!1,null===(Ae=pe.complete)||void 0===Ae||Ae.call(pe),$.complete()},Ae=>{var Ce;je=!1,null===(Ce=pe.error)||void 0===Ce||Ce.call(pe,Ae),$.error(Ae)},()=>{var Ae,Ce;je&&(null===(Ae=pe.unsubscribe)||void 0===Ae||Ae.call(pe)),null===(Ce=pe.finalize)||void 0===Ce||Ce.call(pe)}))}):ae.y}},4408:(yt,Me,F)=>{F.d(Me,{o:()=>se});var l=F(727);class X extends l.w0{constructor(de,ve){super()}schedule(de,ve=0){return this}}const O={setInterval(fe,de,...ve){const{delegate:pe}=O;return pe?.setInterval?pe.setInterval(fe,de,...ve):setInterval(fe,de,...ve)},clearInterval(fe){const{delegate:de}=O;return(de?.clearInterval||clearInterval)(fe)},delegate:void 0};var ae=F(8737);class se extends X{constructor(de,ve){super(de,ve),this.scheduler=de,this.work=ve,this.pending=!1}schedule(de,ve=0){var pe;if(this.closed)return this;this.state=de;const G=this.id,$=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId($,G,ve)),this.pending=!0,this.delay=ve,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId($,this.id,ve),this}requestAsyncId(de,ve,pe=0){return O.setInterval(de.flush.bind(de,this),pe)}recycleAsyncId(de,ve,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return ve;null!=ve&&O.clearInterval(ve)}execute(de,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(de,ve);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ve){let G,pe=!1;try{this.work(de)}catch($){pe=!0,G=$||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:de,scheduler:ve}=this,{actions:pe}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(pe,this),null!=de&&(this.id=this.recycleAsyncId(ve,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(yt,Me,F)=>{F.d(Me,{v:()=>O});var l=F(6063);class X{constructor(se,fe=X.now){this.schedulerActionCtor=se,this.now=fe}schedule(se,fe=0,de){return new this.schedulerActionCtor(this,se).schedule(de,fe)}}X.now=l.l.now;class O extends X{constructor(se,fe=X.now){super(se,fe),this.actions=[],this._active=!1}flush(se){const{actions:fe}=this;if(this._active)return void fe.push(se);let de;this._active=!0;do{if(de=se.execute(se.state,se.delay))break}while(se=fe.shift());if(this._active=!1,de){for(;se=fe.shift();)se.unsubscribe();throw de}}}},4986:(yt,Me,F)=>{F.d(Me,{z:()=>O});var l=F(4408);const O=new(F(7565).v)(l.o)},6063:(yt,Me,F)=>{F.d(Me,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(yt,Me,F)=>{F.d(Me,{z:()=>l});const l={setTimeout(X,O,...ae){const{delegate:se}=l;return se?.setTimeout?se.setTimeout(X,O,...ae):setTimeout(X,O,...ae)},clearTimeout(X){const{delegate:O}=l;return(O?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(yt,Me,F)=>{F.d(Me,{h:()=>X});const X=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(yt,Me,F)=>{F.d(Me,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(yt,Me,F)=>{F.d(Me,{_6:()=>fe,jO:()=>ae,yG:()=>se});var l=F(576);function O(de){return de[de.length-1]}function ae(de){return(0,l.m)(O(de))?de.pop():void 0}function se(de){return function X(de){return de&&(0,l.m)(de.schedule)}(O(de))?de.pop():void 0}function fe(de,ve){return"number"==typeof O(de)?de.pop():ve}},8737:(yt,Me,F)=>{function l(X,O){if(X){const ae=X.indexOf(O);0<=ae&&X.splice(ae,1)}}F.d(Me,{P:()=>l})},3888:(yt,Me,F)=>{function l(X){const ae=X(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}F.d(Me,{d:()=>l})},2806:(yt,Me,F)=>{F.d(Me,{O:()=>ae,x:()=>O});var l=F(2416);let X=null;function O(se){if(l.v.useDeprecatedSynchronousErrorHandling){const fe=!X;if(fe&&(X={errorThrown:!1,error:null}),se(),fe){const{errorThrown:de,error:ve}=X;if(X=null,de)throw ve}}else se()}function ae(se){l.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=se)}},9672:(yt,Me,F)=>{function l(X,O,ae,se=0,fe=!1){const de=O.schedule(function(){ae(),fe?X.add(this.schedule(null,se)):this.unsubscribe()},se);if(X.add(de),!fe)return de}F.d(Me,{f:()=>l})},4671:(yt,Me,F)=>{function l(X){return X}F.d(Me,{y:()=>l})},1144:(yt,Me,F)=>{F.d(Me,{z:()=>l});const l=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(yt,Me,F)=>{F.d(Me,{D:()=>X});var l=F(576);function X(O){return Symbol.asyncIterator&&(0,l.m)(O?.[Symbol.asyncIterator])}},576:(yt,Me,F)=>{function l(X){return"function"==typeof X}F.d(Me,{m:()=>l})},3670:(yt,Me,F)=>{F.d(Me,{c:()=>O});var l=F(8822),X=F(576);function O(ae){return(0,X.m)(ae[l.L])}},6495:(yt,Me,F)=>{F.d(Me,{T:()=>O});var l=F(2202),X=F(576);function O(ae){return(0,X.m)(ae?.[l.h])}},8239:(yt,Me,F)=>{F.d(Me,{t:()=>X});var l=F(576);function X(O){return(0,l.m)(O?.then)}},3260:(yt,Me,F)=>{F.d(Me,{L:()=>ae,Q:()=>O});var l=F(7582),X=F(576);function O(se){return(0,l.FC)(this,arguments,function*(){const de=se.getReader();try{for(;;){const{value:ve,done:pe}=yield(0,l.qq)(de.read());if(pe)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(ve)}}finally{de.releaseLock()}})}function ae(se){return(0,X.m)(se?.getReader)}},4482:(yt,Me,F)=>{F.d(Me,{A:()=>X,e:()=>O});var l=F(576);function X(ae){return(0,l.m)(ae?.lift)}function O(ae){return se=>{if(X(se))return se.lift(function(fe){try{return ae(fe,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(yt,Me,F)=>{F.d(Me,{U:()=>O,z:()=>X});var l=F(4671);function X(...ae){return O(ae)}function O(ae){return 0===ae.length?l.y:1===ae.length?ae[0]:function(fe){return ae.reduce((de,ve)=>ve(de),fe)}}},7849:(yt,Me,F)=>{F.d(Me,{h:()=>O});var l=F(2416),X=F(3410);function O(ae){X.z.setTimeout(()=>{const{onUnhandledError:se}=l.v;if(!se)throw ae;se(ae)})}},4532:(yt,Me,F)=>{function l(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Me,{z:()=>l})},4650:(yt,Me,F)=>{F.d(Me,{$8M:()=>bu,$Z:()=>Or,AFp:()=>ly,ALo:()=>ey,AaK:()=>ve,CHM:()=>Wi,CRH:()=>Jv,CZH:()=>cy,CqO:()=>qE,D6c:()=>yS,Dn7:()=>$v,EJc:()=>Yp,EpF:()=>Ab,F4k:()=>zE,FYo:()=>a_,FiY:()=>vs,G48:()=>fC,GfV:()=>u_,Gpc:()=>$,JOm:()=>Es,KtG:()=>ha,LFG:()=>Gn,LSH:()=>$c,Lbi:()=>m0,Lck:()=>Nv,MAs:()=>H_,MMx:()=>Rv,NdJ:()=>ZE,OlP:()=>Xt,Oqu:()=>sh,PXZ:()=>cC,Q6J:()=>wm,QGY:()=>GE,QP$:()=>Tt,Qsj:()=>Ow,R0b:()=>In,RDi:()=>Hg,Rgc:()=>Wa,SBq:()=>Uf,Sil:()=>KT,Suo:()=>Qv,TTD:()=>di,TgZ:()=>is,W1O:()=>WI,X6Q:()=>Xp,XFs:()=>Ye,Xpm:()=>Nn,Xts:()=>Ud,Y36:()=>qd,YKP:()=>Np,YNc:()=>$E,Yjl:()=>q,Yz7:()=>K,Z0I:()=>jt,ZZ4:()=>M0,_Bn:()=>Fr,_UZ:()=>nh,_Vd:()=>Vf,_c5:()=>DC,_uU:()=>sI,aQg:()=>N0,c2e:()=>ai,cJS:()=>De,cg1:()=>vp,dDg:()=>XT,dqk:()=>pn,eFA:()=>Lt,ekj:()=>bm,eoX:()=>Ke,f3M:()=>ft,g9A:()=>wl,h0i:()=>fr,hGG:()=>bC,hij:()=>oh,iGM:()=>ph,ifc:()=>_t,ip1:()=>vn,jDz:()=>Km,kL8:()=>Om,lG2:()=>L,lcZ:()=>kp,lqb:()=>qc,lri:()=>st,n5z:()=>kn,oAB:()=>Yr,oxw:()=>Pb,q4F:()=>Lw,qLn:()=>Bf,qOj:()=>rl,qZA:()=>fp,rWj:()=>pt,sBO:()=>pC,sIi:()=>Qd,s_b:()=>fh,soG:()=>El,tb:()=>y0,tp0:()=>es,uIk:()=>$_,vHH:()=>Ce,vpe:()=>Co,wAp:()=>Rt,xp6:()=>g_,z2F:()=>Il,zSh:()=>Of,zs3:()=>$u});var l=F(7579),X=F(727),O=F(9751),ae=F(6451),se=F(3099);function fe(s){for(let o in s)if(s[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function de(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function ve(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ve).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=fe({__forward_ref__:fe});function $(s){return s.__forward_ref__=$,s.toString=function(){return ve(this())},s}function Z(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===$}class Ce extends Error{constructor(o,a){super(function rt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function we(s,o){throw new Ce(-201,!1)}function xn(s,o){null==s&&function Gt(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function K(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function De(s){return{providers:s.providers||[],imports:s.imports||[]}}function tt(s){return un(s,Er)||un(s,Wn)}function jt(s){return null!==tt(s)}function un(s,o){return s.hasOwnProperty(o)?s[o]:null}function fn(s){return s&&(s.hasOwnProperty(zt)||s.hasOwnProperty(ir))?s[zt]:null}const Er=fe({\u0275prov:fe}),zt=fe({\u0275inj:fe}),Wn=fe({ngInjectableDef:fe}),ir=fe({ngInjectorDef:fe});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let Mn;function Br(s){const o=Mn;return Mn=s,o}function xo(s,o,a){const c=tt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ye.Optional?null:void 0!==o?o:void we(ve(s))}function sr(s){return{toString:s}.toString()}var Cn=(()=>((Cn=Cn||{})[Cn.OnPush=0]="OnPush",Cn[Cn.Default=1]="Default",Cn))(),_t=(()=>{return(s=_t||(_t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",_t;var s})();const pn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kn={},Dt=[],Ir=fe({\u0275cmp:fe}),cn=fe({\u0275dir:fe}),Mo=fe({\u0275pipe:fe}),Yt=fe({\u0275mod:fe}),or=fe({\u0275fac:fe}),Cr=fe({__NG_ELEMENT_ID__:fe});let Ai=0;function Nn(s){return sr(()=>{const a=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Cn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Dt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||_t.Emulated,id:"c"+Ai++,styles:s.styles||Dt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,_=s.features;return h.inputs=U(s.inputs,c),h.outputs=U(s.outputs),_&&_.forEach(E=>E(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(zi).filter(jn):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(Ge).filter(jn):null,h})}function zi(s){return ue(s)||Q(s)}function jn(s){return null!==s}function Yr(s){return sr(()=>({type:s.type,bootstrap:s.bootstrap||Dt,declarations:s.declarations||Dt,imports:s.imports||Dt,exports:s.exports||Dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function U(s,o){if(null==s)return Kn;const a={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),a[h]=c,o&&(o[h]=g)}return a}const L=Nn;function q(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ue(s){return s[Ir]||null}function Q(s){return s[cn]||null}function Ge(s){return s[Mo]||null}function Tt(s){const o=ue(s)||Q(s)||Ge(s);return null!==o&&o.standalone}function Ot(s,o){const a=s[Yt]||null;if(!a&&!0===o)throw new Error(`Type ${ve(s)} does not have '\u0275mod' property.`);return a}function ar(s){return Array.isArray(s)&&"object"==typeof s[1]}function $r(s){return Array.isArray(s)&&!0===s[1]}function Ro(s){return 0!=(8&s.flags)}function tu(s){return 2==(2&s.flags)}function ls(s){return 1==(1&s.flags)}function Mi(s){return null!==s.template}function Po(s){return 0!=(256&s[2])}function ds(s,o){return s.hasOwnProperty(or)?s[or]:null}class Lh{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function di(){return zl}function zl(s){return s.type.prototype.ngOnChanges&&(s.setInput=cc),aa}function aa(){const s=Vh(this),o=s?.current;if(o){const a=s.previous;if(a===Kn)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function cc(s,o,a,c){const h=Vh(s)||function lc(s,o){return s[su]=o}(s,{previous:Kn,current:null}),g=h.current||(h.current={}),_=h.previous,E=this.declaredInputs[a],C=_[E];g[E]=new Lh(C&&C.currentValue,o,_===Kn),s[c]=o}di.ngInherit=!0;const su="__ngSimpleChanges__";function Vh(s){return s[su]||null}function $n(s){for(;Array.isArray(s);)s=s[0];return s}function hi(s,o){return $n(o[s])}function Hr(s,o){return $n(o[s.index])}function ua(s,o){return s.data[o]}function ca(s,o){return s[o]}function Hn(s,o){const a=o[s];return ar(a)?a:a[0]}function Ls(s){return 64==(64&s[2])}function Ri(s,o){return null==o?null:s[o]}function so(s){s[18]=0}function Jr(s,o){s[5]+=o;let a=s,c=s[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const wt={lFrame:Xl(null),bindingsEnabled:!0};function Kl(){return wt.bindingsEnabled}function Se(){return wt.lFrame.lView}function Ht(){return wt.lFrame.tView}function Wi(s){return wt.lFrame.contextLView=s,s[8]}function ha(s){return wt.lFrame.contextLView=null,s}function Pn(){let s=lu();for(;null!==s&&64===s.type;)s=s.parent;return s}function lu(){return wt.lFrame.currentTNode}function Mr(s,o){const a=wt.lFrame;a.currentTNode=s,a.isParent=o}function oo(){return wt.lFrame.isParent}function Sr(){const s=wt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Pi(){return wt.lFrame.bindingIndex++}function Ql(s,o){const a=wt.lFrame;a.bindingIndex=a.bindingRootIndex=s,fu(o)}function fu(s){wt.lFrame.currentDirectiveIndex=s}function pu(){return wt.lFrame.currentQueryIndex}function Oi(s){wt.lFrame.currentQueryIndex=s}function Jl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function pa(s,o,a){if(a&Ye.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||a&Ye.Host||(h=Jl(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const c=wt.lFrame=ao();return c.currentTNode=o,c.lView=s,!0}function gu(s){const o=ao(),a=s[1];wt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function ao(){const s=wt.lFrame,o=null===s?null:s.child;return null===o?Xl(s):o}function Xl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ga(){const s=wt.lFrame;return wt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ed=ga;function ko(){const s=ga();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Gr(){return wt.lFrame.selectedIndex}function ps(s){wt.lFrame.selectedIndex=s}function On(){const s=wt.lFrame;return ua(s.tView,s.selectedIndex)}function uo(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:R}=g;_&&(s.contentHooks||(s.contentHooks=[])).push(-a,_),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-a,C),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(a,R)}}function mu(s,o,a){ma(s,o,3,a)}function Us(s,o,a,c){(3&s[2])===a&&ma(s,o,a,c)}function ad(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function ma(s,o,a,c){const g=c??-1,_=o.length-1;let E=0;for(let C=void 0!==c?65535&s[18]:0;C<_;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=c&&E>=c)break}else o[C]<0&&(s[18]+=65536),(E<g||-1==g)&&(Hh(s,a,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Hh(s,o,a,c){const h=a[c]<0,g=a[c+1],E=s[h?-a[c]:a[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class ya{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function vu(s,o,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const g=a[c++],_=a[c++],E=a[c++];s.setAttribute(o,_,E,g)}else{const g=h,_=a[++c];gc(g)?s.setProperty(o,g,_):s.setAttribute(o,g,_),c++}}return c}function va(s){return 3===s||4===s||6===s}function gc(s){return 64===s.charCodeAt(0)}function wa(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||wu(s,a,h,null,-1===a||2===a?o[++c]:null)}}return s}function wu(s,o,a,c,h){let g=0,_=s.length;if(-1===o)_=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==h&&(s[g+1]=h));if(c===s[g+1])return void(s[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==_&&(s.splice(_,0,o),g=_+1),s.splice(g++,0,a),null!==c&&s.splice(g++,0,c),null!==h&&s.splice(g++,0,h)}function zh(s){return-1!==s}function Eu(s){return 32767&s}function Yi(s,o){let a=function Hy(s){return s>>16}(s),c=o;for(;a>0;)c=c[15],a--;return c}let Iu=!0;function Fo(s){const o=Iu;return Iu=s,o}let yc=0;const pi={};function Tn(s,o){const a=Yn(s,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,vc(c.data,s),vc(o,null),vc(c.blueprint,null));const h=Lo(s,o),g=s.injectorIndex;if(zh(h)){const _=Eu(h),E=Yi(h,o),C=E[1].data;for(let S=0;S<8;S++)o[g+S]=E[_+S]|C[_+S]}return o[g+8]=h,g}function vc(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Yn(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Lo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){if(c=Ec(h),null===c)return-1;if(a++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Ea(s,o,a){!function _c(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Cr)&&(c=a[Cr]),null==c&&(c=a[Cr]=yc++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,a)}function Cu(s,o,a){if(a&Ye.Optional||void 0!==s)return s;we()}function qh(s,o,a,c){if(a&Ye.Optional&&void 0===c&&(c=null),0==(a&(Ye.Self|Ye.Host))){const h=s[9],g=Br(void 0);try{return h?h.get(o,c,a&Ye.Optional):xo(o,c,a&Ye.Optional)}finally{Br(g)}}return Cu(c,0,a)}function Du(s,o,a,c=Ye.Default,h){if(null!==s){if(1024&o[2]){const _=function Ca(s,o,a,c,h){let g=s,_=o;for(;null!==g&&null!==_&&1024&_[2]&&!(256&_[2]);){const E=Vo(g,_,a,c|Ye.Self,pi);if(E!==pi)return E;let C=g.parent;if(!C){const S=_[21];if(S){const R=S.get(a,pi,c);if(R!==pi)return R}C=Ec(_),_=_[15]}g=C}return h}(s,o,a,c,pi);if(_!==pi)return _}const g=Vo(s,o,a,c,pi);if(g!==pi)return g}return qh(o,a,c,h)}function Vo(s,o,a,c,h){const g=function js(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Cr)?s[Cr]:void 0;return"number"==typeof o?o>=0?255&o:Zh:o}(a);if("function"==typeof g){if(!pa(o,s,c))return c&Ye.Host?Cu(h,0,c):qh(o,a,c,h);try{const _=g(c);if(null!=_||c&Ye.Optional)return _;we()}finally{ed()}}else if("number"==typeof g){let _=null,E=Yn(s,o),C=-1,S=c&Ye.Host?o[16][6]:null;for((-1===E||c&Ye.SkipSelf)&&(C=-1===E?Lo(s,o):o[E+8],-1!==C&&dd(c,!1)?(_=o[1],E=Eu(C),o=Yi(C,o)):E=-1);-1!==E;){const R=o[1];if(ld(g,E,R.data)){const P=Sg(E,o,a,_,c,S);if(P!==pi)return P}C=o[E+8],-1!==C&&dd(c,o[1].data[E+8]===S)&&ld(g,E,o)?(_=R,E=Eu(C),o=Yi(C,o)):E=-1}}return h}function Sg(s,o,a,c,h,g){const _=o[1],E=_.data[s+8],R=Ji(E,_,a,null==c?tu(E)&&Iu:c!=_&&0!=(3&E.type),h&Ye.Host&&g===E);return null!==R?Ia(o,_,R,E):pi}function Ji(s,o,a,c,h){const g=s.providerIndexes,_=o.data,E=1048575&g,C=s.directiveStart,R=g>>20,j=h?E+R:s.directiveEnd;for(let J=c?E:E+R;J<j;J++){const me=_[J];if(J<C&&a===me||J>=C&&me.type===a)return J}if(h){const J=_[C];if(J&&Mi(J)&&J.type===a)return C}return null}function Ia(s,o,a,c){let h=s[a];const g=o.data;if(function yu(s){return s instanceof ya}(h)){const _=h;_.resolving&&function ht(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ce(-200,`Circular dependency in DI detected for ${s}${a}`)}(function ye(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}(g[a]));const E=Fo(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?Br(_.injectImpl):null;pa(s,c,Ye.Default);try{h=s[a]=_.factory(void 0,g,s,c),o.firstCreatePass&&a>=c.directiveStart&&function od(s,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(c){const _=zl(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,_)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,h),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==C&&Br(C),Fo(E),_.resolving=!1,ed()}}return h}function ld(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function dd(s,o){return!(s&Ye.Self||s&Ye.Host&&o)}class ki{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Du(this._tNode,this._lView,o,c,a)}}function Zh(){return new ki(Pn(),Se())}function kn(s){return sr(()=>{const o=s.prototype.constructor,a=o[or]||wc(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const g=h[or]||wc(h);if(g&&g!==a)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function wc(s){return je(s)?()=>{const o=wc(Z(s));return o&&o()}:ds(s)}function Ec(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function bu(s){return function co(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const g=a[h];if(va(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(g===o)return a[h+1];h+=2}}}return null}(Pn(),s)}const Uo="__parameters__";function $s(s,o,a){return sr(()=>{const c=function Bo(s){return function(...a){if(s){const c=s(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...g){if(this instanceof h)return c.apply(this,g),this;const _=new h(...g);return E.annotation=_,E;function E(C,S,R){const P=C.hasOwnProperty(Uo)?C[Uo]:Object.defineProperty(C,Uo,{value:[]})[Uo];for(;P.length<=R;)P.push(null);return(P[R]=P[R]||[]).push(_),C}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Xt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=K({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ur(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let c=s[a];Array.isArray(c)?(o===s&&(o=s.slice(0,a)),ur(c,o)):o!==s&&o.push(c)}return o}function gi(s,o){s.forEach(a=>Array.isArray(a)?gi(a,o):o(a))}function Qh(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function mi(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function yi(s,o,a){let c=Ta(s,o);return c>=0?s[1|c]=a:(c=~c,function Jh(s,o,a,c){let h=s.length;if(h==o)s.push(a,c);else if(1===h)s.push(c,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=c}}(s,c,o,a)),c}function pd(s,o){const a=Ta(s,o);if(a>=0)return s[1|a]}function Ta(s,o){return function Xh(s,o,a){let c=0,h=s.length>>a;for(;h!==c;){const g=c+(h-c>>1),_=s[g<<a];if(o===_)return g<<a;_>o?h=g:c=g+1}return~(h<<a)}(s,o,1)}const _r={},cr="__NG_DI_FLAG__",fo="ngTempTokenPath",Xi=/\n/gm,Su="__source";let Ho;function Go(s){const o=Ho;return Ho=s,o}function _d(s,o=Ye.Default){if(void 0===Ho)throw new Ce(-203,!1);return null===Ho?xo(s,void 0,o):Ho.get(s,o&Ye.Optional?null:void 0,o)}function Gn(s,o=Ye.Default){return(function Si(){return Mn}()||_d)(Z(s),o)}function ft(s,o=Ye.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Gn(s,o)}function Ac(s){const o=[];for(let a=0;a<s.length;a++){const c=Z(s[a]);if(Array.isArray(c)){if(0===c.length)throw new Ce(900,!1);let h,g=Ye.Default;for(let _=0;_<c.length;_++){const E=c[_],C=Au(E);"number"==typeof C?-1===C?h=E.token:g|=C:h=E}o.push(Gn(h,g))}else o.push(Gn(c))}return o}function po(s,o){return s[cr]=o,s.prototype[cr]=o,s}function Au(s){return s[cr]}const vs=po($s("Optional"),8),es=po($s("SkipSelf"),4);var Es=(()=>((Es=Es||{})[Es.Important=1]="Important",Es[Es.DashCase=2]="DashCase",Es))();const uf=new Map;let qy=0;const Is="__ngContext__";function Ct(s,o){ar(o)?(s[Is]=o[20],function Rg(s){uf.set(s[20],s)}(o)):s[Is]=o}function Ru(s,o){return undefined(s,o)}function Nc(s){const o=s[3];return $r(o)?o[3]:o}function Pu(s){return Wo(s[13])}function Vg(s){return Wo(s[4])}function Wo(s){for(;null!==s&&!$r(s);)s=s[4];return s}function Ou(s,o,a,c,h){if(null!=c){let g,_=!1;$r(c)?g=c:ar(c)&&(_=!0,c=c[0]);const E=$n(c);0===s&&null!==a?null==h?Oc(o,a,E):_o(o,a,E,h||null,!0):1===s&&null!==a?_o(o,a,E,h||null,!0):2===s?function Ef(s,o,a){const c=xd(s,o);c&&function yf(s,o,a,c){s.removeChild(o,a,c)}(s,c,o,a)}(o,E,_):3===s&&o.destroyNode(E),null!=g&&function Df(s,o,a,c,h){const g=a[7];g!==$n(a)&&Ou(o,s,c,g,h);for(let E=10;E<a.length;E++){const C=a[E];kc(C[1],C,s,o,c,g)}}(o,s,g,a,h)}}function pf(s,o,a){return s.createElement(o,a)}function Fu(s,o){const a=s[9],c=a.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Jr(h,-1)),a.splice(c,1)}function ka(s,o){if(s.length<=10)return;const a=10+o,c=s[a];if(c){const h=c[17];null!==h&&h!==s&&Fu(h,c),o>0&&(s[a-1][4]=c[4]);const g=mi(s,10+o);!function Oa(s,o){kc(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=g[19];null!==_&&_.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Fa(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&kc(s,o,a,3,null,null),function Ky(s){let o=s[13];if(!o)return Sd(s[1],s);for(;o;){let a=null;if(ar(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==s;)ar(o)&&Sd(o[1],o),o=o[3];null===o&&(o=s),ar(o)&&Sd(o[1],o),a=o&&o[4]}o=a}}(o)}}function Sd(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Ad(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof ya)){const g=a[c+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const E=h[g[_]],C=g[_+1];try{C.call(E)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function mf(s,o){const a=s.cleanup,c=o[7];let h=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+1],E="function"==typeof _?_(o):$n(o[_]),C=c[h=a[g+2]],S=a[g+3];"boolean"==typeof S?E.removeEventListener(a[g],C,S):S>=0?c[h=S]():c[h=-S].unsubscribe(),g+=2}else{const _=c[h=a[g+1]];a[g].call(_)}if(null!==c){for(let g=h+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&$r(o[3])){a!==o[3]&&Fu(a,o);const c=o[19];null!==c&&c.detachView(s)}!function Pg(s){uf.delete(s[20])}(o)}}function La(s,o,a){return function Ug(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===_t.None||h===_t.Emulated)return null}return Hr(c,a)}(s,o.parent,a)}function _o(s,o,a,c,h){s.insertBefore(o,a,c,h)}function Oc(s,o,a){s.appendChild(o,a)}function Bg(s,o,a,c,h){null!==c?_o(s,o,a,c,h):Oc(s,o,a)}function xd(s,o){return s.parentNode(o)}let Qs,vf=function Md(s,o,a){return 40&s.type?Hr(s,a):null};function Ys(s,o,a,c){const h=La(s,c,o),g=o[11],E=function jg(s,o,a){return vf(s,o,a)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(a))for(let C=0;C<a.length;C++)Bg(g,h,a[C],E,!1);else Bg(g,h,a,E,!1)}function Ds(s,o){if(null!==o){const a=o.type;if(3&a)return Hr(o,s);if(4&a)return Rd(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return Ds(s,c);{const h=s[o.index];return $r(h)?Rd(-1,h):$n(h)}}if(32&a)return Ru(o,s)()||$n(s[o.index]);{const c=wf(s,o);return null!==c?Array.isArray(c)?c[0]:Ds(Nc(s[16]),c):Ds(s,o.next)}}return null}function wf(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Rd(s,o){const a=10+s+1;if(a<o.length){const c=o[a],h=c[1].firstChild;if(null!==h)return Ds(c,h)}return o[7]}function If(s,o,a,c,h,g,_){for(;null!=a;){const E=c[a.index],C=a.type;if(_&&0===o&&(E&&Ct($n(E),c),a.flags|=4),64!=(64&a.flags))if(8&C)If(s,o,a.child,c,h,g,!1),Ou(o,s,h,E,g);else if(32&C){const S=Ru(a,c);let R;for(;R=S();)Ou(o,s,h,R,g);Ou(o,s,h,E,g)}else 16&C?Cf(s,o,c,a,h,g):Ou(o,s,h,E,g);a=_?a.projectionNext:a.next}}function kc(s,o,a,c,h,g){If(a,c,s.firstChild,o,h,g,!1)}function Cf(s,o,a,c,h,g){const _=a[16],C=_[6].projection[c.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)Ou(o,s,h,C[S],g);else If(s,o,C,_[3],h,g,!0)}function Tf(s,o,a){s.setAttribute(o,"style",a)}function Sf(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function Hg(s){Qs=s}class Af{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function dr(s){return s instanceof Af?s.changingThisBreaksApplicationSecurity:s}const p=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var hr=(()=>((hr=hr||{})[hr.NONE=0]="NONE",hr[hr.HTML=1]="HTML",hr[hr.STYLE=2]="STYLE",hr[hr.SCRIPT=3]="SCRIPT",hr[hr.URL=4]="URL",hr[hr.RESOURCE_URL=5]="RESOURCE_URL",hr))();function $c(s){const o=function Hc(){const s=Se();return s&&s[12]}();return o?o.sanitize(hr.URL,s)||"":function vo(s,o){const a=function zg(s){return s instanceof Af&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?dr(s):function v(s){return(s=String(s)).match(p)?s:"unsafe:"+s}(_e(s))}const Ud=new Xt("ENVIRONMENT_INITIALIZER"),Gc=new Xt("INJECTOR",-1),Cw=new Xt("INJECTOR_DEF_TYPES");class Dw{get(o,a=_r){if(a===_r){const c=new Error(`NullInjectorError: No provider for ${ve(o)}!`);throw c.name="NullInjectorError",c}return a}}function SD(...s){return{\u0275providers:bw(0,s)}}function bw(s,...o){const a=[],c=new Set;let h;return gi(o,g=>{const _=g;n_(_,a,[],c)&&(h||(h=[]),h.push(_))}),void 0!==h&&Tw(h,a),a}function Tw(s,o){for(let a=0;a<s.length;a++){const{providers:h}=s[a];gi(h,g=>{o.push(g)})}}function n_(s,o,a,c){if(!(s=Z(s)))return!1;let h=null,g=fn(s);const _=!g&&ue(s);if(g||_){if(_&&!_.standalone)return!1;h=s}else{const C=s.ngModule;if(g=fn(C),!g)return!1;h=C}const E=c.has(h);if(_){if(E)return!1;if(c.add(h),_.dependencies){const C="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const S of C)n_(S,o,a,c)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let S;c.add(h);try{gi(g.imports,R=>{n_(R,o,a,c)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&Tw(S,o)}if(!E){const S=ds(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:Dt},{provide:Cw,useValue:h,multi:!0},{provide:Ud,useValue:()=>Gn(h),multi:!0})}const C=g.providers;null==C||E||gi(C,R=>{o.push(R)})}}return h!==s&&void 0!==s.providers}const AD=fe({provide:String,useValue:fe});function r_(s){return null!==s&&"object"==typeof s&&AD in s}function Ba(s){return"function"==typeof s}const Of=new Xt("Set Injector scope."),zc={},xD={};let s_;function Kg(){return void 0===s_&&(s_=new Dw),s_}class qc{}class kf extends qc{constructor(o,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,o_(o,_=>this.processProvider(_)),this.records.set(Gc,Zc(void 0,this)),h.has("environment")&&this.records.set(qc,Zc(void 0,this));const g=this.records.get(Of);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Cw.multi,Dt,Ye.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Go(this),c=Br(void 0);try{return o()}finally{Go(a),Br(c)}}get(o,a=_r,c=Ye.Default){this.assertNotDestroyed();const h=Go(this),g=Br(void 0);try{if(!(c&Ye.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function MD(s){return"function"==typeof s||"object"==typeof s&&s instanceof Xt}(o)&&tt(o);E=C&&this.injectableDefInScope(C)?Zc(Yg(o),zc):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&Ye.Self?Kg():this.parent).get(o,a=c&Ye.Optional&&a===_r?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[fo]=_[fo]||[]).unshift(ve(o)),h)throw _;return function xu(s,o,a,c){const h=s[fo];throw o[Su]&&h.unshift(o[Su]),s.message=function Fn(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=ve(o);if(Array.isArray(o))h=o.map(ve).join(" -> ");else if("object"==typeof o){let g=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];g.push(_+":"+("string"==typeof E?JSON.stringify(E):ve(E)))}h=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${s.replace(Xi,"\n  ")}`}("\n"+s.message,h,a,c),s.ngTokenPath=h,s[fo]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{Br(g),Go(h)}}resolveInjectorInitializers(){const o=Go(this),a=Br(void 0);try{const c=this.get(Ud.multi,Dt,Ye.Self);for(const h of c)h()}finally{Go(o),Br(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(ve(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processProvider(o){let a=Ba(o=Z(o))?o:Z(o&&o.provide);const c=function Qg(s){return r_(s)?Zc(void 0,s.useValue):Zc(Ff(s),zc)}(o);if(Ba(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Zc(void 0,zc,!0),h.factory=()=>Ac(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===zc&&(a.value=xD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Mw(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Z(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Yg(s){const o=tt(s),a=null!==o?o.factory:ds(s);if(null!==a)return a;if(s instanceof Xt)throw new Ce(204,!1);if(s instanceof Function)return function xw(s){const o=s.length;if(o>0)throw function ho(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}(o,"?"),new Ce(204,!1);const a=function Mt(s){const o=s&&(s[Er]||s[Wn]);if(o){const a=function hn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ce(204,!1)}function Ff(s,o,a){let c;if(Ba(s)){const h=Z(s);return ds(h)||Yg(h)}if(r_(s))c=()=>Z(s.useValue);else if(function Sw(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Ac(s.deps||[]));else if(function i_(s){return!(!s||!s.useExisting)}(s))c=()=>Gn(Z(s.useExisting));else{const h=Z(s&&(s.useClass||s.provide));if(!function Lf(s){return!!s.deps}(s))return ds(h)||Yg(h);c=()=>new h(...Ac(s.deps))}return c}function Zc(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function ND(s){return!!s.\u0275providers}function o_(s,o){for(const a of s)Array.isArray(a)?o_(a,o):ND(a)?o_(a.\u0275providers,o):o(a)}class Nw{}class PD{resolveComponentFactory(o){throw function Jg(s){const o=Error(`No component factory found for ${ve(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Vf=(()=>{class s{}return s.NULL=new PD,s})();function OD(){return Bd(Pn(),Se())}function Bd(s,o){return new Uf(Hr(s,o))}let Uf=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=OD,s})();function Pw(s){return s instanceof Uf?s.nativeElement:s}class a_{}let Ow=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function kw(){const s=Se(),a=Hn(Pn().index,s);return(ar(a)?a:s)[11]}(),s})(),Fw=(()=>{class s{}return s.\u0275prov=K({token:s,providedIn:"root",factory:()=>null}),s})();class u_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Lw=new u_("14.3.0"),c_={};function d_(s){return s.ngOriginalError}class Bf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&d_(o);for(;a&&d_(a);)a=d_(a);return a||null}}function ja(s){return s instanceof Function?s():s}function jf(s,o,a){let c=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===c||s.charCodeAt(h+g)<=32)return h}a=h+1}}const zw="ng-template";function VD(s,o,a){let c=0;for(;c<s.length;){let h=s[c++];if(a&&"class"===h){if(h=s[c],-1!==jf(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function qw(s){return 4===s.type&&s.value!==zw}function UD(s,o,a){return o===(4!==s.type||a?s.value:zw)}function Zw(s,o,a){let c=4;const h=s.attrs||[],g=function em(s){for(let o=0;o<s.length;o++)if(va(s[o]))return o;return s.length}(h);let _=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!_)if(4&c){if(c=2|1&c,""!==C&&!UD(s,C,a)||""===C&&1===o.length){if(en(c))return!1;_=!0}}else{const S=8&c?C:o[++E];if(8&c&&null!==s.attrs){if(!VD(s.attrs,S,a)){if(en(c))return!1;_=!0}continue}const P=BD(8&c?"class":C,h,qw(s),a);if(-1===P){if(en(c))return!1;_=!0;continue}if(""!==S){let j;j=P>g?"":h[P+1].toLowerCase();const J=8&c?j:null;if(J&&-1!==jf(J,S,0)||2&c&&S!==j){if(en(c))return!1;_=!0}}}}else{if(!_&&!en(c)&&!en(C))return!1;if(_&&en(C))continue;_=!1,c=C|1&c}}return en(c)||_}function en(s){return 0==(1&s)}function BD(s,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let g=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)g=!0;else{if(1===_||2===_){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=g?1:2}return-1}return function jD(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function f_(s,o,a=!1){for(let c=0;c<o.length;c++)if(Zw(s,o[c],a))return!0;return!1}function p_(s,o){return s?":not("+o.trim()+")":o}function zx(s){let o=s[0],a=1,c=2,h="",g=!1;for(;a<s.length;){let _=s[a];if("string"==typeof _)if(2&c){const E=s[++a];h+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+_:4&c&&(h+=" "+_);else""!==h&&!en(_)&&(o+=p_(g,h),h=""),c=_,g=g||!en(c);a++}return""!==h&&(o+=p_(g,h)),o}const Vt={};function g_(s){$f(Ht(),Se(),Gr()+s,!1)}function $f(s,o,a,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&mu(o,g,a)}else{const g=s.preOrderHooks;null!==g&&Us(o,g,0,a)}ps(a)}function Yw(s,o=null,a=null,c){const h=Qw(s,o,a,c);return h.resolveInjectorInitializers(),h}function Qw(s,o=null,a=null,c,h=new Set){const g=[a||Dt,SD(s)];return c=c||("object"==typeof s?void 0:ve(s)),new kf(g,o||Kg(),c||null,h)}let $u=(()=>{class s{static create(a,c){if(Array.isArray(a))return Yw({name:""},c,a,"");{const h=a.name??"";return Yw({name:h},a.parent,a.providers,h)}}}return s.THROW_IF_NOT_FOUND=_r,s.NULL=new Dw,s.\u0275prov=K({token:s,providedIn:"any",factory:()=>Gn(Gc)}),s.__NG_ELEMENT_ID__=-1,s})();function qd(s,o=Ye.Default){const a=Se();return null===a?Gn(s,o):Du(Pn(),a,Z(s),o)}function Or(){throw new Error("invalid")}function Hf(s,o){return s<<17|o<<2}function Js(s){return s>>17&32767}function im(s){return 2|s}function Qo(s){return(131068&s)>>2}function sm(s,o){return-131069&s|o<<2}function om(s){return 1|s}function Qf(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const h=a[c],g=a[c+1];if(-1!==g){const _=s.data[g];Oi(h),_.contentQueries(2,o[g],g)}}}function Wd(s,o,a,c,h,g,_,E,C,S,R){const P=o.blueprint.slice();return P[0]=h,P[2]=76|c,(null!==R||s&&1024&s[2])&&(P[2]|=1024),so(P),P[3]=P[15]=s,P[8]=a,P[10]=_||s&&s[10],P[11]=E||s&&s[11],P[12]=C||s&&s[12]||null,P[9]=S||s&&s[9]||null,P[6]=g,P[20]=function Ng(){return qy++}(),P[21]=R,P[16]=2==o.type?s[16]:P,P}function Jc(s,o,a,c,h){let g=s.data[o];if(null===g)g=function Xf(s,o,a,c,h){const g=lu(),_=oo(),C=s.data[o]=function dm(s,o,a,c,h,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==g&&(_?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,a,c,h),function hu(){return wt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=c,g.attrs=h;const _=function fs(){const s=wt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return Mr(g,!0),g}function Xc(s,o,a,c){if(0===a)return-1;const h=o.length;for(let g=0;g<a;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Kd(s,o,a){gu(o);try{const c=s.viewQuery;null!==c&&Gu(1,c,a);const h=s.template;null!==h&&S_(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Qf(s,o),s.staticViewQueries&&Gu(2,s.viewQuery,a);const g=s.components;null!==g&&function Jf(s,o){for(let a=0;a<o.length;a++)uM(s,o[a])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ko()}}function ep(s,o,a,c){const h=o[2];if(128!=(128&h)){gu(o);try{so(o),function pc(s){return wt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&S_(s,o,a,2,c);const _=3==(3&h);if(_){const S=s.preOrderCheckHooks;null!==S&&mu(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Us(o,S,0,null),ad(o,0)}if(function oM(s){for(let o=Pu(s);null!==o;o=Vg(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const h=a[c],g=h[3];0==(512&h[2])&&Jr(g,1),h[2]|=512}}}(o),function AE(s){for(let o=Pu(s);null!==o;o=Vg(o))for(let a=10;a<o.length;a++){const c=o[a],h=c[1];Ls(c)&&ep(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Qf(s,o),_){const S=s.contentCheckHooks;null!==S&&mu(o,S)}else{const S=s.contentHooks;null!==S&&Us(o,S,1),ad(o,1)}!function Yf(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const h=a[c];if(h<0)ps(~h);else{const g=h,_=a[++c],E=a[++c];Ql(_,g),E(2,o[g])}}}finally{ps(-1)}}(s,o);const E=s.components;null!==E&&function Zd(s,o){for(let a=0;a<o.length;a++)aM(s,o[a])}(o,E);const C=s.viewQuery;if(null!==C&&Gu(2,C,c),_){const S=s.viewCheckHooks;null!==S&&mu(o,S)}else{const S=s.viewHooks;null!==S&&Us(o,S,2),ad(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Jr(o[3],-1))}finally{ko()}}}function S_(s,o,a,c,h){const g=Gr(),_=2&c;try{ps(-1),_&&o.length>22&&$f(s,o,22,!1),a(c,h)}finally{ps(g)}}function Ga(s,o,a){!Kl()||(function DE(s,o,a,c){const h=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||Tn(a,o),Ct(c,o);const _=a.initialInputs;for(let E=h;E<g;E++){const C=s.data[E],S=Mi(C);S&&rp(o,a,C);const R=Ia(o,s,E,a);Ct(R,o),null!==_&&TE(0,E-h,R,C,0,_),S&&(Hn(a.index,o)[8]=R)}}(s,o,a,Hr(a,o)),128==(128&a.flags)&&function sM(s,o,a){const c=a.directiveStart,h=a.directiveEnd,g=a.index,_=function Oo(){return wt.lFrame.currentDirectiveIndex}();try{ps(g);for(let E=c;E<h;E++){const C=s.data[E],S=o[E];fu(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&pm(C,S)}}finally{ps(-1),fu(_)}}(s,o,a))}function vE(s,o,a=Hr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let g=0;g<c.length;g+=2){const _=c[g+1],E=-1===_?a(o,s):s[_];s[h++]=E}}}function rb(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=x_(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function x_(s,o,a,c,h,g,_,E,C,S){const R=22+c,P=R+h,j=function rM(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:Vt);return a}(R,P),J="function"==typeof S?S():S;return j[1]={type:s,blueprint:j,template:a,queries:null,viewQuery:E,declTNode:o,data:j.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:J,incompleteFirstPass:!1}}function np(s,o,a,c){const h=op(o);null===a?h.push(c):(h.push(a),s.firstCreatePass&&NE(s).push(c,h.length-1))}function wE(s,o,a){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,h):a[c]=[o,h]}return a}function hm(s,o){const c=o.directiveEnd,h=s.data,g=o.attrs,_=[];let E=null,C=null;for(let S=o.directiveStart;S<c;S++){const R=h[S],P=R.inputs,j=null===g||qw(o)?null:rs(P,g);_.push(j),E=wE(P,S,E),C=wE(R.outputs,S,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=C}function EE(s,o){const a=Hn(o,s);16&a[2]||(a[2]|=32)}function N_(s,o,a,c){let h=!1;if(Kl()){const g=function ob(s,o,a){const c=s.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const _=c[g];f_(a,_.selectors,!1)&&(h||(h=[]),Ea(Tn(a,o),s,_.type),Mi(_)?(R_(s,a),h.unshift(_)):h.push(_))}return h}(s,o,a),_=null===c?null:{"":-1};if(null!==g){h=!0,ub(a,s.data.length,g.length);for(let R=0;R<g.length;R++){const P=g[R];P.providersResolver&&P.providersResolver(P)}let E=!1,C=!1,S=Xc(s,o,g.length,null);for(let R=0;R<g.length;R++){const P=g[R];a.mergedAttrs=wa(a.mergedAttrs,P.hostAttrs),bE(s,a,o,S,P),ab(S,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const j=P.type.prototype;!E&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!C&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),C=!0),S++}hm(s,a)}_&&function P_(s,o,a){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=a[o[h+1]];if(null==g)throw new Ce(-301,!1);c.push(o[h],g)}}}(a,c,_)}return a.mergedAttrs=wa(a.mergedAttrs,a.attrs),h}function ib(s,o,a,c,h,g){const _=g.hostBindings;if(_){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function sb(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=C&&E.push(C),E.push(c,h,_)}}function pm(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function R_(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function ab(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;Mi(o)&&(a[""]=s)}}function ub(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function bE(s,o,a,c,h){s.data[c]=h;const g=h.factory||(h.factory=ds(h.type)),_=new ya(g,Mi(h),qd);s.blueprint[c]=_,a[c]=_,ib(s,o,0,c,Xc(s,a,h.hostVars,Vt),h)}function rp(s,o,a){const c=Hr(o,s),h=rb(a),g=s[10],_=ip(s,Wd(s,h,null,a.onPush?32:16,c,o,g,g.createRenderer(c,a),null,null,null));s[o.index]=_}function Ss(s,o,a,c,h,g){const _=Hr(s,o);!function gm(s,o,a,c,h,g,_){if(null==g)s.removeAttribute(o,h,a);else{const E=null==_?_e(g):_(g,c||"",h);s.setAttribute(o,h,E,a)}}(o[11],_,g,s.value,a,c,h)}function TE(s,o,a,c,h,g){const _=g[o];if(null!==_){const E=c.setInput;for(let C=0;C<_.length;){const S=_[C++],R=_[C++],P=_[C++];null!==E?c.setInput(a,P,S,R):a[R]=P}}}function rs(s,o){let a=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return a}function SE(s,o,a,c){return new Array(s,!0,!1,o,null,0,c,a,null,null)}function aM(s,o){const a=Hn(o,s);if(Ls(a)){const c=a[1];48&a[2]?ep(c,a,c.template,a[8]):a[5]>0&&xE(a)}}function xE(s){for(let c=Pu(s);null!==c;c=Vg(c))for(let h=10;h<c.length;h++){const g=c[h];if(Ls(g))if(512&g[2]){const _=g[1];ep(_,g,_.template,g[8])}else g[5]>0&&xE(g)}const a=s[1].components;if(null!==a)for(let c=0;c<a.length;c++){const h=Hn(a[c],s);Ls(h)&&h[5]>0&&xE(h)}}function uM(s,o){const a=Hn(o,s),c=a[1];(function cb(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),Kd(c,a,a[8])}function ip(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function O_(s){for(;s;){s[2]|=32;const o=Nc(s);if(Po(s)&&!o)return s;s=o}return null}function sp(s,o,a,c=!0){const h=o[10];h.begin&&h.begin();try{ep(s,o,s.template,a)}catch(_){throw c&&k_(o,_),_}finally{h.end&&h.end()}}function Gu(s,o,a){Oi(0),o(s,a)}function op(s){return s[7]||(s[7]=[])}function NE(s){return s.cleanup||(s.cleanup=[])}function k_(s,o){const a=s[9],c=a?a.get(Bf,null):null;c&&c.handleError(o)}function F_(s,o,a,c,h){for(let g=0;g<a.length;){const _=a[g++],E=a[g++],C=o[_],S=s.data[_];null!==S.setInput?S.setInput(C,h,c,E):C[E]=h}}function mm(s,o,a){let c=a?s.styles:null,h=a?s.classes:null,g=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?g=E:1==g?h=pe(h,E):2==g&&(c=pe(c,E+": "+o[++_]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=h:s.classesWithoutHost=h}function ap(s,o,a,c,h=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&c.push($n(g)),$r(g))for(let E=10;E<g.length;E++){const C=g[E],S=C[1].firstChild;null!==S&&ap(C[1],C,S,c)}const _=a.type;if(8&_)ap(s,o,a.child,c);else if(32&_){const E=Ru(a,o);let C;for(;C=E();)c.push(C)}else if(16&_){const E=wf(o,a);if(Array.isArray(E))c.push(...E);else{const C=Nc(o[16]);ap(C[1],C,E,c,!0)}}a=h?a.projectionNext:a.next}return c}class el{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return ap(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if($r(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(ka(o,c),mi(a,c))}this._attachedToViewContainer=!1}Fa(this._lView[1],this._lView)}onDestroy(o){np(this._lView[1],this._lView,null,o)}markForCheck(){O_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){sp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ew(s,o){kc(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=o}}class db extends el{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;sp(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class ym extends Vf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=ue(o);return new nl(a,this.ngModule)}}function RE(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class hb{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){const h=this.injector.get(o,c_,c);return h!==c_||a===c_?h:this.parentInjector.get(o,a,c)}}class nl extends Nw{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function qx(s){return s.map(zx).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return RE(this.componentDef.inputs)}get outputs(){return RE(this.componentDef.outputs)}create(o,a,c,h){let g=(h=h||this.ngModule)instanceof qc?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new hb(o,g):o,E=_.get(a_,null);if(null===E)throw new Ce(407,!1);const C=_.get(Fw,null),S=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",P=c?function tp(s,o,a){return s.selectRootElement(o,a===_t.ShadowDom)}(S,c,this.componentDef.encapsulation):pf(S,R,function tl(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),j=this.componentDef.onPush?288:272,J=x_(0,null,null,1,0,null,null,null,null,null),me=Wd(null,J,null,j,null,null,E,S,C,_,null);let Ve,qe;gu(me);try{const nt=function Yd(s,o,a,c,h,g){const _=a[1];a[22]=s;const C=Jc(_,22,2,"#host",null),S=C.mergedAttrs=o.hostAttrs;null!==S&&(mm(C,S,!0),null!==s&&(vu(h,s,S),null!==C.classes&&Sf(h,s,C.classes),null!==C.styles&&Tf(h,s,C.styles)));const R=c.createRenderer(s,o),P=Wd(a,rb(o),null,o.onPush?32:16,a[22],C,c,R,g||null,null,null);return _.firstCreatePass&&(Ea(Tn(C,a),_,o.type),R_(_,C),ub(C,a.length,1)),ip(a,P),a[22]=P}(P,this.componentDef,me,E,S);if(P)if(c)vu(S,P,["ng-version",Lw.full]);else{const{attrs:St,classes:Te}=function HD(s){const o=[],a=[];let c=1,h=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++c]):8===h&&a.push(g);else{if(!en(h))break;h=g}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);St&&vu(S,P,St),Te&&Te.length>0&&Sf(S,P,Te.join(" "))}if(qe=ua(J,22),void 0!==a){const St=qe.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const Nt=a[Te];St.push(null!=Nt?Array.from(Nt):null)}}Ve=function pb(s,o,a,c){const h=a[1],g=function CE(s,o,a){const c=Pn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),bE(s,c,o,Xc(s,o,1,null),a),hm(s,c));const h=Ia(o,s,c.directiveStart,c);Ct(h,o);const g=Hr(c,o);return g&&Ct(g,o),h}(h,a,o);if(s[8]=a[8]=g,null!==c)for(const E of c)E(g,o);if(o.contentQueries){const E=Pn();o.contentQueries(1,g,E.directiveStart)}const _=Pn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ps(_.index),ib(a[1],_,0,_.directiveStart,_.directiveEnd,o),pm(o,g)),g}(nt,this.componentDef,me,[kE]),Kd(J,me,null)}finally{ko()}return new OE(this.componentType,Ve,Bd(qe,me),me,qe)}}class OE extends class RD{}{constructor(o,a,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new db(h),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const g=this._rootLView;F_(g[1],g,h,o,a),EE(g,this._tNode.index)}}get injector(){return new ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function kE(){const s=Pn();uo(Se()[1],s)}function rl(s){let o=function FE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;o;){let h;if(Mi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ce(903,!1);h=o.\u0275dir}if(h){if(a){c.push(h);const _=s;_.inputs=V_(s.inputs),_.declaredInputs=V_(s.declaredInputs),_.outputs=V_(s.outputs);const E=h.hostBindings;E&&dM(s,E);const C=h.viewQuery,S=h.contentQueries;if(C&&LE(s,C),S&&gb(s,S),de(s.inputs,h.inputs),de(s.declaredInputs,h.declaredInputs),de(s.outputs,h.outputs),Mi(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let _=0;_<g.length;_++){const E=g[_];E&&E.ngInherit&&E(s),E===rl&&(a=!1)}}o=Object.getPrototypeOf(o)}!function L_(s){let o=0,a=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=wa(h.hostAttrs,a=wa(a,h.hostAttrs))}}(c)}function V_(s){return s===Kn?{}:s===Dt?[]:s}function LE(s,o){const a=s.viewQuery;s.viewQuery=a?(c,h)=>{o(c,h),a(c,h)}:o}function gb(s,o){const a=s.contentQueries;s.contentQueries=a?(c,h,g)=>{o(c,h,g),a(c,h,g)}:o}function dM(s,o){const a=s.hostBindings;s.hostBindings=a?(c,h)=>{o(c,h),a(c,h)}:o}let up=null;function As(){if(!up){const s=pn.Symbol;if(s&&s.iterator)up=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(up=c)}}}return up}function Qd(s){return!!j_(s)&&(Array.isArray(s)||!(s instanceof Map)&&As()in s)}function j_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Xs(s,o,a){return s[o]=a}function Ii(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function _m(s,o,a,c,h){const g=function zu(s,o,a,c){const h=Ii(s,o,a);return Ii(s,o+1,c)||h}(s,o,a,c);return Ii(s,o+2,h)||g}function $_(s,o,a,c){const h=Se();return Ii(h,Pi(),o)&&(Ht(),Ss(On(),h,s,o,a,c)),$_}function $E(s,o,a,c,h,g,_,E){const C=Se(),S=Ht(),R=s+22,P=S.firstCreatePass?function bb(s,o,a,c,h,g,_,E,C){const S=o.consts,R=Jc(o,s,4,_||null,Ri(S,E));N_(o,a,R,Ri(S,C)),uo(o,R);const P=R.tViews=x_(2,R,c,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),P.queries=o.queries.embeddedTView(R)),R}(R,S,C,o,a,c,h,g,_):S.data[R];Mr(P,!1);const j=C[11].createComment("");Ys(S,C,j,P),Ct(j,C),ip(C,C[R]=SE(j,C,j,P)),ls(P)&&Ga(S,C,P),null!=_&&vE(C,P,E)}function H_(s){return ca(function Dn(){return wt.lFrame.contextLView}(),22+s)}function wm(s,o,a){const c=Se();return Ii(c,Pi(),o)&&function Ts(s,o,a,c,h,g,_,E){const C=Hr(o,a);let R,S=o.inputs;!E&&null!=S&&(R=S[c])?(F_(s,a,R,c,h),tu(o)&&EE(a,o.index)):3&o.type&&(c=function fm(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=_?_(h,o.value||"",c):h,g.setProperty(C,c,h))}(Ht(),On(),c,s,o,c[11],a,!1),wm}function hp(s,o,a,c,h){const _=h?"class":"style";F_(s,a,o.inputs[_],_,c)}function is(s,o,a,c){const h=Se(),g=Ht(),_=22+s,E=h[11],C=h[_]=pf(E,o,function sd(){return wt.lFrame.currentNamespace}()),S=g.firstCreatePass?function ii(s,o,a,c,h,g,_){const E=o.consts,S=Jc(o,s,2,h,Ri(E,g));return N_(o,a,S,Ri(E,_)),null!==S.attrs&&mm(S,S.attrs,!1),null!==S.mergedAttrs&&mm(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(_,g,h,0,o,a,c):g.data[_];Mr(S,!0);const R=S.mergedAttrs;null!==R&&vu(E,C,R);const P=S.classes;null!==P&&Sf(E,C,P);const j=S.styles;return null!==j&&Tf(E,C,j),64!=(64&S.flags)&&Ys(g,h,C,S),0===function la(){return wt.lFrame.elementDepthCount}()&&Ct(C,h),function Wl(){wt.lFrame.elementDepthCount++}(),ls(S)&&(Ga(g,h,S),function A_(s,o,a){if(Ro(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const _=s.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}(g,S,h)),null!==c&&vE(h,S),is}function fp(){let s=Pn();oo()?function fc(){wt.lFrame.isParent=!1}():(s=s.parent,Mr(s,!1));const o=s;!function hc(){wt.lFrame.elementDepthCount--}();const a=Ht();return a.firstCreatePass&&(uo(a,s),Ro(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Gh(s){return 0!=(16&s.flags)}(o)&&hp(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ud(s){return 0!=(32&s.flags)}(o)&&hp(a,o,Se(),o.stylesWithoutHost,!1),fp}function nh(s,o,a,c){return is(s,o,a,c),fp(),nh}function Ab(){return Se()}function GE(s){return!!s&&"function"==typeof s.then}function zE(s){return!!s&&"function"==typeof s.subscribe}const qE=zE;function ZE(s,o,a,c){const h=Se(),g=Ht(),_=Pn();return function Mb(s,o,a,c,h,g,_,E){const C=ls(c),R=s.firstCreatePass&&NE(s),P=o[8],j=op(o);let J=!0;if(3&c.type||E){const qe=Hr(c,o),nt=E?E(qe):qe,St=j.length,Te=E?nn=>E($n(nn[c.index])):c.index;let Nt=null;if(!E&&C&&(Nt=function fM(s,o,a,c){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const _=h[g];if(_===a&&h[g+1]===c){const E=o[7],C=h[g+2];return E.length>C?E[C]:null}"string"==typeof _&&(g+=2)}return null}(s,o,h,c.index)),null!==Nt)(Nt.__ngLastListenerFn__||Nt).__ngNextListenerFn__=g,Nt.__ngLastListenerFn__=g,J=!1;else{g=Rb(c,o,P,g,!1);const nn=a.listen(nt,h,g);j.push(g,nn),R&&R.push(h,Te,St,St+1)}}else g=Rb(c,o,P,g,!1);const me=c.outputs;let Ve;if(J&&null!==me&&(Ve=me[h])){const qe=Ve.length;if(qe)for(let nt=0;nt<qe;nt+=2){const wn=o[Ve[nt]][Ve[nt+1]].subscribe(g),Xa=j.length;j.push(g,wn),R&&R.push(h,c.index,Xa,-(Xa+1))}}}(g,h,h[11],_,s,o,0,c),ZE}function Nb(s,o,a,c){try{return!1!==a(c)}catch(h){return k_(s,h),!1}}function Rb(s,o,a,c,h){return function g(_){if(_===Function)return c;O_(2&s.flags?Hn(s.index,o):o);let C=Nb(o,0,c,_),S=g.__ngNextListenerFn__;for(;S;)C=Nb(o,0,S,_)&&C,S=S.__ngNextListenerFn__;return h&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function Pb(s=1){return function td(s){return(wt.lFrame.contextLView=function jh(s,o){for(;s>0;)o=o[15],s--;return o}(s,wt.lFrame.contextLView))[8]}(s)}function q_(s,o,a,c,h){const g=s[a+1],_=null===o;let E=c?Js(g):Qo(g),C=!1;for(;0!==E&&(!1===C||_);){const R=s[E+1];Fb(s[E],o)&&(C=!0,s[E+1]=c?om(R):im(R)),E=c?Js(R):Qo(R)}C&&(s[a+1]=c?im(g):om(g))}function Fb(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ta(s,o)>=0}function bm(s,o){return function wo(s,o,a,c){const h=Se(),g=Ht(),_=function fi(s){const o=wt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);g.firstUpdatePass&&function Tm(s,o,a,c){const h=s.data;if(null===h[a+1]){const g=h[Gr()],_=function K_(s,o){return o>=s.expandoStartIndex}(s,a);(function iI(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!_&&(o=!1),o=function tI(s,o,a,c){const h=function fa(s){const o=wt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(a=ul(a=Q_(null,s,o,a,c),o.attrs,c),g=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(a=Q_(h,s,o,a,c),null===g){let C=function Y_(s,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Qo(c))return s[Js(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Q_(null,s,o,C[1],c),C=ul(C,o.attrs,c),function nI(s,o,a,c){s[Js(a?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else g=function _p(s,o,a){let c;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)c=ul(c,s[g].hostAttrs,a);return ul(c,o.attrs,a)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),a}(h,g,o,c),function Ob(s,o,a,c,h,g){let _=g?o.classBindings:o.styleBindings,E=Js(_),C=Qo(_);s[c]=a;let R,S=!1;if(Array.isArray(a)){const P=a;R=P[1],(null===R||Ta(P,R)>0)&&(S=!0)}else R=a;if(h)if(0!==C){const j=Js(s[E+1]);s[c+1]=Hf(j,E),0!==j&&(s[j+1]=sm(s[j+1],c)),s[E+1]=function sE(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Hf(E,0),0!==E&&(s[E+1]=sm(s[E+1],c)),E=c;else s[c+1]=Hf(C,0),0===E?E=c:s[C+1]=sm(s[C+1],c),C=c;S&&(s[c+1]=im(s[c+1])),q_(s,R,c,!0),q_(s,R,c,!1),function kb(s,o,a,c,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Ta(g,o)>=0&&(a[c+1]=om(a[c+1]))}(o,R,s,c,g),_=Hf(E,C),g?o.classBindings=_:o.styleBindings=_}(h,g,o,a,_,c)}}(g,s,_,c),o!==Vt&&Ii(h,_,o)&&function Sm(s,o,a,c,h,g,_,E){if(!(3&o.type))return;const C=s.data,S=C[E+1];ih(function Gf(s){return 1==(1&s)}(S)?Am(C,o,a,h,Qo(S),_):void 0)||(ih(g)||function I_(s){return 2==(2&s)}(S)&&(g=Am(C,null,a,h,E,_)),function bf(s,o,a,c,h){if(o)h?s.addClass(a,c):s.removeClass(a,c);else{let g=-1===c.indexOf("-")?void 0:Es.DashCase;null==h?s.removeStyle(a,c,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=Es.Important),s.setStyle(a,c,h,g))}}(c,_,hi(Gr(),a),h,g))}(g,g.data[Gr()],h,h[11],s,h[_+1]=function Bb(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ve(dr(s)))),s}(o,a),c,_)}(s,o,null,!0),bm}function Q_(s,o,a,c,h){let g=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(g=o[E],c=ul(c,g.hostAttrs,h),g!==s);)E++;return null!==s&&(a.directiveStylingLast=E),c}function ul(s,o,a){const c=a?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const _=o[g];"number"==typeof _?h=_:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),yi(s,_,!!a||o[++g]))}return void 0===s?null:s}function Am(s,o,a,c,h,g){const _=null===o;let E;for(;h>0;){const C=s[h],S=Array.isArray(C),R=S?C[1]:C,P=null===R;let j=a[h+1];j===Vt&&(j=P?Dt:void 0);let J=P?pd(j,c):R===c?j:void 0;if(S&&!ih(J)&&(J=pd(C,c)),ih(J)&&(E=J,_))return E;const me=s[h+1];h=_?Js(me):Qo(me)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(E=pd(C,c))}return E}function ih(s){return void 0!==s}function sI(s,o=""){const a=Se(),c=Ht(),h=s+22,g=c.firstCreatePass?Jc(c,h,1,o,null):c.data[h],_=a[h]=function Rc(s,o){return s.createText(o)}(a[11],o);Ys(c,a,_,g),Mr(g,!1)}function sh(s){return oh("",s,""),sh}function oh(s,o,a){const c=Se(),h=function Xd(s,o,a,c){return Ii(s,Pi(),a)?o+_e(a)+c:Vt}(c,s,o,a);return h!==Vt&&function Jo(s,o,a){const c=hi(o,s);!function Td(s,o,a){s.setValue(o,a)}(s[11],c,a)}(c,Gr(),h),oh}const ll=void 0;var iT=["en",[["a","p"],["AM","PM"],ll],[["AM","PM"],ll,ll],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ll,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ll,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ll,"{1} 'at' {0}",ll],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fI(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let dl={};function vp(s){const o=function oT(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=sT(o);if(a)return a;const c=o.split("-")[0];if(a=sT(c),a)return a;if("en"===c)return iT;throw new Ce(701,!1)}function Om(s){return vp(s)[Rt.PluralCase]}function sT(s){return s in dl||(dl[s]=pn.ng&&pn.ng.common&&pn.ng.common.locales&&pn.ng.common.locales[s]),dl[s]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const wp="en-US";let cT=wp;function Gm(s,o,a,c,h){if(s=Z(s),Array.isArray(s))for(let g=0;g<s.length;g++)Gm(s[g],o,a,c,h);else{const g=Ht(),_=Se();let E=Ba(s)?s:Z(s.provide),C=Ff(s);const S=Pn(),R=1048575&S.providerIndexes,P=S.directiveStart,j=S.providerIndexes>>20;if(Ba(s)||!s.multi){const J=new ya(C,h,qd),me=Zm(E,o,h?R:R+j,P);-1===me?(Ea(Tn(S,_),g,E),zm(g,s,o.length),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(J),_.push(J)):(a[me]=J,_[me]=J)}else{const J=Zm(E,o,R+j,P),me=Zm(E,o,R,R+j),Ve=J>=0&&a[J],qe=me>=0&&a[me];if(h&&!qe||!h&&!Ve){Ea(Tn(S,_),g,E);const nt=function Mv(s,o,a,c,h){const g=new ya(s,a,qd);return g.multi=[],g.index=o,g.componentProviders=0,qm(g,h,c&&!a),g}(h?xv:DT,a.length,h,c,C);!h&&qe&&(a[me].providerFactory=nt),zm(g,s,o.length,0),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(nt),_.push(nt)}else zm(g,s,J>-1?J:me,qm(a[h?me:J],C,!h&&c));!h&&c&&qe&&a[me].componentProviders++}}}function zm(s,o,a,c){const h=Ba(o),g=function Aw(s){return!!s.useClass}(o);if(h||g){const C=(g?Z(o.useClass):o).prototype.ngOnDestroy;if(C){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=S.indexOf(a);-1===R?S.push(a,[c,C]):S[R+1].push(c,C)}else S.push(a,C)}}}function qm(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Zm(s,o,a,c){for(let h=a;h<c;h++)if(o[h]===s)return h;return-1}function DT(s,o,a,c){return Mp(this.multi,[])}function xv(s,o,a,c){const h=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Ia(a,a[1],this.providerFactory.index,c);g=E.slice(0,_),Mp(h,g);for(let C=_;C<E.length;C++)g.push(E[C])}else g=[],Mp(h,g);return g}function Mp(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Fr(s,o=[]){return a=>{a.providersResolver=(c,h)=>function CT(s,o,a){const c=Ht();if(c.firstCreatePass){const h=Mi(s);Gm(a,c.data,c.blueprint,h,!0),Gm(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class fr{}class Np{}function Nv(s,o){return new RI(s,o??null)}class RI extends fr{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ym(this);const c=Ot(o);this._bootstrapComponents=ja(c.bootstrap),this._r3Injector=Qw(o,a,[{provide:fr,useValue:this},{provide:Vf,useValue:this.componentFactoryResolver}],ve(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Wm extends Np{constructor(o){super(),this.moduleType=o}create(o){return new RI(this.moduleType,o)}}class bT extends fr{constructor(o,a,c){super(),this.componentFactoryResolver=new ym(this),this.instance=null;const h=new kf([...o,{provide:fr,useValue:this},{provide:Vf,useValue:this.componentFactoryResolver}],a||Kg(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Rv(s,o,a=null){return new bT(s,o,a).injector}let PI=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=bw(0,a.type),h=c.length>0?Rv([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=K({token:s,providedIn:"environment",factory:()=>new s(Gn(qc))}),s})();function Km(s){s.getStandaloneInjector=o=>o.get(PI).getOrCreateStandaloneInjector(s)}function qu(s,o){const a=s[o];return a===Vt?void 0:a}function ey(s,o){const a=Ht();let c;const h=s+22;a.firstCreatePass?(c=function jv(s,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(s===c.name)return c}}(o,a.pipeRegistry),a.data[h]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,c.onDestroy)):c=a.data[h];const g=c.factory||(c.factory=ds(c.type)),_=Br(qd);try{const E=Fo(!1),C=g();return Fo(E),function Tb(s,o,a,c){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=c}(a,Se(),h,C),C}finally{Br(_)}}function kp(s,o,a){const c=s+22,h=Se(),g=ca(h,c);return Zu(h,c)?function Vv(s,o,a,c,h,g){const _=o+a;return Ii(s,_,h)?Xs(s,_+1,g?c.call(g,h):c(h)):qu(s,_+1)}(h,Sr(),o,g.transform,a,g):g.transform(a)}function $v(s,o,a,c,h){const g=s+22,_=Se(),E=ca(_,g);return Zu(_,g)?function Uv(s,o,a,c,h,g,_,E){const C=o+a;return _m(s,C,h,g,_)?Xs(s,C+3,E?c.call(E,h,g,_):c(h,g,_)):qu(s,C+3)}(_,Sr(),o,E.transform,a,c,h,E):E.transform(a,c,h)}function Zu(s,o){return s[1].data[o].pure}function ty(s){return o=>{setTimeout(s,void 0,o)}}const Co=class Gv extends l.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let h=o,g=a||(()=>null),_=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),g=C.error?.bind(C),_=C.complete?.bind(C)}this.__isAsync&&(g=ty(g),h&&(h=ty(h)),_&&(_=ty(_)));const E=super.subscribe({next:h,error:g,complete:_});return o instanceof X.w0&&o.add(E),E}};function $I(){return this._results[As()]()}class zv{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=As(),c=zv.prototype;c[a]||(c[a]=$I)}get changes(){return this._changes||(this._changes=new Co)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=ur(o);(this._changesDetected=!function bc(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],g=o[c];if(a&&(h=a(h),g=a(g)),g!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Wa=(()=>{class s{}return s.__NG_ELEMENT_ID__=Lp,s})();const HI=Wa,ny=class extends HI{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,h=Wd(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(h[19]=_.createEmbeddedView(c)),Kd(c,h,o),new el(h)}};function Lp(){return ta(Pn(),Se())}function ta(s,o){return 4&s.type?new ny(o,s,Bd(s,o)):null}let fh=(()=>{class s{}return s.__NG_ELEMENT_ID__=NT,s})();function NT(){return Wu(Pn(),Se())}const RT=fh,qv=class extends RT{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Bd(this._hostTNode,this._hostLView)}get injector(){return new ki(this._hostTNode,this._hostLView)}get parentInjector(){const o=Lo(this._hostTNode,this._hostLView);if(zh(o)){const a=Yi(o,this._hostLView),c=Eu(o);return new ki(a[1].data[c+8],a)}return new ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Zv(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let h,g;"number"==typeof c?h=c:null!=c&&(h=c.index,g=c.injector);const _=o.createEmbeddedView(a||{},g);return this.insert(_,h),_}createComponent(o,a,c,h,g){const _=o&&!function Xr(s){return"function"==typeof s}(o);let E;if(_)E=a;else{const P=a||{};E=P.index,c=P.injector,h=P.projectableNodes,g=P.environmentInjector||P.ngModuleRef}const C=_?o:new nl(ue(o)),S=c||this.parentInjector;if(!g&&null==C.ngModule){const j=(_?S:this.parentInjector).get(qc,null);j&&(g=j)}const R=C.create(S,h,void 0,g);return this.insert(R.hostView,E),R}insert(o,a){const c=o._lView,h=c[1];if(function ql(s){return $r(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const P=c[3],j=new qv(P,P[6],P[3]);j.detach(j.indexOf(o))}}const g=this._adjustIndex(a),_=this._lContainer;!function gf(s,o,a,c){const h=10+c,g=a.length;c>0&&(a[h-1][4]=o),c<g-10?(o[4]=a[h],Qh(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function Yy(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(h,c,_,g);const E=Rd(g,_),C=c[11],S=xd(C,_[7]);return null!==S&&function Pc(s,o,a,c,h,g){c[0]=h,c[6]=o,kc(s,c,a,1,h,g)}(h,_[6],C,c,S,E),o.attachToViewContainerRef(),Qh(Wv(_),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Zv(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=ka(this._lContainer,a);c&&(mi(Wv(this._lContainer),a),Fa(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=ka(this._lContainer,a);return c&&null!=mi(Wv(this._lContainer),a)?new el(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function Zv(s){return s[8]}function Wv(s){return s[8]||(s[8]=[])}function Wu(s,o){let a;const c=o[s.index];if($r(c))a=c;else{let h;if(8&s.type)h=$n(c);else{const g=o[11];h=g.createComment("");const _=Hr(s,o);_o(g,xd(g,_),h,function _f(s,o){return s.nextSibling(o)}(g,_),!1)}o[s.index]=a=SE(c,o,h,s),ip(o,a)}return new qv(a,s,o)}class iy{constructor(o){this.queryList=o,this.matches=null}clone(){return new iy(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vn{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let g=0;g<c;g++){const _=a.getByIndex(g);h.push(this.queries[_.indexInDeclarationView].clone())}return new Vn(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Xv(o,a).matches&&this.queries[a].setDirty()}}class Vp{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class fl{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(o,h);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new fl(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class pl{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new pl(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(o,a,PT(a,g)),this.matchTNodeWithReadOption(o,a,Ji(a,o,g,!1,!1))}else c===Wa?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ji(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Uf||h===fh||h===Wa&&4&a.type)this.addMatch(a.index,-2);else{const g=Ji(a,o,h,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function PT(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function OT(s,o,a,c){return-1===a?function GI(s,o){return 11&s.type?Bd(s,o):4&s.type?ta(s,o):null}(o,s):-2===a?function kT(s,o,a){return a===Uf?Bd(o,s):a===Wa?ta(o,s):a===fh?Wu(o,s):void 0}(s,o,c):Ia(s,s[1],a,o)}function zI(s,o,a,c){const h=o[19].queries[c];if(null===h.matches){const g=s.data,_=a.matches,E=[];for(let C=0;C<_.length;C+=2){const S=_[C];E.push(S<0?null:OT(o,g[S],_[C+1],a.metadata.read))}h.matches=E}return h.matches}function Yv(s,o,a,c){const h=s.queries.getByIndex(a),g=h.matches;if(null!==g){const _=zI(s,o,h,a);for(let E=0;E<g.length;E+=2){const C=g[E];if(C>0)c.push(_[E/2]);else{const S=g[E+1],R=o[-C];for(let P=10;P<R.length;P++){const j=R[P];j[17]===j[3]&&Yv(j[1],j,S,c)}if(null!==R[9]){const P=R[9];for(let j=0;j<P.length;j++){const J=P[j];Yv(J[1],J,S,c)}}}}}return c}function ph(s){const o=Se(),a=Ht(),c=pu();Oi(c+1);const h=Xv(a,c);if(s.dirty&&function bg(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Yv(a,o,c,[]):zI(a,o,h,c);s.reset(g,Pw),s.notifyOnChanges()}return!0}return!1}function Qv(s,o,a,c){const h=Ht();if(h.firstCreatePass){const g=Pn();(function ZI(s,o,a){null===s.queries&&(s.queries=new fl),s.queries.track(new pl(o,a))})(h,new Vp(o,a,c),g.index),function FT(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}!function gl(s,o,a){const c=new zv(4==(4&a));np(s,o,c,c.destroy),null===o[19]&&(o[19]=new Vn),o[19].queries.push(new iy(c))}(h,Se(),a)}function Jv(){return function qI(s,o){return s[19].queries[o].queryList}(Se(),pu())}function Xv(s,o){return s.queries.getByIndex(o)}function WI(s,o){return ta(s,o)}function ss(...s){}const vn=new Xt("Application Initializer");let cy=(()=>{class s{constructor(a){this.appInits=a,this.resolve=ss,this.reject=ss,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(GE(g))a.push(g);else if(qE(g)){const _=new Promise((E,C)=>{g.subscribe({complete:E,error:C})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Gn(vn,8))},s.\u0275prov=K({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ly=new Xt("AppId",{providedIn:"root",factory:function bo(){return`${Kp()}${Kp()}${Kp()}`}});function Kp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wl=new Xt("Platform Initializer"),m0=new Xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),y0=new Xt("appBootstrapListener");let ai=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=K({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const El=new Xt("LocaleId",{providedIn:"root",factory:()=>ft(El,Ye.Optional|Ye.SkipSelf)||function dy(){return typeof $localize<"u"&&$localize.locale||wp}()}),Yp=new Xt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class WT{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let KT=(()=>{class s{compileModuleSync(a){return new Wm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=ja(Ot(a).declarations).reduce((_,E)=>{const C=ue(E);return C&&_.push(new nl(C)),_},[]);return new WT(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=K({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const QT=(()=>Promise.resolve(0))();function Qu(s){typeof Zone>"u"?QT.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class In{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Co(!1),this.onMicrotaskEmpty=new Co(!1),this.onStable=new Co(!1),this.onError=new Co(!1),typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function uC(){let s=pn.requestAnimationFrame,o=pn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function JT(s){const o=()=>{!function I0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(pn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Le(s),s.isCheckStableRunning=!0,na(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Le(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,g,_,E)=>{try{return pr(s),a.invokeTask(h,g,_,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Ns(s)}},onInvoke:(a,c,h,g,_,E,C)=>{try{return pr(s),a.invoke(h,g,_,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Ns(s)}},onHasTask:(a,c,h,g)=>{a.hasTask(h,g),c===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Le(s),na(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,h,g)=>(a.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!In.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(In.isInAngularZone())throw new Ce(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+h,o,mh,ss,ss);try{return g.runTask(_,a,c)}finally{g.cancelTask(_)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const mh={};function na(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Le(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function pr(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Ns(s){s._nesting--,na(s)}class C0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Co,this.onMicrotaskEmpty=new Co,this.onStable=new Co,this.onError=new Co}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}const st=new Xt(""),pt=new Xt("");let be,XT=(()=>{class s{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,be||(function ce(s){be=s}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{In.assertNotInAngularZone(),Qu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qu(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(Gn(In),Gn(Ke),Gn(pt))},s.\u0275prov=K({token:s,factory:s.\u0275fac}),s})(),Ke=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return be?.findTestabilityInTree(this,a,c)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=K({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Un=null;const D0=new Xt("AllowMultipleToken"),b0=new Xt("PlatformDestroyListeners");class cC{constructor(o,a){this.name=o,this.token=a}}function Lt(s,o,a=[]){const c=`Platform: ${o}`,h=new Xt(c);return(g=[])=>{let _=gt();if(!_||_.injector.get(D0,!1)){const E=[...a,...g,{provide:h,useValue:!0}];s?s(E):function nS(s){if(Un&&!Un.get(D0,!1))throw new Ce(400,!1);Un=s;const o=s.get(_h);(function lC(s){const o=s.get(wl,null);o&&o.forEach(a=>a())})(s)}(function T0(s=[],o){return $u.create({name:o,providers:[{provide:Of,useValue:"platform"},{provide:b0,useValue:new Set([()=>Un=null])},...s]})}(E,c))}return function yh(s){const o=gt();if(!o)throw new Ce(401,!1);return o}()}}function gt(){return Un?.get(_h)??null}let _h=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function dC(s,o){let a;return a="noop"===s?new C0:("zone.js"===s?void 0:s)||new In(o),a}(c?.ngZone,function Jt(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:In,useValue:h}];return h.run(()=>{const _=$u.create({providers:g,parent:this.injector,name:a.moduleType.name}),E=a.create(_),C=E.injector.get(Bf,null);if(!C)throw new Ce(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:R=>{C.handleError(R)}});E.onDestroy(()=>{vh(this._modules,E),S.unsubscribe()})}),function er(s,o,a){try{const c=a();return GE(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,h,()=>{const S=E.injector.get(cy);return S.runInitializers(),S.donePromise.then(()=>(function gI(s){xn(s,"Expected localeId to be defined"),"string"==typeof s&&(cT=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(El,wp)||wp),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const h=Ze({},c);return function eS(s,o,a){const c=new Wm(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(a){const c=a.injector.get(Il);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Ce(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(b0,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Gn($u))},s.\u0275prov=K({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Ze(s,o){return Array.isArray(o)?o.reduce(Ze,s):{...s,...o}}let Il=(()=>{class s{constructor(a,c,h){this._zone=a,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),_=new O.y(E=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{In.assertNotInAngularZone(),Qu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{In.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ae.T)(g,_.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const h=a instanceof Nw;if(!this._injector.get(cy).done)throw!h&&Tt(a),new Ce(405,false);let _;_=h?a:this._injector.get(Vf).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const E=function tS(s){return s.isBoundToModule}(_)?void 0:this._injector.get(fr),S=_.create($u.NULL,[],c||_.selector,E),R=S.location.nativeElement,P=S.injector.get(st,null);return P?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),vh(this.components,S),P?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Ce(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;vh(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(y0,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>vh(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ce(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(Gn(In),Gn(qc),Gn(Bf))},s.\u0275prov=K({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function vh(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let Jp=!0,hC=!1;function Xp(){return hC=!0,Jp}function fC(){if(hC)throw new Error("Cannot enable prod mode after platform setup.");Jp=!1}let pC=(()=>{class s{}return s.__NG_ELEMENT_ID__=gC,s})();function gC(s){return function Xu(s,o,a){if(tu(s)&&!a){const c=Hn(s.index,o);return new el(c,c)}return 47&s.type?new el(o[16],o):null}(Pn(),Se(),16==(16&s))}class ng{constructor(){}supports(o){return Qd(o)}create(o){return new cS(o)}}const _C=(s,o)=>o;class cS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||_C}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,g=null;for(;a||c;){const _=!c||a&&a.currentIndex<wC(c,h,g)?a:c,E=wC(_,h,g),C=_.currentIndex;if(_===c)h--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)h++;else{g||(g=[]);const S=E-h,R=C-h;if(S!=R){for(let j=0;j<S;j++){const J=j<g.length?g[j]:g[j]=0,me=J+j;R<=me&&me<S&&(g[j]=J+1)}g[_.previousIndex]=R-S}}E!==C&&o(_,E,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Qd(o))throw new Ce(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,_,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],_=this._trackByFn(E,g),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,g,_,E)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,E),c=!0),a=a._next}else h=0,function UE(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[As()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{_=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,E,_,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,h)):o=this._addAfter(new lS(a,c),g,h),o}_verifyReinsertion(o,a,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new vC),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class lS{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class vC{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new dS,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wC(s,o,a){const c=s.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class EC{constructor(){}supports(o){return o instanceof Map||j_(o)}create(){return new hS}}class hS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||j_(o)))throw new Ce(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const g=h._prev,_=h._next;return g&&(g._next=_),_&&(_._prev=g),h._next=null,h._prev=null,h}const c=new fS(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class fS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function IC(){return new M0([new ng])}let M0=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||IC()),deps:[[s,new es,new vs]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new Ce(901,!1)}}return s.\u0275prov=K({token:s,providedIn:"root",factory:IC}),s})();function CC(){return new N0([new EC])}let N0=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||CC()),deps:[[s,new es,new vs]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new Ce(901,!1)}}return s.\u0275prov=K({token:s,providedIn:"root",factory:CC}),s})();const DC=Lt(null,"core",[]);let bC=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Gn(Il))},s.\u0275mod=Yr({type:s}),s.\u0275inj=De({}),s})();function yS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(yt,Me,F)=>{F.d(Me,{Z:()=>Ce});var l=F(2090),X=F(4859),O=F(2951),ae=F(1877);class se{constructor(_e,ye){this._delegate=_e,this.firebase=ye,(0,O._addComponent)(_e,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(_e,ye=O._DEFAULT_ENTRY_NAME){var ht;this._delegate.checkDestroyed();const vt=this._delegate.container.getProvider(_e);return!vt.isInitialized()&&"EXPLICIT"===(null===(ht=vt.getComponent())||void 0===ht?void 0:ht.instantiationMode)&&vt.initialize(),vt.getImmediate({identifier:ye})}_removeServiceInstance(_e,ye=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(ye)}_addComponent(_e){(0,O._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,O._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function pe(){const rt=function ve(rt){const _e={},ye={__esModule:!0,initializeApp:function Pe(Be,Xe={}){const ee=O.initializeApp(Be,Xe);if((0,l.r3)(_e,ee.name))return _e[ee.name];const xt=new rt(ee,ye);return _e[ee.name]=xt,xt},app:vt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ge(Be){const Xe=Be.name,ee=Xe.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const xt=(ut=vt())=>{if("function"!=typeof ut[ee])throw de.create("invalid-app-argument",{appName:Xe});return ut[ee]()};void 0!==Be.serviceProps&&(0,l.ZB)(xt,Be.serviceProps),ye[ee]=xt,rt.prototype[ee]=function(...ut){return this._getService.bind(this,Xe).apply(this,Be.multipleInstances?ut:[])}}return"PUBLIC"===Be.type?ye[ee]:null},removeApp:function ht(Be){delete _e[Be]},useAsService:function He(Be,Xe){return"serverAuth"===Xe?null:Xe},modularAPIs:O}};function vt(Be){if(!(0,l.r3)(_e,Be=Be||O._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:Be});return _e[Be]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function we(){return Object.keys(_e).map(Be=>_e[Be])}}),vt.App=rt,ye}(se);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function _e(ye){(0,l.ZB)(rt,ye)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),rt}(),$=new ae.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ce=G;!function Ae(rt){(0,O.registerVersion)("@firebase/app-compat","0.2.10",rt)}()},2951:(yt,Me,F)=>{F.r(Me),F.d(Me,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Mo,_DEFAULT_ENTRY_NAME:()=>ci,_addComponent:()=>it,_addOrOverwriteComponent:()=>_t,_apps:()=>Cn,_clearComponents:()=>Kn,_components:()=>Kt,_getProvider:()=>Gi,_registerComponent:()=>pn,_removeServiceInstance:()=>Kr,deleteApp:()=>Ai,getApp:()=>or,getApps:()=>Cr,initializeApp:()=>Yt,onLog:()=>zi,registerVersion:()=>Dr,setLogLevel:()=>jn});var l=F(5861),X=F(4859),O=F(1877),ae=F(2090);let fe,de;const G=new WeakMap,$=new WeakMap,Z=new WeakMap,je=new WeakMap,Ae=new WeakMap;let _e={get(re,te,Re){if(re instanceof IDBTransaction){if("done"===te)return $.get(re);if("objectStoreNames"===te)return re.objectStoreNames||Z.get(re);if("store"===te)return Re.objectStoreNames[1]?void 0:Re.objectStore(Re.objectStoreNames[0])}return Pe(re[te])},set:(re,te,Re)=>(re[te]=Re,!0),has:(re,te)=>re instanceof IDBTransaction&&("done"===te||"store"===te)||te in re};function vt(re){return"function"==typeof re?function ht(re){return re!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(re)?function(...te){return re.apply(we(this),te),Pe(G.get(this))}:function(...te){return Pe(re.apply(we(this),te))}:function(te,...Re){const Fe=re.call(we(this),te,...Re);return Z.set(Fe,te.sort?te.sort():[te]),Pe(Fe)}}(re):(re instanceof IDBTransaction&&function rt(re){if($.has(re))return;const te=new Promise((Re,Fe)=>{const It=()=>{re.removeEventListener("complete",kt),re.removeEventListener("error",Qt),re.removeEventListener("abort",Qt)},kt=()=>{Re(),It()},Qt=()=>{Fe(re.error||new DOMException("AbortError","AbortError")),It()};re.addEventListener("complete",kt),re.addEventListener("error",Qt),re.addEventListener("abort",Qt)});$.set(re,te)}(re),((re,te)=>te.some(Re=>re instanceof Re))(re,function ve(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(re,_e):re)}function Pe(re){if(re instanceof IDBRequest)return function Ce(re){const te=new Promise((Re,Fe)=>{const It=()=>{re.removeEventListener("success",kt),re.removeEventListener("error",Qt)},kt=()=>{Re(Pe(re.result)),It()},Qt=()=>{Fe(re.error),It()};re.addEventListener("success",kt),re.addEventListener("error",Qt)});return te.then(Re=>{Re instanceof IDBCursor&&G.set(Re,re)}).catch(()=>{}),Ae.set(te,re),te}(re);if(je.has(re))return je.get(re);const te=vt(re);return te!==re&&(je.set(re,te),Ae.set(te,re)),te}const we=re=>Ae.get(re),Be=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],ee=new Map;function xt(re,te){if(!(re instanceof IDBDatabase)||te in re||"string"!=typeof te)return;if(ee.get(te))return ee.get(te);const Re=te.replace(/FromIndex$/,""),Fe=te!==Re,It=Xe.includes(Re);if(!(Re in(Fe?IDBIndex:IDBObjectStore).prototype)||!It&&!Be.includes(Re))return;const kt=function(){var Qt=(0,l.Z)(function*(bn,...qt){const Tr=this.transaction(bn,It?"readwrite":"readonly");let li=Tr.store;return Fe&&(li=li.index(qt.shift())),(yield Promise.all([li[Re](...qt),It&&Tr.done]))[0]});return function(qt){return Qt.apply(this,arguments)}}();return ee.set(te,kt),kt}!function ye(re){_e=re(_e)}(re=>({...re,get:(te,Re,Fe)=>xt(te,Re)||re.get(te,Re,Fe),has:(te,Re)=>!!xt(te,Re)||re.has(te,Re)}));class ut{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function $t(re){return"VERSION"===re.getComponent()?.type}(Re)){const Fe=Re.getImmediate();return`${Fe.library}/${Fe.version}`}return null}).filter(Re=>Re).join(" ")}}const at="@firebase/app",Wr=new O.Yd("@firebase/app"),ci="[DEFAULT]",sr={[at]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Cn=new Map,Kt=new Map;function it(re,te){try{re.container.addComponent(te)}catch(Re){Wr.debug(`Component ${te.name} failed to register with FirebaseApp ${re.name}`,Re)}}function _t(re,te){re.container.addOrOverwriteComponent(te)}function pn(re){const te=re.name;if(Kt.has(te))return Wr.debug(`There were multiple attempts to register component ${te}.`),!1;Kt.set(te,re);for(const Re of Cn.values())it(Re,re);return!0}function Gi(re,te){const Re=re.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),re.container.getProvider(te)}function Kr(re,te,Re=ci){Gi(re,te).clearInstance(Re)}function Kn(){Kt.clear()}const Ir=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class cn{constructor(te,Re,Fe){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=Fe,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}const Mo="9.22.0";function Yt(re,te={}){let Re=re;"object"!=typeof te&&(te={name:te});const Fe=Object.assign({name:ci,automaticDataCollectionEnabled:!1},te),It=Fe.name;if("string"!=typeof It||!It)throw Ir.create("bad-app-name",{appName:String(It)});if(Re||(Re=(0,ae.aH)()),!Re)throw Ir.create("no-options");const kt=Cn.get(It);if(kt){if((0,ae.vZ)(Re,kt.options)&&(0,ae.vZ)(Fe,kt.config))return kt;throw Ir.create("duplicate-app",{appName:It})}const Qt=new X.H0(It);for(const qt of Kt.values())Qt.addComponent(qt);const bn=new cn(Re,Fe,Qt);return Cn.set(It,bn),bn}function or(re=ci){const te=Cn.get(re);if(!te&&re===ci&&(0,ae.aH)())return Yt();if(!te)throw Ir.create("no-app",{appName:re});return te}function Cr(){return Array.from(Cn.values())}function Ai(re){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,l.Z)(function*(re){const te=re.name;Cn.has(te)&&(Cn.delete(te),yield Promise.all(re.container.getProviders().map(Re=>Re.delete())),re.isDeleted=!0)})).apply(this,arguments)}function Dr(re,te,Re){var Fe;let It=null!==(Fe=sr[re])&&void 0!==Fe?Fe:re;Re&&(It+=`-${Re}`);const kt=It.match(/\s|\//),Qt=te.match(/\s|\//);if(kt||Qt){const bn=[`Unable to register library "${It}" with version "${te}":`];return kt&&bn.push(`library name "${It}" contains illegal characters (whitespace or "/")`),kt&&Qt&&bn.push("and"),Qt&&bn.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void Wr.warn(bn.join(" "))}pn(new X.wA(`${It}-version`,()=>({library:It,version:te}),"VERSION"))}function zi(re,te){if(null!==re&&"function"!=typeof re)throw Ir.create("invalid-log-argument");(0,O.Am)(re,te)}function jn(re){(0,O.Ub)(re)}const U="firebase-heartbeat-store";let L=null;function q(){return L||(L=function ge(re,te,{blocked:Re,upgrade:Fe,blocking:It,terminated:kt}={}){const Qt=indexedDB.open(re,te),bn=Pe(Qt);return Fe&&Qt.addEventListener("upgradeneeded",qt=>{Fe(Pe(Qt.result),qt.oldVersion,qt.newVersion,Pe(Qt.transaction),qt)}),Re&&Qt.addEventListener("blocked",qt=>Re(qt.oldVersion,qt.newVersion,qt)),bn.then(qt=>{kt&&qt.addEventListener("close",()=>kt()),It&&qt.addEventListener("versionchange",Tr=>It(Tr.oldVersion,Tr.newVersion,Tr))}).catch(()=>{}),bn}("firebase-heartbeat-database",1,{upgrade:(re,te)=>{0===te&&re.createObjectStore(U)}}).catch(re=>{throw Ir.create("idb-open",{originalErrorMessage:re.message})})),L}function Q(){return(Q=(0,l.Z)(function*(re){try{return yield(yield q()).transaction(U).objectStore(U).get(Ot(re))}catch(te){if(te instanceof ae.ZR)Wr.warn(te.message);else{const Re=Ir.create("idb-get",{originalErrorMessage:te?.message});Wr.warn(Re.message)}}})).apply(this,arguments)}function Ge(re,te){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,l.Z)(function*(re,te){try{const Fe=(yield q()).transaction(U,"readwrite");yield Fe.objectStore(U).put(te,Ot(re)),yield Fe.done}catch(Re){if(Re instanceof ae.ZR)Wr.warn(Re.message);else{const Fe=Ir.create("idb-set",{originalErrorMessage:Re?.message});Wr.warn(Fe.message)}}})).apply(this,arguments)}function Ot(re){return`${re.name}!${re.options.appId}`}class ct{constructor(te){this.container=te,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new br(Re),this._heartbeatsCachePromise=this._storage.read().then(Fe=>(this._heartbeatsCache=Fe,Fe))}triggerHeartbeat(){var te=this;return(0,l.Z)(function*(){const Fe=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=mt();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==It&&!te._heartbeatsCache.heartbeats.some(kt=>kt.date===It))return te._heartbeatsCache.heartbeats.push({date:It,agent:Fe}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(kt=>{const Qt=new Date(kt.date).valueOf();return Date.now()-Qt<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,l.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Re=mt(),{heartbeatsToSend:Fe,unsentEntries:It}=function gn(re,te=1024){const Re=[];let Fe=re.slice();for(const It of re){const kt=Re.find(Qt=>Qt.agent===It.agent);if(kt){if(kt.dates.push(It.date),mn(Re)>te){kt.dates.pop();break}}else if(Re.push({agent:It.agent,dates:[It.date]}),mn(Re)>te){Re.pop();break}Fe=Fe.slice(1)}return{heartbeatsToSend:Re,unsentEntries:Fe}}(te._heartbeatsCache.heartbeats),kt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Fe}));return te._heartbeatsCache.lastSentHeartbeatDate=Re,It.length>0?(te._heartbeatsCache.heartbeats=It,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),kt})()}}function mt(){return(new Date).toISOString().substring(0,10)}class br{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,l.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function ue(re){return Q.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Re=this;return(0,l.Z)(function*(){var Fe;if(yield Re._canUseIndexedDBPromise){const kt=yield Re.read();return Ge(Re.app,{lastSentHeartbeatDate:null!==(Fe=te.lastSentHeartbeatDate)&&void 0!==Fe?Fe:kt.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Re=this;return(0,l.Z)(function*(){var Fe;if(yield Re._canUseIndexedDBPromise){const kt=yield Re.read();return Ge(Re.app,{lastSentHeartbeatDate:null!==(Fe=te.lastSentHeartbeatDate)&&void 0!==Fe?Fe:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...te.heartbeats]})}})()}}function mn(re){return(0,ae.L)(JSON.stringify({version:2,heartbeats:re})).length}!function xi(re){pn(new X.wA("platform-logger",te=>new ut(te),"PRIVATE")),pn(new X.wA("heartbeat",te=>new ct(te),"PRIVATE")),Dr(at,"0.9.10",re),Dr(at,"0.9.10","esm2017"),Dr("fire-js","")}("")},4859:(yt,Me,F)=>{F.d(Me,{H0:()=>ve,wA:()=>O});var l=F(5861),X=F(2090);class O{constructor(G,$,Z){this.name=G,this.instanceFactory=$,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ae="[DEFAULT]";class se{constructor(G,$){this.name=G,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const $=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has($)){const Z=new X.BH;if(this.instancesDeferred.set($,Z),this.isInitialized($)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:$});je&&Z.resolve(je)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(G){var $;const Z=this.normalizeInstanceIdentifier(G?.identifier),je=null!==($=G?.optional)&&void 0!==$&&$;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Ae){if(je)return null;throw Ae}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function de(pe){return"EAGER"===pe.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[$,Z]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier($);try{const Ae=this.getOrInitializeService({instanceIdentifier:je});Z.resolve(Ae)}catch{}}}}clearInstance(G=ae){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,l.Z)(function*(){const $=Array.from(G.instances.values());yield Promise.all([...$.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...$.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ae){return this.instances.has(G)}getOptions(G=ae){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:$={}}=G,Z=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Z,options:$});for(const[Ae,Ce]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Ae)&&Ce.resolve(je);return je}onInit(G,$){var Z;const je=this.normalizeInstanceIdentifier($),Ae=null!==(Z=this.onInitCallbacks.get(je))&&void 0!==Z?Z:new Set;Ae.add(G),this.onInitCallbacks.set(je,Ae);const Ce=this.instances.get(je);return Ce&&G(Ce,je),()=>{Ae.delete(G)}}invokeOnInitCallbacks(G,$){const Z=this.onInitCallbacks.get($);if(Z)for(const je of Z)try{je(G,$)}catch{}}getOrInitializeService({instanceIdentifier:G,options:$={}}){let Z=this.instances.get(G);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=G,pe===ae?void 0:pe),options:$}),this.instances.set(G,Z),this.instancesOptions.set(G,$),this.invokeOnInitCallbacks(Z,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Z)}catch{}var pe;return Z||null}normalizeInstanceIdentifier(G=ae){return this.component?this.component.multipleInstances?G:ae:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const $=this.getProvider(G.name);if($.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);$.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const $=new se(G,this);return this.providers.set(G,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(yt,Me,F)=>{F.d(Me,{Am:()=>pe,Ub:()=>ve,Yd:()=>de,in:()=>X});const l=[];var X=(()=>{return(G=X||(X={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",X;var G})();const O={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,se={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},fe=(G,$,...Z)=>{if($<G.logLevel)return;const je=(new Date).toISOString(),Ae=se[$];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ae](`[${je}]  ${G.name}:`,...Z)};class de{constructor($){this.name=$,this._logLevel=ae,this._logHandler=fe,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in X))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...$),this._logHandler(this,X.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...$),this._logHandler(this,X.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,X.INFO,...$),this._logHandler(this,X.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,X.WARN,...$),this._logHandler(this,X.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...$),this._logHandler(this,X.ERROR,...$)}}function ve(G){l.forEach($=>{$.setLogLevel(G)})}function pe(G,$){for(const Z of l){let je=null;$&&$.level&&(je=O[$.level]),Z.userLogHandler=null===G?null:(Ae,Ce,...rt)=>{const _e=rt.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch{return null}}).filter(ye=>ye).join(" ");Ce>=(je??Ae.logLevel)&&G({level:X[Ce].toLowerCase(),message:_e,args:rt,type:Ae.name})}}}},259:(yt,Me,F)=>{F.d(Me,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=F(2951);(0,l.registerVersion)("firebase","9.22.0","app")},9260:(yt,Me,F)=>{F.d(Me,{Z:()=>l.Z});var l=F(3942);l.Z.registerVersion("firebase","9.22.0","app-compat")},2644:(yt,Me,F)=>{F.r(Me);var l=F(5861),X=F(3942),O=F(2090),ae=F(2951),se=F(7582),fe=F(1877),de=F(4859);const Ce=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},rt=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ht=new fe.Yd("@firebase/auth");function Pe(y,...f){ht.logLevel<=fe.in.ERROR&&ht.error(`Auth (${ae.SDK_VERSION}): ${y}`,...f)}function we(y,...f){throw Xe(y,...f)}function ge(y,...f){return Xe(y,...f)}function He(y,f,p){const v=Object.assign(Object.assign({},rt()),{[f]:p});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function Be(y,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&we(y,"argument-error"),He(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(y,...f){if("string"!=typeof y){const p=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return _e.create(y,...f)}function ee(y,f,...p){if(!y)throw Xe(f,...p)}function xt(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Pe(f),new Error(f)}function ut(y,f){y||xt(f)}function $t(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function at(){return"http:"===cs()||"https:"===cs()}function cs(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ti{constructor(f,p){this.shortDelay=f,this.longDelay=p,ut(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Wr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xn(y,f){ut(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class Gt{static initialize(f,p,v){this.fetchImpl=f,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},he=new Ti(3e4,6e4);function ne(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function K(y,f,p,v){return xe.apply(this,arguments)}function xe(){return(xe=(0,l.Z)(function*(y,f,p,v,T={}){return De(y,T,(0,l.Z)(function*(){let M={},B={};v&&("GET"===f?B=v:M={body:JSON.stringify(v)});const Y=(0,O.xO)(Object.assign({key:y.config.apiKey},B)).slice(1),Ne=yield y._getAdditionalHeaders();return Ne["Content-Type"]="application/json",y.languageCode&&(Ne["X-Firebase-Locale"]=y.languageCode),Gt.fetch()(Mt(y,y.config.apiHost,p,Y),Object.assign({method:f,headers:Ne,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function De(y,f,p){return tt.apply(this,arguments)}function tt(){return(tt=(0,l.Z)(function*(y,f,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},oe),f);try{const T=new hn(y),M=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const B=yield M.json();if("needConfirmation"in B)throw fn(y,"account-exists-with-different-credential",B);if(M.ok&&!("errorMessage"in B))return B;{const Y=M.ok?B.errorMessage:B.error.message,[Ne,$e]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw fn(y,"credential-already-in-use",B);if("EMAIL_EXISTS"===Ne)throw fn(y,"email-already-in-use",B);if("USER_DISABLED"===Ne)throw fn(y,"user-disabled",B);const Qe=v[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw He(y,Qe,$e);we(y,Qe)}}catch(T){if(T instanceof O.ZR)throw T;we(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function jt(y,f,p,v){return un.apply(this,arguments)}function un(){return(un=(0,l.Z)(function*(y,f,p,v,T={}){const M=yield K(y,f,p,v,T);return"mfaPendingCredential"in M&&we(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Mt(y,f,p,v){const T=`${f}${p}?${v}`;return y.config.emulator?xn(y.config,T):`${y.config.apiScheme}://${T}`}class hn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(ge(this.auth,"network-request-failed")),he.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fn(y,f,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=ge(y,f,v);return T.customData._tokenResponse=p,T}function zt(){return(zt=(0,l.Z)(function*(y,f){return K(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Wn(y,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,l.Z)(function*(y,f){return K(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ye(y,f){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,l.Z)(function*(y,f){return K(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Si(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function ci(){return(ci=(0,l.Z)(function*(y,f=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(f),T=Cn(v);ee(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,B=M?.sign_in_provider;return{claims:T,token:v,authTime:Si(sr(T.auth_time)),issuedAtTime:Si(sr(T.iat)),expirationTime:Si(sr(T.exp)),signInProvider:B||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function sr(y){return 1e3*Number(y)}function Cn(y){const[f,p,v]=y.split(".");if(void 0===f||void 0===p||void 0===v)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(Pe("Failed to decode base64 JWT payload"),null)}catch(T){return Pe("Caught error parsing JWT payload as JSON",T?.toString()),null}}function it(y,f){return _t.apply(this,arguments)}function _t(){return(_t=(0,l.Z)(function*(y,f,p=!1){if(p)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&pn(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function pn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Gi{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,l.Z)(function*(){yield p.iteration()}),v)}iteration(){var f=this;return(0,l.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&f.schedule(!0))}f.schedule()})()}}class Kr{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Si(this.lastLoginAt),this.creationTime=Si(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kn(y){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,l.Z)(function*(y){var f;const p=y.auth,v=yield y.getIdToken(),T=yield it(y,Ye(p,{idToken:v}));ee(T?.users.length,p,"internal-error");const M=T.users[0];y._notifyReloadListener(M);const B=null!==(f=M.providerUserInfo)&&void 0!==f&&f.length?Yt(M.providerUserInfo):[],Y=Mo(y.providerData,B),Qe=!!y.isAnonymous&&!(y.email&&M.passwordHash||Y?.length),ot={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:Y,metadata:new Kr(M.createdAt,M.lastLoginAt),isAnonymous:Qe};Object.assign(y,ot)})).apply(this,arguments)}function cn(){return(cn=(0,l.Z)(function*(y){const f=(0,O.m9)(y);yield Kn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Mo(y,f){return[...y.filter(v=>!f.some(T=>T.providerId===v.providerId)),...f]}function Yt(y){return y.map(f=>{var{providerId:p}=f,v=(0,se._T)(f,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Cr(){return(Cr=(0,l.Z)(function*(y,f){const p=yield De(y,{},(0,l.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:M}=y.config,B=Mt(y,T,"/v1/token",`key=${M}`),Y=yield y._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",Gt.fetch()(B,{method:"POST",headers:Y,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ee(f.idToken,"internal-error"),ee(typeof f.idToken<"u","internal-error"),ee(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Kt(y){const f=Cn(y);return ee(f,"internal-error"),ee(typeof f.exp<"u","internal-error"),ee(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var v=this;return(0,l.Z)(function*(){return ee(!v.accessToken||v.refreshToken,f,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var v=this;return(0,l.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:B}=yield function or(y,f){return Cr.apply(this,arguments)}(f,p);v.updateTokensAndExpiration(T,M,Number(B))})()}updateTokensAndExpiration(f,p,v){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,p){const{refreshToken:v,accessToken:T,expirationTime:M}=p,B=new Ai;return v&&(ee("string"==typeof v,"internal-error",{appName:f}),B.refreshToken=v),T&&(ee("string"==typeof T,"internal-error",{appName:f}),B.accessToken=T),M&&(ee("number"==typeof M,"internal-error",{appName:f}),B.expirationTime=M),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return xt("not implemented")}}function Nn(y,f){ee("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class Dr{constructor(f){var{uid:p,auth:v,stsTokenManager:T}=f,M=(0,se._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Kr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,l.Z)(function*(){const v=yield it(p,p.stsTokenManager.getToken(p.auth,f));return ee(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(f){return function xo(y){return ci.apply(this,arguments)}(this,f)}reload(){return function Ir(y){return cn.apply(this,arguments)}(this)}_assign(f){this!==f&&(ee(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const p=new Dr(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(f){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var v=this;return(0,l.Z)(function*(){let T=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),T=!0),p&&(yield Kn(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,l.Z)(function*(){const p=yield f.getIdToken();return yield it(f,function Er(y,f){return zt.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var v,T,M,B,Y,Ne,$e,Qe;const ot=null!==(v=p.displayName)&&void 0!==v?v:void 0,Sn=null!==(T=p.email)&&void 0!==T?T:void 0,Li=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,Bc=null!==(B=p.photoURL)&&void 0!==B?B:void 0,ns=null!==(Y=p.tenantId)&&void 0!==Y?Y:void 0,jc=null!==(Ne=p._redirectEventId)&&void 0!==Ne?Ne:void 0,Uu=null!==($e=p.createdAt)&&void 0!==$e?$e:void 0,Zg=null!==(Qe=p.lastLoginAt)&&void 0!==Qe?Qe:void 0,{uid:Nf,emailVerified:Rf,isAnonymous:Bu,providerData:ju,stsTokenManager:Wg}=p;ee(Nf&&Wg,f,"internal-error");const Ko=Ai.fromJSON(this.name,Wg);ee("string"==typeof Nf,f,"internal-error"),Nn(ot,f.name),Nn(Sn,f.name),ee("boolean"==typeof Rf,f,"internal-error"),ee("boolean"==typeof Bu,f,"internal-error"),Nn(Li,f.name),Nn(Bc,f.name),Nn(ns,f.name),Nn(jc,f.name),Nn(Uu,f.name),Nn(Zg,f.name);const Ua=new Dr({uid:Nf,auth:f,email:Sn,emailVerified:Rf,displayName:ot,isAnonymous:Bu,photoURL:Bc,phoneNumber:Li,tenantId:ns,stsTokenManager:Ko,createdAt:Uu,lastLoginAt:Zg});return ju&&Array.isArray(ju)&&(Ua.providerData=ju.map(hr=>Object.assign({},hr))),jc&&(Ua._redirectEventId=jc),Ua}static _fromIdTokenResponse(f,p,v=!1){return(0,l.Z)(function*(){const T=new Ai;T.updateFromServerResponse(p);const M=new Dr({uid:p.localId,auth:f,stsTokenManager:T,isAnonymous:v});return yield Kn(M),M})()}}const zi=new Map;function jn(y){ut(y instanceof Function,"Expected a class definition");let f=zi.get(y);return f?(ut(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,zi.set(y,f),f)}const jr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,l.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,l.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,l.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function U(y,f,p){return`firebase:${y}:${f}:${p}`}class L{constructor(f,p,v){this.persistence=f,this.auth=p,this.userKey=v;const{config:T,name:M}=this.auth;this.fullUserKey=U(this.userKey,T.apiKey,M),this.fullPersistenceKey=U("persistence",T.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,l.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Dr._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,l.Z)(function*(){if(p.persistence===f)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,v="authUser"){return(0,l.Z)(function*(){if(!p.length)return new L(jn(jr),f,v);const T=(yield Promise.all(p.map(function(){var $e=(0,l.Z)(function*(Qe){if(yield Qe._isAvailable())return Qe});return function(Qe){return $e.apply(this,arguments)}}()))).filter($e=>$e);let M=T[0]||jn(jr);const B=U(v,f.config.apiKey,f.name);let Y=null;for(const $e of p)try{const Qe=yield $e._get(B);if(Qe){const ot=Dr._fromJSON(f,Qe);$e!==M&&(Y=ot),M=$e;break}}catch{}const Ne=T.filter($e=>$e._shouldAllowMigration);return M._shouldAllowMigration&&Ne.length?(M=Ne[0],Y&&(yield M._set(B,Y.toJSON())),yield Promise.all(p.map(function(){var $e=(0,l.Z)(function*(Qe){if(Qe!==M)try{yield Qe._remove(B)}catch{}});return function(Qe){return $e.apply(this,arguments)}}())),new L(M,f,v)):new L(M,f,v)})()}}function q(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Tt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ue(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(on(f))return"Blackberry";if(Ue(f))return"Webos";if(Q(f))return"Safari";if((f.includes("chrome/")||Ge(f))&&!f.includes("edge/"))return"Chrome";if(Ot(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function ue(y=(0,O.z$)()){return/firefox\//i.test(y)}function Q(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ge(y=(0,O.z$)()){return/crios\//i.test(y)}function Tt(y=(0,O.z$)()){return/iemobile/i.test(y)}function Ot(y=(0,O.z$)()){return/android/i.test(y)}function on(y=(0,O.z$)()){return/blackberry/i.test(y)}function Ue(y=(0,O.z$)()){return/webos/i.test(y)}function ct(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function mn(y=(0,O.z$)()){return ct(y)||Ot(y)||Ue(y)||on(y)||/windows phone/i.test(y)||Tt(y)}function re(y,f=[]){let p;switch(y){case"Browser":p=q((0,O.z$)());break;case"Worker":p=`${q((0,O.z$)())}-${y}`;break;default:p=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${ae.SDK_VERSION}/${v}`}function Re(){return(Re=(0,l.Z)(function*(y){return(yield K(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fe(y,f){return It.apply(this,arguments)}function It(){return(It=(0,l.Z)(function*(y,f){return K(y,"GET","/v2/recaptchaConfig",ne(y,f))})).apply(this,arguments)}function kt(y){return void 0!==y&&void 0!==y.getResponse}function Qt(y){return void 0!==y&&void 0!==y.enterprise}class bn{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function Tr(y){return new Promise((f,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=T=>{const M=ge("internal-error");M.customData=T,p(M)},v.type="text/javascript",v.charset="UTF-8",function qt(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function li(y){return`__${y}${Math.floor(1e6*Math.random())}`}class yn{constructor(f){this.type="recaptcha-enterprise",this.auth=_n(f)}verify(f="verify",p=!1){var v=this;return(0,l.Z)(function*(){function M(){return M=(0,l.Z)(function*(Y){if(!p){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var Ne=(0,l.Z)(function*($e,Qe){Fe(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ot=>{if(void 0!==ot.recaptchaKey){const Sn=new bn(ot);return null==Y.tenantId?Y._agentRecaptchaConfig=Sn:Y._tenantRecaptchaConfigs[Y.tenantId]=Sn,$e(Sn.siteKey)}Qe(new Error("recaptcha Enterprise site key undefined"))}).catch(ot=>{Qe(ot)})});return function($e,Qe){return Ne.apply(this,arguments)}}())}),M.apply(this,arguments)}function B(Y,Ne,$e){const Qe=window.grecaptcha;Qt(Qe)?Qe.enterprise.ready(()=>{Qe.enterprise.execute(Y,{action:f}).then(ot=>{Ne(ot)}).catch(()=>{Ne("NO_RECAPTCHA")})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,Ne)=>{(function T(Y){return M.apply(this,arguments)})(v.auth).then($e=>{if(!p&&Qt(window.grecaptcha))B($e,Y,Ne);else{if(typeof window>"u")return void Ne(new Error("RecaptchaVerifier is only supported in browser"));Tr("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{B($e,Y,Ne)}).catch(Qe=>{Ne(Qe)})}}).catch($e=>{Ne($e)})})})()}}function qi(y,f,p){return eu.apply(this,arguments)}function eu(){return(eu=(0,l.Z)(function*(y,f,p,v=!1){const T=new yn(y);let M;try{M=yield T.verify(p)}catch{M=yield T.verify(p,!0)}const B=Object.assign({},f);return Object.assign(B,v?{captchaResp:M}:{captchaResponse:M}),Object.assign(B,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(B,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),B})).apply(this,arguments)}class io{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const v=M=>new Promise((B,Y)=>{try{B(f(M))}catch(Ne){Y(Ne)}});v.onAbort=p,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,l.Z)(function*(){if(p.auth.currentUser===f)return;const v=[];try{for(const T of p.queue)yield T(f),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const M of v)try{M()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class ic{constructor(f,p,v,T){this.app=f,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=v,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fs(this),this.idTokenSubscription=new Fs(this),this.beforeStateQueue=new io(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(f,p){var v=this;return p&&(this._popupRedirectResolver=jn(p)),this._initializationPromise=this.queue((0,l.Z)(function*(){var T,M;if(!v._deleted&&(v.persistenceManager=yield L.create(v,f),!v._deleted)){if(null!==(T=v._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(M=v.currentUser)||void 0===M?void 0:M.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,l.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,l.Z)(function*(){var v;const T=yield p.assertedPersistence.getCurrentUser();let M=T,B=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Y=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,Ne=M?._redirectEventId,$e=yield p.tryRedirectSignIn(f);(!Y||Y===Ne)&&$e?.user&&(M=$e.user,B=!0)}if(!M)return p.directlySetCurrentUser(null);if(!M._redirectEventId){if(B)try{yield p.beforeStateQueue.runMiddleware(M)}catch(Y){M=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Y))}return M?p.reloadAndSetCurrentUserOrClear(M):p.directlySetCurrentUser(null)}return ee(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===M._redirectEventId?p.directlySetCurrentUser(M):p.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var p=this;return(0,l.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,l.Z)(function*(){try{yield Kn(f)}catch(v){if("auth/network-request-failed"!==v?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ro(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,l.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,l.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&ee(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(f,p=!1){var v=this;return(0,l.Z)(function*(){if(!v._deleted)return f&&ee(v.tenantId===f.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(f)),v.queue((0,l.Z)(function*(){yield v.directlySetCurrentUser(f),v.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,l.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,l.Z)(function*(){yield p.assertedPersistence.setPersistence(jn(f))}))}initializeRecaptchaConfig(){var f=this;return(0,l.Z)(function*(){const p=yield Fe(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),v=new bn(p);null==f.tenantId?f._agentRecaptchaConfig=v:f._tenantRecaptchaConfigs[f.tenantId]=v,v.emailPasswordEnabled&&new yn(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,p,v){return this.registerStateListener(this.authStateSubscription,f,p,v)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,v){return this.registerStateListener(this.idTokenSubscription,f,p,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var v=this;return(0,l.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,l.Z)(function*(){if(!p.redirectPersistenceManager){const v=f&&jn(f)||p._popupRedirectResolver;ee(v,p,"argument-error"),p.redirectPersistenceManager=yield L.create(p,[jn(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,l.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,l.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===f?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,l.Z)(function*(){if(f===p.currentUser)return p.queue((0,l.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,v,T){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),B=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(B,this,"internal-error"),B.then(()=>M(this.currentUser)),"function"==typeof p?f.addObserver(p,v,T):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,l.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=re(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,l.Z)(function*(){var p;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();T&&(v["X-Firebase-Client"]=T);const M=yield f._getAppCheckToken();return M&&(v["X-Firebase-AppCheck"]=M),v})()}_getAppCheckToken(){var f=this;return(0,l.Z)(function*(){var p;const v=yield null===(p=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return v?.error&&function vt(y,...f){ht.logLevel<=fe.in.WARN&&ht.warn(`Auth (${ae.SDK_VERSION}): ${y}`,...f)}(`Error while retrieving App Check token: ${v.error}`),v?.token})()}}function _n(y){return(0,O.m9)(y)}class Fs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ar(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Ro(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class ls{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return xt("not implemented")}_getIdTokenResponse(f){return xt("not implemented")}_linkToIdToken(f,p){return xt("not implemented")}_getReauthenticationResolver(f){return xt("not implemented")}}function Mi(y,f){return Po.apply(this,arguments)}function Po(){return(Po=(0,l.Z)(function*(y,f){return K(y,"POST","/v1/accounts:resetPassword",ne(y,f))})).apply(this,arguments)}function Ll(y,f){return sc.apply(this,arguments)}function sc(){return(sc=(0,l.Z)(function*(y,f){return K(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Vl(y,f){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,l.Z)(function*(y,f){return K(y,"POST","/v1/accounts:update",ne(y,f))})).apply(this,arguments)}function En(y,f){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,l.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:signInWithPassword",ne(y,f))})).apply(this,arguments)}function oc(y,f){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,l.Z)(function*(y,f){return K(y,"POST","/v1/accounts:sendOobCode",ne(y,f))})).apply(this,arguments)}function Oh(y,f){return nu.apply(this,arguments)}function nu(){return(nu=(0,l.Z)(function*(y,f){return oc(y,f)})).apply(this,arguments)}function ru(y,f){return kh.apply(this,arguments)}function kh(){return(kh=(0,l.Z)(function*(y,f){return oc(y,f)})).apply(this,arguments)}function jl(y,f){return iu.apply(this,arguments)}function iu(){return(iu=(0,l.Z)(function*(y,f){return oc(y,f)})).apply(this,arguments)}function Cg(y,f){return $l.apply(this,arguments)}function $l(){return($l=(0,l.Z)(function*(y,f){return oc(y,f)})).apply(this,arguments)}function ac(){return(ac=(0,l.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:signInWithEmailLink",ne(y,f))})).apply(this,arguments)}function Fh(){return(Fh=(0,l.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:signInWithEmailLink",ne(y,f))})).apply(this,arguments)}class uc extends ls{constructor(f,p,v,T=null){super("password",v),this._email=f,this._password=p,this._tenantId=T}static _fromEmailAndPassword(f,p){return new uc(f,p,"password")}static _fromEmailAndCode(f,p,v=null){return new uc(f,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,l.Z)(function*(){var v;switch(p.signInMethod){case"password":const T={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(v=f._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const M=yield qi(f,T,"signInWithPassword");return En(f,M)}return En(f,T).catch(function(){var M=(0,l.Z)(function*(B){if("auth/missing-recaptcha-token"===B.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Y=yield qi(f,T,"signInWithPassword");return En(f,Y)}return Promise.reject(B)});return function(B){return M.apply(this,arguments)}}());case"emailLink":return function Hl(y,f){return ac.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:we(f,"internal-error")}})()}_linkToIdToken(f,p){var v=this;return(0,l.Z)(function*(){switch(v.signInMethod){case"password":return Ll(f,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Gl(y,f){return Fh.apply(this,arguments)}(f,{idToken:p,email:v._email,oobCode:v._password});default:we(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ni(y,f){return ds.apply(this,arguments)}function ds(){return(ds=(0,l.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:signInWithIdp",ne(y,f))})).apply(this,arguments)}class di extends ls{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new di(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):we("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T}=p,M=(0,se._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const B=new di(v,T);return B.idToken=M.idToken||void 0,B.accessToken=M.accessToken||void 0,B.secret=M.secret,B.nonce=M.nonce,B.pendingToken=M.pendingToken||null,B}_getIdTokenResponse(f){return Ni(f,this.buildRequest())}_linkToIdToken(f,p){const v=this.buildRequest();return v.idToken=p,Ni(f,v)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Ni(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,O.xO)(p)}return f}}function zl(y,f){return aa.apply(this,arguments)}function aa(){return(aa=(0,l.Z)(function*(y,f){return K(y,"POST","/v1/accounts:sendVerificationCode",ne(y,f))})).apply(this,arguments)}function su(){return(su=(0,l.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:signInWithPhoneNumber",ne(y,f))})).apply(this,arguments)}function lc(){return(lc=(0,l.Z)(function*(y,f){const p=yield jt(y,"POST","/v1/accounts:signInWithPhoneNumber",ne(y,f));if(p.temporaryProof)throw fn(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const ou={USER_NOT_FOUND:"user-not-found"};function mr(){return(mr=(0,l.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:signInWithPhoneNumber",ne(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ou)})).apply(this,arguments)}class xr extends ls{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new xr({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new xr({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function cc(y,f){return su.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function Vh(y,f){return lc.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Uh(y,f){return mr.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:M}=f;return v||p||T||M?new xr({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:M}):null}}class uu{constructor(f){var p,v,T,M,B,Y;const Ne=(0,O.zd)((0,O.pd)(f)),$e=null!==(p=Ne.apiKey)&&void 0!==p?p:null,Qe=null!==(v=Ne.oobCode)&&void 0!==v?v:null,ot=function Dg(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ne.mode)&&void 0!==T?T:null);ee($e&&Qe&&ot,"argument-error"),this.apiKey=$e,this.operation=ot,this.code=Qe,this.continueUrl=null!==(M=Ne.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(B=Ne.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(Y=Ne.tenantId)&&void 0!==Y?Y:null}static parseLink(f){const p=function au(y){const f=(0,O.zd)((0,O.pd)(y)).link,p=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||f||y}(f);try{return new uu(p)}catch{return null}}}let $n=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return uc._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=uu.parseLink(v);return ee(T,"argument-error"),uc._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class hs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class cu extends hs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class hi extends cu{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return ee("providerId"in p&&"signInMethod"in p,"argument-error"),di._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ee(f.idToken||f.accessToken,"argument-error"),di._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return hi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return hi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:M,nonce:B,providerId:Y}=f;if(!v&&!T&&!p&&!M||!Y)return null;try{return new hi(Y)._credential({idToken:p,accessToken:v,nonce:B,pendingToken:M})}catch{return null}}}let Hr=(()=>{class y extends cu{constructor(){super("facebook.com")}static credential(p){return di._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),dc=(()=>{class y extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return di._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ua=(()=>{class y extends cu{constructor(){super("github.com")}static credential(p){return di._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Hn extends ls{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return Ni(f,this.buildRequest())}_linkToIdToken(f,p){const v=this.buildRequest();return v.idToken=p,Ni(f,v)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Ni(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T,pendingToken:M}=p;return v&&T&&M&&v===T?new Hn(v,M):null}static _create(f,p){return new Hn(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ls extends hs{constructor(f){ee(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ls.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ls.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=Hn.fromJSON(f);return ee(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:v}=f;if(!p||!v)return null;try{return Hn._create(v,p)}catch{return null}}}let ql=(()=>{class y extends cu{constructor(){super("twitter.com")}static credential(p,v){return di._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ri(y,f){return so.apply(this,arguments)}function so(){return(so=(0,l.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:signUp",ne(y,f))})).apply(this,arguments)}class Jr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,v,T=!1){return(0,l.Z)(function*(){const M=yield Dr._fromIdTokenResponse(f,v,T),B=wt(v);return new Jr({user:M,providerId:B,_tokenResponse:v,operationType:p})})()}static _forOperation(f,p,v){return(0,l.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const T=wt(v);return new Jr({user:f,providerId:T,_tokenResponse:v,operationType:p})})()}}function wt(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Zl(){return(Zl=(0,l.Z)(function*(y){var f;const p=_n(y);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new Jr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Ri(p,{returnSecureToken:!0}),T=yield Jr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class la extends O.ZR{constructor(f,p,v,T){var M;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,la.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,p,v,T){return new la(f,p,v,T)}}function Wl(y,f,p,v){return("reauthenticate"===f?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?la._fromErrorAndOperation(y,M,f,v):M})}function hc(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function da(){return(da=(0,l.Z)(function*(y,f){const p=(0,O.m9)(y);yield Ht(!0,p,f);const{providerUserInfo:v}=yield Wn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),T=hc(v||[]);return p.providerData=p.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Yl(y,f){return Se.apply(this,arguments)}function Se(){return(Se=(0,l.Z)(function*(y,f,p=!1){const v=yield it(y,f._linkToIdToken(y.auth,yield y.getIdToken()),p);return Jr._forOperation(y,"link",v)})).apply(this,arguments)}function Ht(y,f,p){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,l.Z)(function*(y,f,p){yield Kn(f);const T=!1===y?"provider-already-linked":"no-such-provider";ee(hc(f.providerData).has(p)===y,f.auth,T)})).apply(this,arguments)}function ha(y,f){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,l.Z)(function*(y,f,p=!1){const{auth:v}=y,T="reauthenticate";try{const M=yield it(y,Wl(v,T,f,y),p);ee(M.idToken,v,"internal-error");const B=Cn(M.idToken);ee(B,v,"internal-error");const{sub:Y}=B;return ee(y.uid===Y,v,"user-mismatch"),Jr._forOperation(y,T,M)}catch(M){throw"auth/user-not-found"===M?.code&&we(v,"user-mismatch"),M}})).apply(this,arguments)}function lu(y,f){return fs.apply(this,arguments)}function fs(){return(fs=(0,l.Z)(function*(y,f,p=!1){const v="signIn",T=yield Wl(y,v,f),M=yield Jr._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Mr(y,f){return oo.apply(this,arguments)}function oo(){return(oo=(0,l.Z)(function*(y,f){return lu(_n(y),f)})).apply(this,arguments)}function fc(y,f){return du.apply(this,arguments)}function du(){return(du=(0,l.Z)(function*(y,f){const p=(0,O.m9)(y);return yield Ht(!1,p,f.providerId),Yl(p,f)})).apply(this,arguments)}function Dn(y,f){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,l.Z)(function*(y,f){return ha((0,O.m9)(y),f)})).apply(this,arguments)}function yr(y,f){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,l.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:signInWithCustomToken",ne(y,f))})).apply(this,arguments)}function pc(){return(pc=(0,l.Z)(function*(y,f){const p=_n(y),v=yield yr(p,{token:f,returnSecureToken:!0}),T=yield Jr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Pi{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?fi._fromServerResponse(f,p):"totpInfo"in p?hu._fromServerResponse(f,p):we(f,"internal-error")}}class fi extends Pi{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new fi(p)}}class hu extends Pi{constructor(f){super("totp",f)}static _fromServerResponse(f,p){return new hu(p)}}function Vs(y,f,p){var v;ee((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ee(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ee(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(ee(p.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function Oo(){return Oo=(0,l.Z)(function*(y,f,p){var v;const T=_n(y),M={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(v=T._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const B=yield qi(T,M,"getOobCode",!0);p&&Vs(T,B,p),yield ru(T,B)}else p&&Vs(T,M,p),yield ru(T,M).catch(function(){var B=(0,l.Z)(function*(Y){if("auth/missing-recaptcha-token"!==Y.code)return Promise.reject(Y);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ne=yield qi(T,M,"getOobCode",!0);p&&Vs(T,Ne,p),yield ru(T,Ne)}});return function(Y){return B.apply(this,arguments)}}())}),Oo.apply(this,arguments)}function fa(){return(fa=(0,l.Z)(function*(y,f,p){yield Mi((0,O.m9)(y),{oobCode:f,newPassword:p})})).apply(this,arguments)}function Oi(){return(Oi=(0,l.Z)(function*(y,f){yield Vl((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Jl(y,f){return pa.apply(this,arguments)}function pa(){return(pa=(0,l.Z)(function*(y,f){const p=(0,O.m9)(y),v=yield Mi(p,{oobCode:f}),T=v.requestType;switch(ee(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(v.mfaInfo,p,"internal-error");default:ee(v.email,p,"internal-error")}let M=null;return v.mfaInfo&&(M=Pi._fromServerResponse(_n(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:M},operation:T}})).apply(this,arguments)}function ao(){return(ao=(0,l.Z)(function*(y,f){const{data:p}=yield Jl((0,O.m9)(y),f);return p.email})).apply(this,arguments)}function ga(){return ga=(0,l.Z)(function*(y,f,p){var v;const T=_n(y),M={returnSecureToken:!0,email:f,password:p,clientType:"CLIENT_TYPE_WEB"};let B;if(null!==(v=T._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const $e=yield qi(T,M,"signUpPassword");B=Ri(T,$e)}else B=Ri(T,M).catch(function(){var $e=(0,l.Z)(function*(Qe){if("auth/missing-recaptcha-token"===Qe.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ot=yield qi(T,M,"signUpPassword");return Ri(T,ot)}return Promise.reject(Qe)});return function(Qe){return $e.apply(this,arguments)}}());const Y=yield B.catch($e=>Promise.reject($e)),Ne=yield Jr._fromIdTokenResponse(T,"signIn",Y);return yield T._updateCurrentUser(Ne.user),Ne}),ga.apply(this,arguments)}function td(){return td=(0,l.Z)(function*(y,f,p){var v;const T=_n(y),M={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function B(Y,Ne){ee(Ne.handleCodeInApp,T,"argument-error"),Ne&&Vs(T,Y,Ne)}if(null!==(v=T._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const Y=yield qi(T,M,"getOobCode",!0);B(Y,p),yield jl(T,Y)}else B(M,p),yield jl(T,M).catch(function(){var Y=(0,l.Z)(function*(Ne){if("auth/missing-recaptcha-token"!==Ne.code)return Promise.reject(Ne);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield qi(T,M,"getOobCode",!0);B($e,p),yield jl(T,$e)}});return function(Ne){return Y.apply(this,arguments)}}())}),td.apply(this,arguments)}function ps(){return(ps=(0,l.Z)(function*(y,f,p){const v=(0,O.m9)(y),T=$n.credentialWithLink(f,p||$t());return ee(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Mr(v,T)})).apply(this,arguments)}function On(y,f){return nd.apply(this,arguments)}function nd(){return(nd=(0,l.Z)(function*(y,f){return K(y,"POST","/v1/accounts:createAuthUri",ne(y,f))})).apply(this,arguments)}function rd(){return(rd=(0,l.Z)(function*(y,f){const v={identifier:f,continueUri:at()?$t():"http://localhost"},{signinMethods:T}=yield On((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function sd(){return(sd=(0,l.Z)(function*(y,f){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Vs(p.auth,T,f);const{email:M}=yield Oh(p.auth,T);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function uo(){return(uo=(0,l.Z)(function*(y,f,p){const v=(0,O.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};p&&Vs(v.auth,M,p);const{email:B}=yield Cg(v.auth,M);B!==y.email&&(yield y.reload())})).apply(this,arguments)}function mu(y,f){return Us.apply(this,arguments)}function Us(){return(Us=(0,l.Z)(function*(y,f){return K(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ma(){return(ma=(0,l.Z)(function*(y,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const v=(0,O.m9)(y),M={idToken:yield v.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},B=yield it(v,mu(v.auth,M));v.displayName=B.displayName||null,v.photoURL=B.photoUrl||null;const Y=v.providerData.find(({providerId:Ne})=>"password"===Ne);Y&&(Y.displayName=v.displayName,Y.photoURL=v.photoURL),yield v._updateTokensIfNecessary(B)})).apply(this,arguments)}function ya(y,f,p){return yu.apply(this,arguments)}function yu(){return(yu=(0,l.Z)(function*(y,f,p){const{auth:v}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),p&&(M.password=p);const B=yield it(y,Ll(v,M));yield y._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class ms{constructor(f,p,v={}){this.isNewUser=f,this.providerId=p,this.profile=v}}class _a extends ms{constructor(f,p,v,T){super(f,p,v),this.username=T}}class Gh extends ms{constructor(f,p){super(f,"facebook.com",p)}}class ud extends _a{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class cd extends ms{constructor(f,p){super(f,"google.com",p)}}class _u extends _a{constructor(f,p,v){super(f,"twitter.com",p,v)}}function vu(y){const{user:f,_tokenResponse:p}=y;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Tg(y){var f,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&y?.idToken){const B=null===(p=null===(f=Cn(y.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(B)return new ms(M,"anonymous"!==B&&"custom"!==B?B:null)}if(!v)return null;switch(v){case"facebook.com":return new Gh(M,T);case"github.com":return new ud(M,T);case"google.com":return new cd(M,T);case"twitter.com":return new _u(M,T,y.screenName||null);case"custom":case"anonymous":return new ms(M,null);default:return new ms(M,v,T)}}(p)}class Qi{constructor(f,p,v){this.type=f,this.credential=p,this.auth=v}static _fromIdtoken(f,p){return new Qi("enroll",f,p)}static _fromMfaPendingCredential(f){return new Qi("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,v;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Qi._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(v=f.multiFactorSession)&&void 0!==v&&v.idToken)return Qi._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Bs{constructor(f,p,v){this.session=f,this.hints=p,this.signInResolver=v}static _fromError(f,p){const v=_n(f),T=p.customData._serverResponse,M=(T.mfaInfo||[]).map(Y=>Pi._fromServerResponse(v,Y));ee(T.mfaPendingCredential,v,"internal-error");const B=Qi._fromMfaPendingCredential(T.mfaPendingCredential);return new Bs(B,M,function(){var Y=(0,l.Z)(function*(Ne){const $e=yield Ne._process(v,B);delete T.mfaInfo,delete T.mfaPendingCredential;const Qe=Object.assign(Object.assign({},T),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(p.operationType){case"signIn":const ot=yield Jr._fromIdTokenResponse(v,p.operationType,Qe);return yield v._updateCurrentUser(ot.user),ot;case"reauthenticate":return ee(p.user,v,"internal-error"),Jr._forOperation(p.user,p.operationType,Qe);default:we(v,"internal-error")}});return function(Ne){return Y.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,l.Z)(function*(){return p.signInResolver(f)})()}}function yc(y,f){return K(y,"POST","/v2/accounts/mfaEnrollment:start",ne(y,f))}class Yn{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>Pi._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new Yn(f)}getSession(){var f=this;return(0,l.Z)(function*(){return Qi._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var v=this;return(0,l.Z)(function*(){const T=f,M=yield v.getSession(),B=yield it(v.user,T._process(v.user.auth,M,p));return yield v.user._updateTokensIfNecessary(B),v.user.reload()})()}unenroll(f){var p=this;return(0,l.Z)(function*(){const v="string"==typeof f?f:f.uid,T=yield p.user.getIdToken();try{const M=yield it(p.user,function vc(y,f){return K(y,"POST","/v2/accounts/mfaEnrollment:withdraw",ne(y,f))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:B})=>B!==v),yield p.user._updateTokensIfNecessary(M),yield p.user.reload()}catch(M){throw M}})()}}const Lo=new WeakMap,co="__sak";class Cu{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(co,"1"),this.storage.removeItem(co),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ji=(()=>{class y extends Cu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function qh(){const y=(0,O.z$)();return Q(y)||ct(y)}()&&function xi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=mn(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),M=this.localCache[v];T!==M&&p(v,M,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((Y,Ne,$e)=>{this.notifyListeners(Y,$e)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(T);if(p.newValue!==Y)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const M=()=>{const Y=this.storage.getItem(T);!v&&this.localCache[T]===Y||this.notifyListeners(T,Y)},B=this.storage.getItem(T);!function br(){return(0,O.w1)()&&10===document.documentMode}()||B===p.newValue||p.newValue===p.oldValue?M():setTimeout(M,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const M of Array.from(T))M(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,M=this;return(0,l.Z)(function*(){yield T().call(M,p,v),M.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,l.Z)(function*(){const M=yield v().call(T,p);return T.localCache[p]=JSON.stringify(M),M})()}_remove(p){var v=()=>super._remove,T=this;return(0,l.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),js=(()=>{class y extends Cu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let dd=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(M=>M.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,l.Z)(function*(){const T=p,{eventId:M,eventType:B,data:Y}=T.data,Ne=v.handlersMap[B];if(!Ne?.size)return;T.ports[0].postMessage({status:"ack",eventId:M,eventType:B});const $e=Array.from(Ne).map(function(){var ot=(0,l.Z)(function*(Sn){return Sn(T.origin,Y)});return function(Sn){return ot.apply(this,arguments)}}()),Qe=yield function ld(y){return Promise.all(y.map(function(){var f=(0,l.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return f.apply(this,arguments)}}()))}($e);T.ports[0].postMessage({status:"done",eventId:M,eventType:B,response:Qe})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ki(y="",f=10){let p="";for(let v=0;v<f;v++)p+=Math.floor(10*Math.random());return y+p}class Zh{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,v=50){var T=this;return(0,l.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let B,Y;return new Promise((Ne,$e)=>{const Qe=ki("",20);M.port1.start();const ot=setTimeout(()=>{$e(new Error("unsupported_event"))},v);Y={messageChannel:M,onMessage(Sn){const Li=Sn;if(Li.data.eventId===Qe)switch(Li.data.status){case"ack":clearTimeout(ot),B=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Ne(Li.data.response);break;default:clearTimeout(ot),clearTimeout(B),$e(new Error("invalid_response"))}}},T.handlers.add(Y),M.port1.addEventListener("message",Y.onMessage),T.target.postMessage({eventType:f,eventId:Qe,data:p},[M.port2])}).finally(()=>{Y&&T.removeMessageHandler(Y)})})()}}function kn(){return window}function Ca(){return typeof kn().WorkerGlobalScope<"u"&&"function"==typeof kn().importScripts}function bu(){return(bu=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const _s="firebaseLocalStorageDb",Bo="firebaseLocalStorage",$s="fbase_key";class jo{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Da(y,f){return y.transaction([Bo],f?"readwrite":"readonly").objectStore(Bo)}function Ic(){const y=indexedDB.open(_s,1);return new Promise((f,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Bo,{keyPath:$s})}catch(T){p(T)}}),y.addEventListener("success",(0,l.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Bo)?f(v):(v.close(),yield function Xt(){const y=indexedDB.deleteDatabase(_s);return new jo(y).toPromise()}(),f(yield Ic()))}))})}function Cc(y,f,p){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,l.Z)(function*(y,f,p){const v=Da(y,!0).put({[$s]:f,value:p});return new jo(v).toPromise()})).apply(this,arguments)}function Kh(){return(Kh=(0,l.Z)(function*(y,f){const p=Da(y,!1).get(f),v=yield new jo(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Dc(y,f){const p=Da(y,!0).delete(f);return new jo(p).toPromise()}const $o=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,l.Z)(function*(){return p.db||(p.db=yield Ic()),p.db})()}_withRetries(p){var v=this;return(0,l.Z)(function*(){let T=0;for(;;)try{const M=yield v._openDb();return yield p(M)}catch(M){if(T++>3)throw M;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,l.Z)(function*(){return Ca()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,l.Z)(function*(){p.receiver=dd._getInstance(function Uo(){return Ca()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,l.Z)(function*(T,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(T,M){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,l.Z)(function*(T,M){return["keyChanged"]});return function(T,M){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,l.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function Ec(){return bu.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Zh(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);!M||(null===(v=M[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=M[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,l.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function ys(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ic();return yield Cc(p,co,"1"),yield Dc(p,co),!0}catch{}return!1})()}_withPendingWrite(p){var v=this;return(0,l.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,l.Z)(function*(){return T._withPendingWrite((0,l.Z)(function*(){return yield T._withRetries(M=>Cc(M,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,l.Z)(function*(){const T=yield v._withRetries(M=>function fd(y,f){return Kh.apply(this,arguments)}(M,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,l.Z)(function*(){return v._withPendingWrite((0,l.Z)(function*(){return yield v._withRetries(T=>Dc(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,l.Z)(function*(){const v=yield p._withRetries(B=>{const Y=Da(B,!1).getAll();return new jo(Y).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],M=new Set;for(const{fbase_key:B,value:Y}of v)M.add(B),JSON.stringify(p.localCache[B])!==JSON.stringify(Y)&&(p.notifyListeners(B,Y),T.push(B));for(const B of Object.keys(p.localCache))p.localCache[B]&&!M.has(B)&&(p.notifyListeners(B,null),T.push(B));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const M of Array.from(T))M(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function zn(y,f){return K(y,"POST","/v2/accounts/mfaSignIn:start",ne(y,f))}const ur=1e12;class gi{constructor(f){this.auth=f,this.counter=ur,this._widgets=new Map}render(f,p){const v=this.counter;return this._widgets.set(v,new Qh(f,this.auth.name,p||{})),this.counter++,v}reset(f){var p;const v=f||ur;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(f){var p;return(null===(p=this._widgets.get(f||ur))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,l.Z)(function*(){var v;return null===(v=p._widgets.get(f||ur))||void 0===v||v.execute(),""})()}}class Qh{constructor(f,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;ee(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function mi(y){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ho=li("rcb"),Tc=new Ti(3e4,6e4);class Jh{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=kn().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return ee(function xg(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),f,"argument-error"),this.shouldResolveImmediately(p)&&kt(kn().grecaptcha)?Promise.resolve(kn().grecaptcha):new Promise((v,T)=>{const M=kn().setTimeout(()=>{T(ge(f,"network-request-failed"))},Tc.get());kn()[ho]=()=>{kn().clearTimeout(M),delete kn()[ho];const Y=kn().grecaptcha;if(!Y||!kt(Y))return void T(ge(f,"internal-error"));const Ne=Y.render;Y.render=($e,Qe)=>{const ot=Ne($e,Qe);return this.counter++,ot},this.hostLanguage=p,v(Y)},Tr(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:ho,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),T(ge(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=kn().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hs{load(f){return(0,l.Z)(function*(){return new gi(f)})()}clearedOneInstance(){}}const Tu="recaptcha",yi={theme:"light",type:"image"};class pd{constructor(f,p=Object.assign({},yi),v){this.parameters=p,this.type=Tu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(v),this.isInvisible="invisible"===this.parameters.size,ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;ee(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hs:new Jh,this.validateStartingState()}verify(){var f=this;return(0,l.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(p)||new Promise(M=>{const B=Y=>{!Y||(f.tokenChangeListeners.delete(B),M(Y))};f.tokenChangeListeners.add(B),f.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof f)f(p);else if("string"==typeof f){const v=kn()[f];"function"==typeof v&&v(p)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,l.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,l.Z)(function*(){ee(at()&&!Ca(),f.auth,"internal-error"),yield function Ta(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function te(y){return Re.apply(this,arguments)}(f.auth);ee(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Mg{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=xr._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function gd(){return(gd=(0,l.Z)(function*(y,f,p){const v=_n(y),T=yield yd(v,f,(0,O.m9)(p));return new Mg(T,M=>Mr(v,M))})).apply(this,arguments)}function ef(){return(ef=(0,l.Z)(function*(y,f,p){const v=(0,O.m9)(y);yield Ht(!1,v,"phone");const T=yield yd(v.auth,f,(0,O.m9)(p));return new Mg(T,M=>fc(v,M))})).apply(this,arguments)}function Sa(){return(Sa=(0,l.Z)(function*(y,f,p){const v=(0,O.m9)(y),T=yield yd(v.auth,f,(0,O.m9)(p));return new Mg(T,M=>Dn(v,M))})).apply(this,arguments)}function yd(y,f,p){return ln.apply(this,arguments)}function ln(){return(ln=(0,l.Z)(function*(y,f,p){var v;const T=yield p.verify();try{let M;if(ee("string"==typeof T,y,"argument-error"),ee(p.type===Tu,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const B=M.session;if("phoneNumber"in M)return ee("enroll"===B.type,y,"internal-error"),(yield yc(y,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ee("signin"===B.type,y,"internal-error");const Y=(null===(v=M.multiFactorHint)||void 0===v?void 0:v.uid)||M.multiFactorUid;return ee(Y,y,"missing-multi-factor-info"),(yield zn(y,{mfaPendingCredential:B.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield zl(y,{phoneNumber:M.phoneNumber,recaptchaToken:T});return B}}finally{p._reset()}})).apply(this,arguments)}function lt(){return(lt=(0,l.Z)(function*(y,f){yield Yl((0,O.m9)(y),f)})).apply(this,arguments)}let _r=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=_n(p)}verifyPhoneNumber(p,v){return yd(this.auth,p,(0,O.m9)(v))}static credential(p,v){return xr._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?xr._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function cr(y,f){return f?jn(f):(ee(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class fo extends ls{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ni(f,this._buildIdpRequest())}_linkToIdToken(f,p){return Ni(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return Ni(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function Aa(y){return lu(y.auth,new fo(y),y.bypassAuthState)}function Xi(y){const{auth:f,user:p}=y;return ee(p,f,"internal-error"),ha(p,new fo(y),y.bypassAuthState)}function tf(y){return Su.apply(this,arguments)}function Su(){return(Su=(0,l.Z)(function*(y){const{auth:f,user:p}=y;return ee(p,f,"internal-error"),Yl(p,new fo(y),y.bypassAuthState)})).apply(this,arguments)}class Ho{constructor(f,p,v,T,M=!1){this.auth=f,this.resolver=v,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,l.Z)(function*(v,T){f.pendingPromise={resolve:v,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,l.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:M,tenantId:B,error:Y,type:Ne}=f;if(Y)return void p.reject(Y);const $e={auth:p.auth,requestUri:v,sessionId:T,tenantId:B||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ne)($e))}catch(Qe){p.reject(Qe)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Aa;case"linkViaPopup":case"linkViaRedirect":return tf;case"reauthViaPopup":case"reauthViaRedirect":return Xi;default:we(this.auth,"internal-error")}}resolve(f){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Go=new Ti(2e3,1e4);function Gn(){return(Gn=(0,l.Z)(function*(y,f,p){const v=_n(y);Be(y,f,hs);const T=cr(v,p);return new Au(v,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function ft(){return(ft=(0,l.Z)(function*(y,f,p){const v=(0,O.m9)(y);Be(v.auth,f,hs);const T=cr(v.auth,p);return new Au(v.auth,"reauthViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}function po(){return(po=(0,l.Z)(function*(y,f,p){const v=(0,O.m9)(y);Be(v.auth,f,hs);const T=cr(v.auth,p);return new Au(v.auth,"linkViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}let Au=(()=>{class y extends Ho{constructor(p,v,T,M,B){super(p,v,M,B),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,l.Z)(function*(){const v=yield p.execute();return ee(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,l.Z)(function*(){ut(1===p.filter.length,"Popup operations only handle one event");const v=ki();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(ge(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=null!==(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ge(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,Go.get())};p()}}return y.currentPopupAction=null,y})();const Fn=new Map;class xa extends Ho{constructor(f,p,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,l.Z)(function*(){let v=Fn.get(p.auth._key());if(!v){try{const M=(yield function vs(y,f){return qo.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;v=()=>Promise.resolve(M)}catch(T){v=()=>Promise.reject(T)}Fn.set(p.auth._key(),v)}return p.bypassAuthState||Fn.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,v=this;return(0,l.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(v,f);if("unknown"!==f.type){if(f.eventId){const T=yield v.auth._redirectUserForId(f.eventId);if(T)return v.user=T,p().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function qo(){return(qo=(0,l.Z)(function*(y,f){const p=Mu(f),v=go(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function es(y,f){return ws.apply(this,arguments)}function ws(){return(ws=(0,l.Z)(function*(y,f){return go(y)._set(Mu(f),"true")})).apply(this,arguments)}function zs(y,f){Fn.set(y._key(),f)}function go(y){return jn(y._redirectPersistence)}function Mu(y){return U("pendingRedirect",y.config.apiKey,y.name)}function ei(){return(ei=(0,l.Z)(function*(y,f,p){const v=_n(y);Be(y,f,hs),yield v._initializationPromise;const T=cr(v,p);return yield es(T,v),T._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function Ln(){return(Ln=(0,l.Z)(function*(y,f,p){const v=(0,O.m9)(y);Be(v.auth,f,hs),yield v.auth._initializationPromise;const T=cr(v.auth,p);yield es(T,v.auth);const M=yield Na(v);return T._openRedirect(v.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function lr(){return(lr=(0,l.Z)(function*(y,f,p){const v=(0,O.m9)(y);Be(v.auth,f,hs),yield v.auth._initializationPromise;const T=cr(v.auth,p);yield Ht(!1,v,f.providerId),yield es(T,v.auth);const M=yield Na(v);return T._openRedirect(v.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function mo(){return(mo=(0,l.Z)(function*(y,f){return yield _n(y)._initializationPromise,Nr(y,f,!1)})).apply(this,arguments)}function Nr(y,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,l.Z)(function*(y,f,p=!1){const v=_n(y),T=cr(v,f),B=yield new xa(v,T,p).execute();return B&&!p&&(delete B.user._redirectEventId,yield v._persistUserIfCurrent(B.user),yield v._setRedirectUser(null,f)),B})).apply(this,arguments)}function Na(y){return I.apply(this,arguments)}function I(){return(I=(0,l.Z)(function*(y){const f=ki(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class x{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(p=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function W(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var v;if(f.error&&!H(f)){const T=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(ge(this.auth,T))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const v=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(k(f))}saveEventToCache(f){this.cachedEventUids.add(k(f)),this.lastProcessedEventTime=Date.now()}}function k(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function H({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function Ee(y){return ze.apply(this,arguments)}function ze(){return(ze=(0,l.Z)(function*(y,f={}){return K(y,"GET","/v1/projects",f)})).apply(this,arguments)}const We=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dt=/^https?/;function Pt(){return(Pt=(0,l.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Ee(y);for(const p of f)try{if(ti(p))return}catch{}we(y,"unauthorized-domain")})).apply(this,arguments)}function ti(y){const f=$t(),{protocol:p,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const B=new URL(y);return""===B.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&B.hostname===v}if(!dt.test(p))return!1;if(We.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Et=new Ti(3e4,6e4);function Ws(){const y=kn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let ni=null;function _i(y){return ni=ni||function wd(y){return new Promise((f,p)=>{var v,T,M;function B(){Ws(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ws(),p(ge(y,"network-request-failed"))},timeout:Et.get()})}if(null!==(T=null===(v=kn().gapi)||void 0===v?void 0:v.iframes)&&void 0!==T&&T.Iframe)f(gapi.iframes.getContext());else{if(null===(M=kn().gapi)||void 0===M||!M.load){const Y=li("iframefcb");return kn()[Y]=()=>{gapi.load?B():p(ge(y,"network-request-failed"))},Tr(`https://apis.google.com/js/api.js?onload=${Y}`).catch(Ne=>p(Ne))}B()}}).catch(f=>{throw ni=null,f})}(y),ni}const ts=new Ti(5e3,15e3),af={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Es=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vw(y){const f=y.config;ee(f.authDomain,y,"auth-domain-config-required");const p=f.emulator?xn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:ae.SDK_VERSION},T=Es.get(y.config.apiHost);T&&(v.eid=T);const M=y._getFrameworks();return M.length&&(v.fw=M.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function Ks(){return Ks=(0,l.Z)(function*(y){const f=yield _i(y),p=kn().gapi;return ee(p,y,"internal-error"),f.open({where:document.body,url:vw(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:af,dontclear:!0},v=>new Promise(function(){var T=(0,l.Z)(function*(M,B){yield v.restyle({setHideOnLeave:!1});const Y=ge(y,"network-request-failed"),Ne=kn().setTimeout(()=>{B(Y)},ts.get());function $e(){kn().clearTimeout(Ne),M(v)}v.ping($e).then($e,()=>{B(Y)})});return function(M,B){return T.apply(this,arguments)}}()))}),Ks.apply(this,arguments)}const Ed={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cf{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const xc=encodeURIComponent("fac");function Is(y,f,p,v,T,M){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,l.Z)(function*(y,f,p,v,T,M){ee(y.config.authDomain,y,"auth-domain-config-required"),ee(y.config.apiKey,y,"invalid-api-key");const B={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:ae.SDK_VERSION,eventId:T};if(f instanceof hs){f.setDefaultLanguage(y.languageCode),B.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(B.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Qe,ot]of Object.entries(M||{}))B[Qe]=ot}if(f instanceof cu){const Qe=f.getScopes().filter(ot=>""!==ot);Qe.length>0&&(B.scopes=Qe.join(","))}y.tenantId&&(B.tid=y.tenantId);const Y=B;for(const Qe of Object.keys(Y))void 0===Y[Qe]&&delete Y[Qe];const Ne=yield y._getAppCheckToken(),$e=Ne?`#${xc}=${encodeURIComponent(Ne)}`:"";return`${yo(y)}?${(0,O.xO)(Y).slice(1)}${$e}`})).apply(this,arguments)}function yo({config:y}){return y.emulator?xn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}const Cd="webStorageSupport";class Mc extends class lf{constructor(f){this.factorId=f}_process(f,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,v);case"signin":return this._finalizeSignIn(f,p.credential);default:return xt("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Mc(f)}_finalizeEnroll(f,p,v){return function pi(y,f){return K(y,"POST","/v2/accounts/mfaEnrollment:finalize",ne(y,f))}(f,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function ba(y,f){return K(y,"POST","/v2/accounts/mfaSignIn:finalize",ne(y,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let kg=(()=>{class y{constructor(){}static assertion(p){return Mc._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Dd="@firebase/auth";class bd{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,l.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(v=>{f(v?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);!p||(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Wo(){return window}function Rc(){return(Rc=(0,l.Z)(function*(y,f,p){var v;const{BuildInfo:T}=Wo();ut(f.sessionId,"AuthEvent did not contain a session ID");const M=yield Ky(f.sessionId),B={};return ct()?B.ibi=T.packageName:Ot()?B.apn=T.packageName:we(y,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=M,Is(y,p,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,B)})).apply(this,arguments)}function ku(){return(ku=(0,l.Z)(function*(y){const{BuildInfo:f}=Wo(),p={};ct()?p.iosBundleId=f.packageName:Ot()?p.androidPackageName=f.packageName:we(y,"operation-not-supported-in-this-environment"),yield Ee(y,p)})).apply(this,arguments)}function Pc(){return(Pc=(0,l.Z)(function*(y,f,p){const{cordova:v}=Wo();let T=()=>{};try{yield new Promise((M,B)=>{let Y=null;function Ne(){var ot;M();const Sn=null===(ot=v.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Sn&&Sn(),"function"==typeof p?.close&&p.close()}function $e(){Y||(Y=window.setTimeout(()=>{B(ge(y,"redirect-cancelled-by-user"))},2e3))}function Qe(){"visible"===document?.visibilityState&&$e()}f.addPassiveListener(Ne),document.addEventListener("resume",$e,!1),Ot()&&document.addEventListener("visibilitychange",Qe,!1),T=()=>{f.removePassiveListener(Ne),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",Qe,!1),Y&&window.clearTimeout(Y)}})}finally{T()}})).apply(this,arguments)}function Ky(y){return gf.apply(this,arguments)}function gf(){return(gf=(0,l.Z)(function*(y){const f=Yy(y),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Yy(y){if(ut(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),p=new Uint8Array(f);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}(0,O.Pz)("authIdTokenMaxAge"),function Fg(y){(0,ae._registerComponent)(new de.wA("auth",(f,{options:p})=>{const v=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),M=f.getProvider("app-check-internal"),{apiKey:B,authDomain:Y}=v.options;ee(B&&!B.includes(":"),"invalid-api-key",{appName:v.name});const Ne={apiKey:B,authDomain:Y,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:re(y)},$e=new ic(v,T,M,Ne);return function Rn(y,f){const p=f?.persistence||[],v=(Array.isArray(p)?p:[p]).map(jn);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,f?.popupRedirectResolver)}($e,p),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,v)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new de.wA("auth-internal",f=>{const p=_n(f.getProvider("auth").getImmediate());return new bd(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Dd,"0.23.2",function ff(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(Dd,"0.23.2","esm2017")}("Browser");class ka extends x{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,l.Z)(function*(){yield f.initPromise})()}}function mf(y){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,l.Z)(function*(y){const f=yield _o()._get(Oc(y));return f&&(yield _o()._remove(Oc(y))),f})).apply(this,arguments)}function Ug(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function _o(){return jn(Ji)}function Oc(y){return U("authEvent",y.config.apiKey,y.name)}function Va(y){if(!y?.includes("?"))return{};const[f,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Md(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ge("no-auth-event")}}function Ds(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Rd(y=(0,O.z$)()){return!("file:"!==Ds()&&"ionic:"!==Ds()&&"capacitor:"!==Ds()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Cf(){try{const y=self.localStorage,f=ki();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Qy(y=(0,O.z$)()){return function If(){return(0,O.w1)()&&11===document?.documentMode}()||function kc(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Df()&&(0,O.hl)()}return!1}function Df(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function bf(){return(function wf(){return"http:"===Ds()||"https:"===Ds()}()||(0,O.ru)()||Rd())&&!function Ef(){return(0,O.b$)()||(0,O.UG)()}()&&Cf()&&!Df()}function Tf(){return Rd()&&typeof document<"u"}function Lu(){return(Lu=(0,l.Z)(function*(){return!!Tf()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const vr={LOCAL:"local",NONE:"none",SESSION:"session"},Vu=ee,Od="persistence";function bs(y){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,l.Z)(function*(y){yield y._initializationPromise;const f=kd(),p=U(Od,y.config.apiKey,y.name);f&&f.setItem(p,y._getPersistence())})).apply(this,arguments)}function kd(){var y;try{return(null===(y=function Pd(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Fd=ee;class Pr{constructor(){this.browserResolver=jn(class Ra{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=js,this._completeRedirectFn=Nr,this._overrideRedirectResult=zs}_openPopup(f,p,v,T){var M=this;return(0,l.Z)(function*(){var B;ut(null===(B=M.eventManagers[f._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const Y=yield Is(f,p,v,$t(),T);return function Pg(y,f,p,v=500,T=600){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-v)/2,0).toString();let Y="";const Ne=Object.assign(Object.assign({},Ed),{width:v.toString(),height:T.toString(),top:M,left:B}),$e=(0,O.z$)().toLowerCase();p&&(Y=Ge($e)?"_blank":p),ue($e)&&(f=f||"http://localhost",Ne.scrollbars="yes");const Qe=Object.entries(Ne).reduce((Sn,[Li,Bc])=>`${Sn}${Li}=${Bc},`,"");if(function gn(y=(0,O.z$)()){var f;return ct(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}($e)&&"_self"!==Y)return function Zy(y,f){const p=document.createElement("a");p.href=y,p.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(f||"",Y),new cf(null);const ot=window.open(f||"",Y,Qe);ee(ot,y,"popup-blocked");try{ot.focus()}catch{}return new cf(ot)}(f,Y,ki())})()}_openRedirect(f,p,v,T){var M=this;return(0,l.Z)(function*(){return yield M._originValidation(f),function wc(y){kn().location.href=y}(yield Is(f,p,v,$t(),T)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:T,promise:M}=this.eventManagers[p];return T?Promise.resolve(T):(ut(M,"If manager is not set, promise should be"),M)}const v=this.initAndGetManager(f);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(f){var p=this;return(0,l.Z)(function*(){const v=yield function Rr(y){return Ks.apply(this,arguments)}(f),T=new x(f);return v.register("authEvent",M=>(ee(M?.authEvent,f,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:T},p.iframes[f._key()]=v,T})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Cd,{type:Cd},T=>{var M;const B=null===(M=T?.[0])||void 0===M?void 0:M[Cd];void 0!==B&&p(!!B),we(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ft(y){return Pt.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return mn()||Q()||ct()}}),this.cordovaResolver=jn(class _f{constructor(){this._redirectPersistence=js,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Nr,this._overrideRedirectResult=zs}_initialize(f){var p=this;return(0,l.Z)(function*(){const v=f._key();let T=p.eventManagers.get(v);return T||(T=new ka(f),p.eventManagers.set(v,T),p.attachCallbackListeners(f,T)),T})()}_openPopup(f){we(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,v,T){var M=this;return(0,l.Z)(function*(){!function Ew(y){var f,p,v,T,M,B,Y,Ne,$e,Qe;const ot=Wo();ee("function"==typeof(null===(f=ot?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(typeof(null===(p=ot?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(M=null===(T=null===(v=ot?.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Ne=null===(Y=null===(B=ot?.cordova)||void 0===B?void 0:B.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===Ne?void 0:Ne.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Qe=null===($e=ot?.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===Qe?void 0:Qe.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const B=yield M._initialize(f);yield B.initialized(),B.resetRedirect(),function nf(){Fn.clear()}(),yield M._originValidation(f);const Y=function Fa(y,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:Ug(),postBody:null,tenantId:y.tenantId,error:ge(y,"no-auth-event")}}(f,v,T);yield function Sd(y,f){return _o()._set(Oc(y),f)}(f,Y);const Ne=yield function Ou(y,f,p){return Rc.apply(this,arguments)}(f,Y,p),$e=yield function pf(y){const{cordova:f}=Wo();return new Promise(p=>{f.plugins.browsertab.isAvailable(v=>{let T=null;v?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function mt(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Ne);return function Oa(y,f,p){return Pc.apply(this,arguments)}(f,B,$e)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Td(y){return ku.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:M}=Wo(),B=setTimeout((0,l.Z)(function*(){yield mf(f),p.onEvent(Md())}),500),Y=function(){var Qe=(0,l.Z)(function*(ot){clearTimeout(B);const Sn=yield mf(f);let Li=null;Sn&&ot?.url&&(Li=function La(y,f){var p,v;const T=function yf(y){const f=Va(y),p=f.link?decodeURIComponent(f.link):void 0,v=Va(p).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Va(T).link||T||v||p||y}(f);if(T.includes("/__/auth/callback")){const M=Va(T),B=M.firebaseError?function Bg(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,Y=null===(v=null===(p=B?.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Ne=Y?ge(Y):null;return Ne?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ne,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Sn,ot.url)),p.onEvent(Li||Md())});return function(Sn){return Qe.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,Y);const Ne=T,$e=`${M.packageName.toLowerCase()}://`;Wo().handleOpenURL=function(){var Qe=(0,l.Z)(function*(ot){if(ot.toLowerCase().startsWith($e)&&Y({url:ot}),"function"==typeof Ne)try{Ne(ot)}catch(Sn){console.error(Sn)}});return function(ot){return Qe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=js,this._completeRedirectFn=Nr,this._overrideRedirectResult=zs}_initialize(f){var p=this;return(0,l.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,v,T){var M=this;return(0,l.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,p,v,T)})()}_openRedirect(f,p,v,T){var M=this;return(0,l.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,p,v,T)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Tf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,l.Z)(function*(){if(f.underlyingResolver)return;const p=yield function Sf(){return Lu.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function Ld(y){return y.unwrap()}function Fc(y){return Vd(y)}function Vd(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return _r.credentialFromResult(y);const p=f.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=dc;break;case"facebook.com":v=Hr;break;case"github.com":v=ua;break;case"twitter.com":v=ql;break;default:const{oauthIdToken:T,oauthAccessToken:M,oauthTokenSecret:B,pendingToken:Y,nonce:Ne}=f;return M||B||T||Y?Y?p.startsWith("saml.")?Hn._create(p,Y):di._fromParams({providerId:p,signInMethod:p,pendingToken:Y,idToken:T,accessToken:M}):new hi(p).credential({idToken:T,accessToken:M,rawNonce:Ne}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function ri(y,f){return f.catch(p=>{throw p instanceof O.ZR&&function Af(y,f){var p;const v=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new Jy(y,function mc(y,f){var p;const v=(0,O.m9)(y),T=f;return ee(f.customData.operationType,v,"argument-error"),ee(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),Bs._fromError(v,T)}(y,f));else if(v){const T=Vd(f),M=f;T&&(M.credential=T,M.tenantId=v.tenantId||void 0,M.email=v.email||void 0,M.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:Fc(p),additionalUserInfo:vu(p),user:dr.getOrCreate(T)}})}function Lc(y,f){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,l.Z)(function*(y,f){const p=yield f;return{verificationId:p.verificationId,confirm:v=>ri(y,p.confirm(v))}})).apply(this,arguments)}class Jy{constructor(f,p){this.resolver=p,this.auth=function Gg(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ri(Ld(this.auth),this.resolver.resolveSignIn(f))}}class dr{constructor(f){this._delegate=f,this.multiFactor=function Ea(y){const f=(0,O.m9)(y);return Lo.has(f)||Lo.set(f,Yn._fromUser(f)),Lo.get(f)}(f)}static getOrCreate(f){return dr.USER_MAP.has(f)||dr.USER_MAP.set(f,new dr(f)),dr.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,l.Z)(function*(){return ri(p.auth,fc(p._delegate,f))})()}linkWithPhoneNumber(f,p){var v=this;return(0,l.Z)(function*(){return Lc(v.auth,function md(y,f,p){return ef.apply(this,arguments)}(v._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,l.Z)(function*(){return ri(p.auth,function Ac(y,f,p){return po.apply(this,arguments)}(p._delegate,f,Pr))})()}linkWithRedirect(f){var p=this;return(0,l.Z)(function*(){return yield bs(_n(p.auth)),function Nu(y,f,p){return function Zs(y,f,p){return lr.apply(this,arguments)}(y,f,p)}(p._delegate,f,Pr)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,l.Z)(function*(){return ri(p.auth,Dn(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return Lc(this.auth,function zy(y,f,p){return Sa.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return ri(this.auth,function zo(y,f,p){return ft.apply(this,arguments)}(this._delegate,f,Pr))}reauthenticateWithRedirect(f){var p=this;return(0,l.Z)(function*(){return yield bs(_n(p.auth)),function Fi(y,f,p){return function vd(y,f,p){return Ln.apply(this,arguments)}(y,f,p)}(p._delegate,f,Pr)})()}sendEmailVerification(f){return function id(y,f){return sd.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,l.Z)(function*(){return yield function Kl(y,f){return da.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function Hh(y,f){return ya((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function gs(y,f){return ya((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Gs(y,f){return lt.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ad(y,f){return ma.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function od(y,f,p){return uo.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}dr.USER_MAP=new WeakMap;const vo=ee;let zg=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;vo(T,"invalid-api-key",{appName:p.name}),vo(T,"invalid-api-key",{appName:p.name});const M=typeof window<"u"?Pr:void 0;this._delegate=v.initialize({options:{persistence:Xy(T,p.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Ce),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?dr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function Fl(y,f,p){const v=_n(y);ee(v._canInitEmulator,v,"emulator-config-failed"),ee(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const T=!!p?.disableWarnings,M=ar(f),{host:B,port:Y}=function $r(y){const f=ar(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const M=T[1];return{host:M,port:Ro(v.substr(M.length+1))}}{const[M,B]=v.split(":");return{host:M,port:Ro(B)}}}(f);v.config.emulator={url:`${M}//${B}${null===Y?"":`:${Y}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:B,port:Y,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function tu(){function y(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function pu(y,f){return Oi.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Jl(this._delegate,p)}confirmPasswordReset(p,v){return function fu(y,f,p){return fa.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,l.Z)(function*(){return ri(T._delegate,function Xl(y,f,p){return ga.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function $h(y,f){return rd.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function jh(y,f){return"EMAIL_SIGNIN"===uu.parseLink(f)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,l.Z)(function*(){vo(bf(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Ma(y,f){return mo.apply(this,arguments)}(p._delegate,Pr);return v?ri(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function vf(y,f){_n(y)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:M,error:B,complete:Y}=xf(p,v,T);return this._delegate.onAuthStateChanged(M,B,Y)}onIdTokenChanged(p,v,T){const{next:M,error:B,complete:Y}=xf(p,v,T);return this._delegate.onIdTokenChanged(M,B,Y)}sendSignInLinkToEmail(p,v){return function ko(y,f,p){return td.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function Ql(y,f,p){return Oo.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,l.Z)(function*(){let T;switch(function $g(y,f){Vu(Object.values(vr).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?Vu(f!==vr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Vu(f===vr.NONE,y,"unsupported-persistence-type"):Df()?Vu(f===vr.NONE||f===vr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Vu(f===vr.NONE||Cf(),y,"unsupported-persistence-type")}(v._delegate,p),p){case vr.SESSION:T=js;break;case vr.LOCAL:T=(yield jn($o)._isAvailable())?$o:Ji;break;case vr.NONE:T=jr;break;default:return we("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ri(this._delegate,function Zi(y){return Zl.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ri(this._delegate,Mr(this._delegate,p))}signInWithCustomToken(p){return ri(this._delegate,function Ki(y,f){return pc.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return ri(this._delegate,function ed(y,f,p){return Mr((0,O.m9)(y),$n.credential(f,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return ri(this._delegate,function Gr(y,f,p){return ps.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return Lc(this._delegate,function Xh(y,f,p){return gd.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,l.Z)(function*(){return vo(bf(),v._delegate,"operation-not-supported-in-this-environment"),ri(v._delegate,function _d(y,f,p){return Gn.apply(this,arguments)}(v._delegate,p,Pr))})()}signInWithRedirect(p){var v=this;return(0,l.Z)(function*(){return vo(bf(),v._delegate,"operation-not-supported-in-this-environment"),yield bs(v._delegate),function rf(y,f,p){return function qs(y,f,p){return ei.apply(this,arguments)}(y,f,p)}(v._delegate,p,Pr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function gu(y,f){return ao.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=vr,y})();function xf(y,f,p){let v=y;"function"!=typeof y&&({next:v,error:f,complete:p}=y);const T=v;return{next:B=>T(B&&dr.getOrCreate(B)),error:f,complete:p}}function Xy(y,f){const p=function Hg(y,f){const p=kd();if(!p)return[];const v=U(Od,y,f);switch(p.getItem(v)){case vr.NONE:return[jr];case vr.LOCAL:return[$o,js];case vr.SESSION:return[js];default:return[]}}(y,f);if(typeof self<"u"&&!p.includes($o)&&p.push($o),typeof window<"u")for(const v of[Ji,js])p.includes(v)||p.push(v);return p.includes(jr)||p.push(jr),p}class Mf{constructor(){this.providerId="phone",this._delegate=new _r(Ld(X.Z.auth()))}static credential(f,p){return _r.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}Mf.PHONE_SIGN_IN_METHOD=_r.PHONE_SIGN_IN_METHOD,Mf.PROVIDER_ID=_r.PROVIDER_ID;const e_=ee;class t_{constructor(f,p,v=X.Z.app()){var T;e_(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new pd(f,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Uc(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new zg(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:$n,FacebookAuthProvider:Hr,GithubAuthProvider:ua,GoogleAuthProvider:dc,OAuthProvider:hi,SAMLAuthProvider:Ls,PhoneAuthProvider:Mf,PhoneMultiFactorGenerator:kg,RecaptchaVerifier:t_,TwitterAuthProvider:ql,Auth:zg,AuthCredential:ls,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(X.Z)},5861:(yt,Me,F)=>{function l(O,ae,se,fe,de,ve,pe){try{var G=O[ve](pe),$=G.value}catch(Z){return void se(Z)}G.done?ae($):Promise.resolve($).then(fe,de)}function X(O){return function(){var ae=this,se=arguments;return new Promise(function(fe,de){var ve=O.apply(ae,se);function pe($){l(ve,fe,de,pe,G,"next",$)}function G($){l(ve,fe,de,pe,G,"throw",$)}pe(void 0)})}}F.d(Me,{Z:()=>X})},7582:(yt,Me,F)=>{function ae(oe,he){var ne={};for(var K in oe)Object.prototype.hasOwnProperty.call(oe,K)&&he.indexOf(K)<0&&(ne[K]=oe[K]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(K=Object.getOwnPropertySymbols(oe);xe<K.length;xe++)he.indexOf(K[xe])<0&&Object.prototype.propertyIsEnumerable.call(oe,K[xe])&&(ne[K[xe]]=oe[K[xe]])}return ne}function Z(oe,he,ne,K){return new(ne||(ne=Promise))(function(De,tt){function jt(hn){try{Mt(K.next(hn))}catch(fn){tt(fn)}}function un(hn){try{Mt(K.throw(hn))}catch(fn){tt(fn)}}function Mt(hn){hn.done?De(hn.value):function xe(De){return De instanceof ne?De:new ne(function(tt){tt(De)})}(hn.value).then(jt,un)}Mt((K=K.apply(oe,he||[])).next())})}function Pe(oe){return this instanceof Pe?(this.v=oe,this):new Pe(oe)}function we(oe,he,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,K=ne.apply(oe,he||[]),De=[];return xe=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),jt("next"),jt("throw"),jt("return",function tt(zt){return function(Wn){return Promise.resolve(Wn).then(zt,fn)}}),xe[Symbol.asyncIterator]=function(){return this},xe;function jt(zt,Wn){K[zt]&&(xe[zt]=function(ir){return new Promise(function(Ye,Mn){De.push([zt,ir,Ye,Mn])>1||un(zt,ir)})},Wn&&(xe[zt]=Wn(xe[zt])))}function un(zt,Wn){try{!function Mt(zt){zt.value instanceof Pe?Promise.resolve(zt.value.v).then(hn,fn):Er(De[0][2],zt)}(K[zt](Wn))}catch(ir){Er(De[0][3],ir)}}function hn(zt){un("next",zt)}function fn(zt){un("throw",zt)}function Er(zt,Wn){zt(Wn),De.shift(),De.length&&un(De[0][0],De[0][1])}}function He(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,he=oe[Symbol.asyncIterator];return he?he.call(oe):(oe=function rt(oe){var he="function"==typeof Symbol&&Symbol.iterator,ne=he&&oe[he],K=0;if(ne)return ne.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&K>=oe.length&&(oe=void 0),{value:oe&&oe[K++],done:!oe}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),ne={},K("next"),K("throw"),K("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function K(De){ne[De]=oe[De]&&function(tt){return new Promise(function(jt,un){!function xe(De,tt,jt,un){Promise.resolve(un).then(function(Mt){De({value:Mt,done:jt})},tt)}(jt,un,(tt=oe[De](tt)).done,tt.value)})}}}F.d(Me,{FC:()=>we,KL:()=>He,_T:()=>ae,mG:()=>Z,qq:()=>Pe}),"function"==typeof SuppressedError&&SuppressedError}},yt=>{yt(yt.s=6982)}]);